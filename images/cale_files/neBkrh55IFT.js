if (self.CavalryLogger) { CavalryLogger.start_js(["n3NSO"]); }

__d("MessengerAddToConversationDialogReact.bs",["cx","fbt","FBID.bs","bs_array","bs_block","bs_curry","React","Utils.bs","immutable","bs_js_boolean","MercuryIDs","bs_pervasives","ReasonReact.bs","bs_js_primitive","MessengerDialogs.bs","MercuryMessageObject","MessengerDialogReact.bs","MercuryLogMessageType","MercuryMessageActions","MercuryTriodeSourceUtil","MessengerAdminGroupUtils","MessengerGraphQLTokenizerReact.bs"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(p,q){if(typeof p==="number")return c("bs_block").__(0,[[c("immutable").List([])]]);else if(p.tag){var r=p[0];return c("bs_block").__(0,[[q[0].filter(function(s){return c("bs_js_boolean").to_js_boolean(+(s.getUniqueID()!==r))})]])}else return c("bs_block").__(0,[[q[0].push(p[0])]])}var k=c("ReasonReact.bs").reducerComponent("MessengerAddToConversationDialogReact");function l(p){if(p)return 0;else return c("MessengerDialogs.bs").removeDialog(0)}function m(p,q,r){__p&&__p();var s=function s(u,v){__p&&__p();var w=v[1],x=w[0].count(),y=+c("MessengerAdminGroupUtils").isJoinableThread(p),z=+c("MessengerAdminGroupUtils").shouldInvite(p),A=0;if(x!==0)if(y!==0)if(z!==0)w[0].forEach(function(B,r,C){var D=c("MercuryIDs").getThreadIDFromUserID(c("FBID.bs").ofStringExn(B.getUniqueID()));c("MercuryMessageActions").getForFBID(q).send(c("MercuryMessageObject").getForFBID(q).constructUserGeneratedMessageObject(p.joinable_mode.link,c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),D,[]),undefined,undefined);return true});else A=1;else if(z!==0)throw c("bs_pervasives").invalid_arg("Only joinable threads can invite");else A=1;if(A===1)c("MercuryMessageActions").getForFBID(q).send(c("MercuryMessageObject").getForFBID(q).constructLogMessageObject(c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),p.thread_id,c("MercuryLogMessageType").SUBSCRIBE,{added_participants:w[0].map(function(B,r,C){return c("MercuryIDs").getParticipantIDFromUserID(c("FBID.bs").ofStringExn(B.getUniqueID()))}).toArray()}),undefined,undefined);u.preventDefault();return c("MessengerDialogs.bs").removeDialog(0)},t=k.slice();t[9]=function(u){var v=+c("MessengerAdminGroupUtils").shouldInvite(p),w=c("immutable").Set(c("Utils.bs").arrayCompact(c("bs_array").map(function(x){return c("bs_js_primitive").null_undefined_to_opt(c("MercuryIDs").getUserIDFromParticipantID(x))},p.participants)));return c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Dialog[0](0,l,0,[1],0,["default"],[460],[c("React").createElement("div",{className:"_4jgp"},c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Header[0](0,0,[c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").CancelButton[0](0,[])),c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Title[0](0,[v!==0?i._("Invite More People"):i._("Add More People")])),c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Button[0](0,[i._("Done")],0,0,[c("bs_curry")._1(u[0],s)],[0],0,0,[]))])),c("ReasonReact.bs").element(0,0,c("MessengerGraphQLTokenizerReact.bs").make(1,["_4jgt"],0,0,0,+c("MessengerAdminGroupUtils").useNewGroupMemberSuggestionRanking(),u[1][0],1,1-+c("MessengerAdminGroupUtils").canSeeBotsInGroupTypeahead(),[1],0,function(x){return c("bs_curry")._1(u[3],c("bs_block").__(0,[x]))},[function(){return c("bs_curry")._1(u[3],0)}],function(x){return c("bs_curry")._1(u[3],c("bs_block").__(1,[x.getUniqueID()]))},w,v!==0?i._("Invite to group:"):i._("Add to group:"),c("bs_js_primitive").null_undefined_to_opt(p.associated_object),["_4jgu"],0,0,0,c("bs_js_primitive").null_undefined_to_opt(p.thread_fbid),0,q,460,[])))]))};t[10]=function(){return[c("immutable").List([])]};t[12]=j;return t}var n=c("ReasonReact.bs").wrapReasonForJs(k,function(p){return m(p.thread,p.viewer,[])}),o=460;g.reducer=j;g.component=k;g.dialogWidth=o;g.handleToggle=l;g.make=m;g.jsComponent=n}),null);