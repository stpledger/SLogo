if (self.CavalryLogger) { CavalryLogger.start_js(["UKEBt"]); }

__d("MessengerDetailViewHeaderReact.bs",["cx","fbt","FBID.bs","bs_curry","Event","React","Utils.bs","gkx","Bootload.bs","ReactDOM","debounce","LinkReact.bs","Bootloader","bs_js_boolean","CurrentUser","ReasonReact.bs","FBRTCSupport","bs_js_primitive","MercuryConfig","MessengerDomIDs.bs","bs_js_null_undefined","MercuryThreadInfo","ArchiveWarningReact.bs","MessageRequestUtils","MercuryParticipantTypes","MercuryThreadTitleReact.bs","MessengerLocalTimeReact.bs","WorkFocusModeController","MessengerCustomColorUtils.bs","MessengerJoinableModeType","MessengerWebDriverTestIDs","MessengerRTCCallButtonReact.bs","MessengerPresenceStatusReact.bs","MessengerInfoPanelButtonReact.bs","MontageThreadViewContainerReact.bs","messengerCalculateTruncationState"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("WorkFocusModeController").MessengerWorkAvailabilityStatus;function k(A){c("Bootloader").loadModules(["BootloadableMessengerUserControlsButtonReact.bs"],A,"MessengerDetailViewHeaderReact.bs");return 0}var l=[k],m=c("Bootload.bs").Create(l);function n(A){var B=c("bs_js_null_undefined").from_opt(A[0][0]),C=c("bs_js_null_undefined").from_opt(A[1][0]),D=c("bs_js_null_undefined").from_opt(A[2][0]),E=c("bs_js_null_undefined").from_opt(A[3][0]),F=c("bs_js_null_undefined").from_opt(A[4][0]);return c("messengerCalculateTruncationState")(B,C,D,E,F)}function o(A,B){B[1][3][0]=A==null?0:[c("ReactDOM").findDOMNode(A)];return 0}function p(A,B){B[1][1][0]=A==null?0:[A];return 0}function q(A,B){B[1][0][0]=A==null?0:[A];return 0}function r(A,B){B[1][2][0]=A==null?0:[A];return 0}function s(A,B){B[1][4][0]=A==null?0:[A];return 0}function t(A,B){if(A.has_montage&&c("MercuryConfig").MontageThreadViewer)return c("React").createElement("div",{ref:c("bs_curry")._1(B[0],s),className:"_1cwz"},c("ReasonReact.bs").element(0,0,c("MontageThreadViewContainerReact.bs").make(A.thread_id,0,[])));else return null}function u(A,B,C,D){__p&&__p();if(c("CurrentUser").isWorkUser())return null;else if(A){var E=A[0],F=+(E.contact.type===c("MercuryParticipantTypes").PAGE);if(F&&c("gkx")("AT6mUVDD74IWOTG0apJZF1LePh7SrhTQTrb19q8AoflSv5-DHG9ZPR3YfgtHmrA5yQIw4oTG7io_Cp0zzeQ4tvCvUxrq6ExcZIsaJQRg7A8JWA")){var G=D[1][5][0],H;if(G){var I=E.contact.is_messenger_blocked,J=E.contact.is_subscribed_to_page_updates,K=E.contact.fbid;H=c("ReasonReact.bs").element(0,0,c("bs_curry")._7(G[0][8],"_3xb9 _30yy",I,J,K,B,C,[]))}else H=null;return c("React").createElement("li",undefined,H)}else return null}else return null}function v(A,B){__p&&__p();var C=B.filter(function(F,G,H){if(F==null)return false;else{var D=F.fbid;if(D==null)return false;else return c("bs_js_boolean").to_js_boolean(+(D!==A))}}),D=C.count(),E=C.first();if(D!==1||E==null)return null;else return c("ReasonReact.bs").element(0,0,c("MessengerLocalTimeReact.bs").make("_5eu7",c("bs_js_primitive").null_undefined_to_opt(E.timezone),[]))}function w(A,B){var C=+(c("FBRTCSupport").isWebrtcSupported()&&c("FBRTCSupport").isOSSupported()),D=A?+(A[0].contact.type===c("MercuryParticipantTypes").PAGE):0,E=B?+(B[0].joinable_mode===c("MessengerJoinableModeType").JOINABLE):0,F;if(B){var G=B[0];F=+(G.participants.length>1)&&+c("MercuryThreadInfo").canReply(G)&&1-+c("MessageRequestUtils").isMessageRequest(G)}else F=0;if(C&&!D&&!E)return F;else return 0}var x=c("ReasonReact.bs").reducerComponent("MessengerDetailViewHeaderReact");function y(A,B,C,D,E,F,G,H){__p&&__p();var I=function I(G){if(w(A,F))if(F){var L=F[0],M=L.thread_id;return c("React").createElement("li",undefined,c("ReasonReact.bs").element(0,0,c("MessengerRTCCallButtonReact.bs").make("_30yy",c("MessengerCustomColorUtils.bs").customColorOrBlue(L),0,E,L,M,G,A?A[0].contact.name:"",[])))}else return null;else return null},J=function J(G){__p&&__p();if(w(A,F))if(F){var L=F[0],M=L.thread_id,N;if(A){var O=+A[0].isUserActive;N=O!==0?"_3qfl":""}else N="";return c("React").createElement("li",undefined,c("ReasonReact.bs").element(0,0,c("MessengerRTCCallButtonReact.bs").make("_30yy",c("MessengerCustomColorUtils.bs").customColorOrBlue(L),1,E,L,M,G,A?A[0].contact.name:"",[])),c("React").createElement("div",{className:N}))}else return null;else return null},K=function K(G){__p&&__p();var L;if(j==null)L=0;else{var M=+j.displayFocusBanner(G,E);L=M!==0?[j]:0}if(L)return[0,c("React").createElement(L[0],{className:"_2v6o",viewer:G,thread:c("bs_js_null_undefined").from_opt(F),participants:E})];else if(A){var N=A[0];return[0,c("ReasonReact.bs").element(0,0,c("MessengerPresenceStatusReact.bs").make(["_2v6o"],+N.isUserActive,c("bs_js_primitive").null_undefined_to_opt(N.lastActive),[N.platform],[]))]}else return[1,null]};return[x[0],x[1],x[2],x[3],function(L){c("bs_curry")._1(m[0],function(M){var N=L,O=M;N[1][5][0]=[O];return 0});return 0},function(L){return n(L[1][1])},x[6],x[7],x[8],function(L){__p&&__p();if(G)if(F){var M=F[0],N=G[0],O=1-+E.isEmpty()&&+E.every(function(R,H,S){if(R==null)return false;else return R.employee}),P=i._("Conversation Information"),Q=K(N);return c("React").createElement("div",{ref:c("bs_curry")._1(L[0],q),className:"_5742"+(c("bs_js_boolean").to_js_boolean(Q[0])?" _1_fz":"")},t(M,L),c("React").createElement("div",{key:"threadTitle",ref:c("bs_curry")._1(L[0],p),className:"_5743"},c("React").createElement("h2",{className:"_17w2",id:c("MessengerDomIDs.bs").ids.THREAD_TITLE},c("ReasonReact.bs").element(0,[c("bs_curry")._1(L[0],o)],c("MercuryThreadTitleReact.bs").make(["_3oh-"],[c("Utils.bs").$pipe$unknown(C,0)],M,N,0,0,0,0,[]))),Q[1],v(N,E)),c("React").createElement("ul",{key:"buttonsContainer",ref:c("bs_curry")._1(L[0],r),className:"_fl2"},c("React").createElement("li",undefined,c("ReasonReact.bs").element(0,0,c("ArchiveWarningReact.bs").make(O,[]))),u(A,M.thread_id,N,L),I(N),J(N),c("React").createElement("li",undefined,c("React").cloneElement(c("ReasonReact.bs").element(0,0,c("LinkReact.bs").make(0,["_30yy"],0,0,0,0,0,0,[D],0,0,["button"],0,0,0,[P],[])),{"aria-expanded":B!==0?false:true,"aria-label":P,"data-testid":c("MessengerWebDriverTestIDs").INFO_PANEL_BUTTON},c("MessengerInfoPanelButtonReact.bs").make(c("MessengerCustomColorUtils.bs").customColorOrBlue(M),B)),c("React").cloneElement(c("React").createElement("div",undefined),{"aria-owns":c("MessengerDomIDs.bs").ids.THREAD_INFO_PANEL}))))}else return null;else return null},function(){return[[0],[0],[0],[0],[0],[0]]},x[11],function(H,L){return 0},function(L){var M=L[1];return[[function(){return c("Event").listen(window,"resize",c("debounce")(function(){return n(M)},20))},function(N){return N.remove()}],0]},x[14]]}var z=c("ReasonReact.bs").wrapReasonForJs(x,function(A){return y(c("bs_js_primitive").null_undefined_to_opt(A.contactData),+A.infoPanelCollapsed,c("bs_js_primitive").null_undefined_to_opt(A.maxTitle),A.onInfoPanelToggle,A.participants,c("bs_js_primitive").null_undefined_to_opt(A.thread),c("FBID.bs").ofString(A.viewer),[])});g.messengerWorkAvailabilityStatus_=j;g.BootloadableMessengerUserControlsButtonReact=l;g.LoadableMessengerUserControlsButtonReact=m;g.calculateTruncationState=n;g.findMercuryTitle=o;g.findTitle=p;g.findRoot=q;g.findButtons=r;g.findMontage=s;g.renderMontageThread=t;g.renderUserControls=u;g.renderLocalTime=v;g.shouldShowCallButton=w;g.component=x;g.make=y;g.jsComponent=z}),null);