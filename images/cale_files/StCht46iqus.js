if (self.CavalryLogger) { CavalryLogger.start_js(["KtyMB"]); }

__d("ElementResizeEmitter",["cx","invariant","DOM","EventListener","SubscriptionList","requestAnimationFrame"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=!!navigator.userAgent.match(/Trident/);j=babelHelpers.inherits(m,c("SubscriptionList"));k=j&&j.prototype;function m(n){getComputedStyle(n).position!=="static"||i(0);k.constructor.call(this,m.__setup,m.__teardown);this.$ElementResizeEmitter1=n;this.$ElementResizeEmitter2=false}m.__setup=function(){var n=document.createElement("iframe");this.$ElementResizeEmitter3=n;if(l)n.src="javascript:void((function(){document.open();document.domain="+JSON.stringify(document.domain)+";document.close();})())";n.className="_3dtr";n.onload=this.$ElementResizeEmitter4.bind(this);this.$ElementResizeEmitter1.appendChild(n)};m.__teardown=function(){if(this.$ElementResizeEmitter3){if(this.$ElementResizeEmitter5!=undefined&&this.$ElementResizeEmitter3.document!==undefined)this.$ElementResizeEmitter5.remove();c("DOM").remove(this.$ElementResizeEmitter3);this.$ElementResizeEmitter3=undefined}};m.prototype.$ElementResizeEmitter4=function(){this.$ElementResizeEmitter6();var n=void 0;try{n=this.$ElementResizeEmitter3.contentWindow;n.document}catch(o){return}this.$ElementResizeEmitter5=c("EventListener").listen(n,"resize",this.$ElementResizeEmitter6.bind(this))};m.prototype.$ElementResizeEmitter6=function(){if(this.$ElementResizeEmitter2)return;this.$ElementResizeEmitter2=true;c("requestAnimationFrame")(function(){this.fireCallbacks();this.$ElementResizeEmitter2=false}.bind(this))};f.exports=m}),null);
__d("forEachDifference",["forEachObject"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j,k){__p&&__p();c("forEachObject")(i,function(l,m){if(Object.prototype.hasOwnProperty.call(j,m)){if(k.onBoth)k.onBoth(l,j[m],m)}else if(k.onLeft)k.onLeft(l,m)});c("forEachObject")(j,function(l,m){if(!Object.prototype.hasOwnProperty.call(i,m)&&k.onRight)k.onRight(l,m)})}f.exports=h}),null);
__d("partitionObject",["forEachObject"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){var l={},m={};c("forEachObject")(i,function(n,o){if(j.call(k,n,o,i))l[o]=n;else m[o]=n});return[l,m]}f.exports=h}),null);
__d("partitionObjectByKey",["partitionObject"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("partitionObject")(i,function(k,l){return j.has(l)})}f.exports=h}),null);
__d("LeafletLayer.react",["React","Set","areEqual","forEachDifference","forEachObject","partitionObjectByKey"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;function k(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=i.constructor).call.apply(n,[this].concat(q)),this.$LeafletLayer1=undefined,this.$LeafletLayer2=function(s){this.$LeafletLayer1=this.props.onCreateLayer(s);this.context.onAddLayer(this.$LeafletLayer1)}.bind(this),o}k.mutateEventHandlers=function(n,o,p){if(!c("areEqual")(o,p))c("forEachDifference")(o||{},p||{},{onLeft:function q(r,s){n.on(s,r)},onRight:function q(r,s){n.off(s,r)},onBoth:function q(r,s,t){if(r!==s){n.off(t,s);n.on(t,r)}}})};k.addEventHandlers=function(n,o){if(o!=null)c("forEachObject")(o,function(p,q){n.on(q,p)})};k.prototype.componentDidMount=function(){this.$LeafletLayer2(m(this.props))};k.prototype.componentDidUpdate=function(n){var o=m(this.props),p=m(n);if(this.props.onUpdateLayer!==n.onUpdateLayer||!this.props.onUpdateLayer(this.$LeafletLayer1,o,p)){this.context.onRemoveLayer(this.$LeafletLayer1);this.$LeafletLayer2(o)}};k.prototype.componentWillUnmount=function(){this.context.onRemoveLayer(this.$LeafletLayer1);this.$LeafletLayer1=null};k.prototype.render=function(){return null};k.propTypes={onCreateLayer:j.func.isRequired,onUpdateLayer:j.func.isRequired};k.contextTypes={onAddLayer:j.func.isRequired,onRemoveLayer:j.func.isRequired};var l=new(c("Set"))(Object.keys(k.propTypes));function m(n){return c("partitionObjectByKey")(n,l)[1]}f.exports=k}),null);
__d("LeafletMapLayer.react",["invariant","LeafletLayer.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$LeafletMapLayer1=function(){var r=c("React").Children.only(this.props.children);this.$LeafletMapLayer3=r;return r.type.toLayer(r.props)}.bind(this),this.$LeafletMapLayer2=function(r,s,t){var u=c("React").Children.only(this.props.children);if(u.type!==this.$LeafletMapLayer3.type)return false;this.$LeafletMapLayer3=u;return u.type.mutate(r,s,t)}.bind(this),n}l.prototype.componentDidMount=function(){var m=c("React").Children.only(this.props.children);m.type.mutate||h(0);m.type.toLayer||h(0)};l.prototype.render=function(){var m=c("React").Children.only(this.props.children);return c("React").createElement(c("LeafletLayer.react"),babelHelpers["extends"]({},m.props,{onAddLayer:this.props.onAddLayer,onRemoveLayer:this.props.onRemoveLayer,onCreateLayer:this.$LeafletMapLayer1,onUpdateLayer:this.$LeafletMapLayer2}))};l.propTypes={onAddLayer:k.func.isRequired,onRemoveLayer:k.func.isRequired};f.exports=l}),null);
__d("LeafletView",["invariant","GeoCoordinates","ImmutableObject","nearlyEqualNumbers"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("ImmutableObject"));j=i&&i.prototype;function k(l){l||h(0);l.center instanceof c("GeoCoordinates")||h(0);typeof l.zoom==="number"||h(0);j.constructor.call(this,l)}k.prototype.nearlyEquals=function(l){return this.center.nearlyEquals(l.center)&&c("nearlyEqualNumbers")(this.zoom,l.zoom)};k.prototype.setZoom=function(l){return new k({center:this.center,zoom:l})};k.prototype.setCenter=function(l){return new k({center:l,zoom:this.zoom})};k.DEFAULT=new k({center:new(c("GeoCoordinates"))(0,0),zoom:0});f.exports=k}),null);
__d("mod",[],(function a(b,c,d,e,f,g){function h(i,j){var k=i%j;if(k*j<0)k+=j;return k}f.exports=h}),null);
__d("LeafletUtils",["GeoCoordinates","LeafletView","leaflet","mod"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("leaflet").CRS.EPSG3857,i=360,j=i/2,k=c("leaflet").LatLng.DEG_TO_RAD,l=c("leaflet").LatLng.RAD_TO_DEG,m=c("leaflet").Projection.Mercator.R_MAJOR,n=2*Math.PI*m,o=new(c("leaflet").LatLngBounds)(new(c("leaflet").LatLng)(-i/4,-i/2),new(c("leaflet").LatLng)(i/4,i/2)),p={WHOLE_WORLD_BOUNDS:o,FULL_CIRCLE_DEG:i,fromLatLng:function q(r){return new(c("GeoCoordinates"))(r.lat,r.lng)},normalizedBounds:function q(r,s){var t=p.wrapLongitude(r.lng);s=c("leaflet").latLng(s.lat,s.lng+t-r.lng);r=c("leaflet").latLng(r.lat,t);return c("leaflet").latLngBounds(r,s)},fitBounds:function q(r,s,t){var u=t.crs||h,v=t.zoomRange,w=p.getBoundsZoom(r,s,{zoomRange:v,crs:u});if(w==null)w=v[0];var x=u.latLngToPoint(r.getSouthWest(),w),y=u.latLngToPoint(r.getNorthEast(),w),z=p.fromLatLng(u.pointToLatLng(x.add(y).divideBy(2),w));return new(c("LeafletView"))({center:z,zoom:w})},getBoundsZoom:function q(r,s,t){__p&&__p();var u=t.crs||h,v=t.zoomRange,w=c("leaflet").point(s.width,s.height),x=r.getNorthWest(),y=r.getSouthEast(),z=v[0]-1;for(;z<=v[1];++z){var A=u.latLngToPoint(y,z+1),B=u.latLngToPoint(x,z+1),C=A.subtract(B).floor();if(!w.contains(C))break}if(z<v[0])return null;if(z<=v[1])return z;return z-1},getViewBounds:function q(r,s,t){t=t||h;var u=s.width/2,v=s.height/2,w=p.toLatLng(r.center),x=t.latLngToPoint(w,r.zoom),y=t.pointToLatLng(c("leaflet").point(x.x-u,x.y+v),r.zoom),z=t.pointToLatLng(c("leaflet").point(x.x+u,x.y-v),r.zoom);return p.normalizedBounds(y,z)},isViewInBounds:function q(r,s,t,u){var v=p.getViewBounds(r,s,u),w=p.shiftBoundsLng(v,i);return t.some(function(x){return x.contains(v)||x.contains(w)})},projectCircle:function q(r,s,t){t=t||h;var u=p.toLatLng(r.center),v=t.projection,w=p.circleBounds(u,r.radius,v),x=t.latLngToPoint(w.getCenter(),s),y=t.latLngToPoint(w.getSouthWest(),s),z=t.latLngToPoint(w.getNorthEast(),s),A=c("leaflet").point(Math.round((z.x-y.x)/2),Math.round((y.y-z.y)/2));return{center:x,radius:A}},circleBounds:function q(r,s,t){t=t||h.projection;var u=r.lat,v=r.lng,w=s/m*l,x=t.project(c("leaflet").latLng(u+w,v)),y=t.project(c("leaflet").latLng(u-w,v)),z=x.add(y).divideBy(2),A=t.unproject(z).lat,B=u*k,C=A*k,D=Math.acos((Math.cos(w*k)-Math.sin(B)*Math.sin(C))/(Math.cos(B)*Math.cos(C)))*l;return c("leaflet").latLngBounds(c("leaflet").latLng(A-w,v-D),c("leaflet").latLng(A+w,v+D))},shiftBoundsLng:function q(r,s){return c("leaflet").latLngBounds([r.getSouthWest().lat,r.getSouthWest().lng+s],[r.getNorthEast().lat,r.getNorthEast().lng+s])},toLatLng:function q(r){return new(c("leaflet").LatLng)(r.latitude,r.longitude)},wrapLongitude:function q(r){return c("mod")(r+j,i)-j},areViewEqual:function q(r,s){if(!r&&!s)return true;if(!r||!s)return false;return r.zoom===s.zoom&&r.center.latitude===s.center.latitude&&r.center.longitude===s.center.longitude},metersToPixels:function q(r,s){return r/(n*Math.abs(Math.cos(s.center.latitude*k))/Math.pow(2,s.zoom+8))},distanceFromLatLng:function q(r,s,t){var u=s/m,v=t*k,w=r.lat*k,x=r.lng*k,y=Math.sin(w),z=Math.cos(w),A=Math.sin(u),B=Math.cos(u),C=Math.sin(v),D=Math.cos(v),E=y*B+z*A*D,F=Math.asin(E),G=C*A*z,H=B-y*E,I=x+Math.atan2(G,H);return new(c("leaflet").LatLng)(F*l,p.wrapLongitude(I*l))}};f.exports=p}),null);
__d("LeafletMap.react",["invariant","ElementResizeEmitter","LeafletMapLayer.react","LeafletUtils","LeafletView","React","ReactDOM","Set","debounceCore","emptyFunction","forEachDifference","leaflet","nullthrows"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=100,m=10,n=new(c("Set"))(["dragging","touchZoom","doubleClickZoom","scrollWheelZoom","boxZoom","keyboard","tab"]),o=k.instanceOf(c("LeafletView"));function p(v){var w=v.getCenter();return new(c("LeafletView"))({center:c("LeafletUtils").fromLatLng(w),zoom:v.getZoom()})}function q(v,w){return{center:[v.center.latitude,v.center.longitude],zoom:v.zoom,attributionControl:false,layers:w,trackResize:false}}function r(v,w,x){if(!n.has(w))throw new Error("cannot change Leaflet option `"+w+"` during component lifetime");v[w][x?"enable":"disable"]()}function s(v,w,x){if(w===x)return;c("forEachDifference")(w,x,{onLeft:function y(z,A){return r(v,A,z)},onRight:function y(z,A){throw new Error("reverting Leaflet option `"+A+"` back to default is not supported")},onBoth:function y(z,A,B){if(z!==A)r(v,B,z)}})}function t(v,w,x){c("forEachDifference")(w,x,{onLeft:function y(z,A){return void v.on(A,z)},onRight:function y(z,A){return void v.off(A,z)},onBoth:function y(z,A,B){if(z!==A){v.off(B,A);v.on(B,z)}}})}i=babelHelpers.inherits(u,c("React").Component);j=i&&i.prototype;function u(){__p&&__p();var v,w;for(var x=arguments.length,y=Array(x),z=0;z<x;z++)y[z]=arguments[z];return w=(v=j.constructor).call.apply(v,[this].concat(y)),this.$LeafletMap4=function(A){if(this.$LeafletMap3){this.$LeafletMap3.addLayer(A);return}this.$LeafletMap11().push(A)}.bind(this),this.$LeafletMap5=function(A){this.$LeafletMap3!==undefined||h(0);if(this.$LeafletMap3!==null)this.$LeafletMap3.removeLayer(A)}.bind(this),w}u.prototype.getChildContext=function(){return{onAddLayer:this.$LeafletMap4,onRemoveLayer:this.$LeafletMap5}};u.prototype.componentDidMount=function(){__p&&__p();var v=Object.assign({},this.props.defaultOptions,this.props.options,q(this.$LeafletMap10(),this.$LeafletMap11())),w=this.$LeafletMap3=c("leaflet").map(c("ReactDOM").findDOMNode(this),v);(this.props.controlOptions||{}).showScale&&c("leaflet").control.scale({imperial:false,shiftRight:true}).addTo(this.$LeafletMap3);this.$LeafletMap1=null;this.$LeafletMap8=c("debounceCore")(this.$LeafletMap12.bind(this),l);t(w,this.props.eventHandlers,{});w.on("movestart",this.$LeafletMap13.bind(this));w.on("moveend",this.$LeafletMap14.bind(this));this.$LeafletMap2="still";this.$LeafletMap9=new(c("Set"))();this.$LeafletMap7=c("debounceCore")(function(x,y){if(this.$LeafletMap3)this.$LeafletMap3.setView(x,y)}.bind(this),m);this.$LeafletMap6=new(c("ElementResizeEmitter"))(c("ReactDOM").findDOMNode(this)).add(function(){var w=this.$LeafletMap3;if(w!=null){w.invalidateSize();c("nullthrows")(this.props.onSizeSettled)(w.getSize())}}.bind(this))};u.prototype.componentDidUpdate=function(v){var w=this.$LeafletMap3;if(w==null)return;var x=this.props,y=x.eventHandlers,z=x.options;t(w,y,v.eventHandlers);s(w,z,v.options);this.$LeafletMap16(v.view)};u.prototype.componentWillUnmount=function(){this.$LeafletMap6.remove();if(this.$LeafletMap3!=null)this.$LeafletMap3.remove();this.$LeafletMap3=null};u.prototype.render=function(){var v=c("React").Children.map(this.props.children,function(w,x){if(!w)return w;if(w.type.toLayer==null)return w;return c("React").createElement(c("LeafletMapLayer.react"),{key:w.key,onAddLayer:this.$LeafletMap4,onRemoveLayer:this.$LeafletMap5},w)}.bind(this));return c("React").createElement("div",{className:this.props.className,style:babelHelpers["extends"]({display:"relative"},this.props.style)},v)};u.prototype.$LeafletMap11=function(){if(!this.$LeafletMap1)this.$LeafletMap1=[];return this.$LeafletMap1};u.prototype.$LeafletMap10=function(){if(this.props.view)return this.props.view;if(this.props.defaultView)return this.props.defaultView;return c("LeafletView").DEFAULT};u.prototype.$LeafletMap14=function(){__p&&__p();if(!this.$LeafletMap3)return;var v=p(this.$LeafletMap3),w=this.$LeafletMap2;this.$LeafletMap2="still";if(this.props.view){if(w==="moving-stale"){this.$LeafletMap12();return}if(v.nearlyEquals(this.props.view))return;this.$LeafletMap8()}if(!this.props.onViewChange)return;this.props.onViewChange(v)};u.prototype.$LeafletMap13=function(){if(!this.$LeafletMap3)return;if(this.$LeafletMap2==="still")this.$LeafletMap2="moving"};u.prototype.$LeafletMap12=function(){this.$LeafletMap8.reset();if(this.$LeafletMap2==="moving")this.$LeafletMap2="moving-stale";var v=this.props.view,w=this.$LeafletMap3;if(v==null||w==null||v.nearlyEquals(p(w)))return;this.$LeafletMap7([v.center.latitude,v.center.longitude],v.zoom)};u.prototype.$LeafletMap16=function(v){var w=this.props.view;if(!w||!this.$LeafletMap3||w===v||v&&w.nearlyEquals(v))return;this.$LeafletMap12()};u.prototype.$LeafletMap15=function(v,w){if(v[w]!==this.props[w]&&!this.$LeafletMap9.has(w))this.$LeafletMap9.add(w)};u.propTypes={className:k.string,defaultOptions:k.object,defaultView:k.instanceOf(c("LeafletView")),eventHandlers:k.object,onSizeSettled:k.func,onViewChange:k.func,options:k.object,style:k.object,view:function v(w,x,y){__p&&__p();for(var z=arguments.length,A=Array(z>3?z-3:0),B=3;B<z;B++)A[B-3]=arguments[B];var C=o.apply(undefined,[w,x,y].concat(A));if(!w[x]||C)return C;if(w[x]&&w.defaultView)return new Error("You provided both `view` and `defaultView` props to LeafletMap. `defaultView` will be discarded.");if(w.onViewChange)return null;return new Error("You provided a `view` prop to LeafletMap without an `onViewChange` handler. This will prevent the user to move the view. If the view should be movable use `defaultView`. Otherwise, set `onViewChange`.")}};u.defaultProps={eventHandlers:{},onSizeSettled:c("emptyFunction"),options:{}};u.childContextTypes={onAddLayer:k.func.isRequired,onRemoveLayer:k.func.isRequired};f.exports=u}),null);
__d("LeafletMarker.react",["GeoCoordinates","LeafletLayer.react","LeafletUtils","React","areEqual","leaflet","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.$LeafletMarker1=function(k,l,m){__p&&__p();var n=m.options||{},o=n.opacity,p=n.zIndex,q=babelHelpers.objectWithoutProperties(n,["opacity","zIndex"]),r=l.options||{},s=r.opacity,t=r.zIndex,u=babelHelpers.objectWithoutProperties(r,["opacity","zIndex"]);if(!c("areEqual")(u,q))return false;if(s!==o)k.setOpacity(s);if(t!==p)k.setZIndex(t);if(l.coordinates!==m.coordinates)k.setLatLng(c("LeafletUtils").toLatLng(l.coordinates));var v=l.popup;if(v){var w=v.type.mutate(k.getPopup(),v.props,c("nullthrows")(m.popup).props);if(!w){k.unbindPopup();k.bindPopup(v.type.toLayer(v.props,k))}}else if(!v&&m.popup)k.unbindPopup();c("LeafletLayer.react").mutateEventHandlers(k,l.eventHandlers,m.eventHandlers);return true};j.prototype.$LeafletMarker2=function(k){var l=c("leaflet").marker(c("LeafletUtils").toLatLng(k.coordinates),k.options);if(k.popup)l.bindPopup(k.popup.type.toLayer(k.popup.props,l));c("LeafletLayer.react").addEventHandlers(l,k.eventHandlers);return l};j.prototype.render=function(){return c("React").createElement(c("LeafletLayer.react"),babelHelpers["extends"]({},this.props,{onCreateLayer:this.$LeafletMarker2,onUpdateLayer:this.$LeafletMarker1}))};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("LeafletTileLayer.react",["LeafletLayer.react","React","areEqual","leaflet"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;k.prototype.render=function(){"use strict";return c("React").createElement(c("LeafletLayer.react"),babelHelpers["extends"]({},this.props,{onCreateLayer:l,onUpdateLayer:m}))};function k(){"use strict";h.apply(this,arguments)}k.propTypes={options:j.object,urlTemplate:j.string.isRequired};function l(n){return c("leaflet").tileLayer(n.urlTemplate,n.options)}function m(n,o,p){__p&&__p();var q=p.options||{},r=q.opacity,s=q.zIndex,t=babelHelpers.objectWithoutProperties(q,["opacity","zIndex"]),u=o.options||{},v=u.opacity,w=u.zIndex,x=babelHelpers.objectWithoutProperties(u,["opacity","zIndex"]);if(!c("areEqual")(x,t))return false;if(v!==r)n.setOpacity(v);if(w!==s)n.setZIndex(w);if(o.urlTemplate!==p.urlTemplate)n.setUrl(o.urlTemplate);return true}f.exports=k}),null);
__d("TilesMapTheme",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({DEFAULT:"default",CROWDSOURCING_OSM:"crowdsourcing_osm",ROAD_MASK_OSM_EDITING:"road_mask_osm_editing",LIVE_MAPS:"live_maps",INDOOR_OSM:"indoor_osm",LIVE_MAPS_MIMIC:"live_maps_mimic",MAP_DIFF:"map_diff"})}),null);
__d("XMapsProviderByViewPortController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/maps/provider_by_viewport/",{swlat:{type:"Float",required:true},swlon:{type:"Float",required:true},nelat:{type:"Float",required:true},nelon:{type:"Float",required:true},zoom:{type:"Float",required:true},v:{type:"Int"}})}),null);
__d("TilesMapUtils",["CurrentLocale","GeoCoordinates","GeoRectangle","LeafletUtils","LeafletView","TilesMapConfig","TilesMapTheme","URI","XAsyncRequest","XMapsProviderByViewPortController","leaflet"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("TilesMapConfig").OSM_RECTS_RAW.map(function(j){return c("leaflet").latLngBounds([j[2],j[1]],[j[0],j[3]])}),i={DEFAULT_VIEW:new(c("LeafletView"))({center:new(c("GeoCoordinates"))(0,0),zoom:c("TilesMapConfig").ZOOM_RANGE.MIN}),getMapProviderForAttributionByViewPort:function j(k,l,m){var n=c("XMapsProviderByViewPortController").getURIBuilder().setFloat("swlat",k.getSouth()).setFloat("swlon",k.getWest()).setFloat("nelat",k.getNorth()).setFloat("nelon",k.getEast()).setFloat("zoom",l).setInt("v",c("TilesMapConfig").VERSION).getURI();new(c("XAsyncRequest"))(n).setHandler(function(o){return m(o.payload)}).send()},getTileURLTemplate:function j(k,l){if(!k)k=c("CurrentLocale").get();return c("TilesMapConfig").TILE_URL_TEMPLATE+"&language="+k+(l&&l!==c("TilesMapTheme").DEFAULT?"&theme="+l:"")+(l===c("TilesMapTheme").LIVE_MAPS?"&lmv="+c("TilesMapConfig").LIVE_MAP_VERSION:"")},getOSMRects:function j(){return i.getOSMRectsFromRaw(c("TilesMapConfig").OSM_RECTS_RAW)},getOSMRectsFromRaw:function j(k){return k.map(function(l){return new(c("GeoRectangle"))(l[0],l[1],l[2],l[3])})},getMapProviderForAttribution:function j(k,l,m,n){if(l.height<c("TilesMapConfig").MIN_SIZE_FOR_ATTRIBUTION||l.width<c("TilesMapConfig").MIN_SIZE_FOR_ATTRIBUTION)return null;if(n!==""&&n!==c("TilesMapTheme").DEFAULT&&n!==c("TilesMapTheme").ROAD_MASK_OSM_EDITING)return"OSM";if(k.zoom<c("TilesMapConfig").OSM_ZOOM_THRESHOLD)return"HERE";return c("LeafletUtils").isViewInBounds(k,l,h,m)?"OSM":"HERE"},getMapProviderForReportButton:function j(k,l){if(l!==""&&l!==c("TilesMapTheme").DEFAULT&&l!==c("TilesMapTheme").ROAD_MASK_OSM_EDITING)return"OSM";if(k.zoom<c("TilesMapConfig").OSM_ZOOM_THRESHOLD)return"HERE";var m=c("leaflet").latLng(k.center.latitude,k.center.longitude);return h.some(function(n){return n.contains(m)})?"OSM":"HERE"},getHereReporterToolUrl:function j(k){return new(c("URI"))(c("TilesMapConfig").HERE_MAP_REPORTER_URL).addQueryData("features","road,border").addQueryData("zoomLevel",Math.floor(k.zoom)).addQueryData("lang",c("CurrentLocale").get()).addQueryData("coord",k.center.latitude+","+k.center.longitude).toString()}};f.exports=i}),null);
__d("MessengerDynamicMap.react",["CurrentLocale","GeoCoordinates","leaflet","LeafletMap.react","LeafletMarker.react","LeafletTileLayer.react","LeafletUtils","LeafletView","React","TilesMapUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes,k={tap:false},l={icon:c("leaflet").icon({iconUrl:"https://www.facebook.com/images/places/map/bright-pink-pin.png",iconSize:[20,27],iconAnchor:[9,24]}),draggable:true};h=babelHelpers.inherits(m,c("React").PureComponent);i=h&&h.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=i.constructor).call.apply(n,[this].concat(q)),this.$MessengerDynamicMap1=new(c("LeafletView"))({center:new(c("GeoCoordinates"))(this.props.lat,this.props["long"]),zoom:this.props.zoom}),this.$MessengerDynamicMap2=function(event){var s=event.target&&event.target.getLatLng(),t=c("LeafletUtils").fromLatLng(s);this.props.onMarkerDragEnd(t&&t.latitude,t&&t.longitude)}.bind(this),o}m.prototype.render=function(){var n=c("TilesMapUtils").getTileURLTemplate(c("CurrentLocale").get());return c("React").createElement(c("LeafletMap.react"),{defaultOptions:k,defaultView:this.$MessengerDynamicMap1,style:{height:this.props.height+"px",width:this.props.width+"px"}},c("React").createElement(c("LeafletTileLayer.react"),{urlTemplate:n}),c("React").createElement(c("LeafletMarker.react"),{coordinates:new(c("GeoCoordinates"))(this.props.lat,this.props["long"]),eventHandlers:{dragstart:this.props.onMarkerDragStart,dragend:this.$MessengerDynamicMap2},options:l}))};m.defaultProps={zoom:15};m.propTypes={lat:j.number.isRequired,"long":j.number.isRequired,height:j.number.isRequired,width:j.number.isRequired,onMarkerDragEnd:j.func.isRequired,onMarkerDragStart:j.func.isRequired,zoom:j.number.isRequired};f.exports=m}),null);
__d("MessengerBotsQuickReplyButton.react",["cx","ix","Image.react","MessengerEnvironment","React","ShimButton.react","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l,m,n,o,p,q,r,s,t=c("React").PropTypes;j=babelHelpers.inherits(u,c("React").Component);k=j&&j.prototype;u.prototype.render=function(){return c("React").createElement("div",{className:"_56n2"},this.$MessengerBotsQuickReplyButton1())};u.prototype.$MessengerBotsQuickReplyButton1=function(){switch(this.props.option.content_type){case"text":return c("React").createElement(v,babelHelpers["extends"]({imageUrl:this.$MessengerBotsQuickReplyButton2()},this.props));case"location":case"p2p_payment":case"open_camera":case"record_audio":return c("React").createElement(w,babelHelpers["extends"]({imageUrl:this.$MessengerBotsQuickReplyButton2()},this.props));case"user_phone_number":return c("React").createElement(v,babelHelpers["extends"]({imageUrl:this.$MessengerBotsQuickReplyButton2()},this.props));case"user_email":return c("React").createElement(v,babelHelpers["extends"]({imageUrl:this.$MessengerBotsQuickReplyButton2()},this.props));case"ride_service":case"sticker":default:return null}};u.prototype.$MessengerBotsQuickReplyButton2=function(){var z=this.props.option,A=c("MessengerEnvironment").messengerui;switch(z.content_type){case"location":return A?i("87219"):i("87222");case"p2p_payment":return A?i("87227"):i("87226");case"open_camera":return A?i("87289"):i("87288");case"record_audio":return A?i("87219"):i("87222");default:return z.image_url}};function u(){j.apply(this,arguments)}u.propTypes={className:t.string,isMessengerAdPreview:t.bool,option:t.object.isRequired,onClick:t.func.isRequired,userData:t.string};l=babelHelpers.inherits(v,c("React").Component);m=l&&l.prototype;v.prototype.render=function(){var z=this.props,A=z.option,B=z.onClick,C=z.imageUrl,D=z.userData,E=c("MessengerEnvironment").messengerui,F=!!C,G=A&&A.title;if(A.content_type==="user_email"||A.content_type==="user_phone_number")G=D;if(G)return c("React").createElement(c("ShimButton.react"),{className:c("joinClasses")(this.props.className,"_3u69"+(E?" _36wf":"")+(E&&!F?" _2pi9":"")+(!E?" _-lq":"")+(!E&&!F?" _2pi8":"")),onClick:this.props.isMessengerAdPreview?null:B},F&&C?c("React").createElement(x,{imageUrl:C}):null,c("React").createElement(y,{hasIcon:F,title:G}));else return null};function v(){l.apply(this,arguments)}v.propTypes={option:t.object.isRequired,imageUrl:c("Image.react").validateImageSrcPropType,isMessengerAdPreview:t.bool,onClick:t.func.isRequired};n=babelHelpers.inherits(w,c("React").Component);o=n&&n.prototype;w.prototype.render=function(){var z=this.props,A=z.option,B=z.onClick,C=z.imageUrl,D=c("MessengerEnvironment").messengerui,E=this.$ActionButton1();return c("React").createElement(c("ShimButton.react"),{className:c("joinClasses")(this.props.className,"_3u69"+(!E?" _5pdw":"")+(D?" _10-b":"")+(D&&E?" _5pdx":"")+(!D?" _-lq":"")+(!D&&E?" _5pdy":"")),onClick:B},C?c("React").createElement(x,{imageUrl:C}):null,c("React").createElement(y,{hasIcon:!!C,title:A&&A.title}))};w.prototype.$ActionButton1=function(){switch(this.props.option.content_type){case"p2p_payment":case"location":case"open_camera":return false;case"ride_service":case"sticker":return true;case"record_audio":var z=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return!z;default:return false}};function w(){n.apply(this,arguments)}w.propTypes={option:t.object.isRequired,imageUrl:c("Image.react").validateImageSrcPropType,onClick:t.func.isRequired};p=babelHelpers.inherits(x,c("React").Component);q=p&&p.prototype;x.prototype.render=function(){var z=this.props.imageUrl,A=c("MessengerEnvironment").messengerui;return c("React").createElement(c("Image.react"),{src:z,className:(A?"_10-a":"")+(!A?" _10-9":"")+(!A?" _3-8h":"")})};function x(){p.apply(this,arguments)}x.propTypes={imageUrl:c("Image.react").validateImageSrcPropType};r=babelHelpers.inherits(y,c("React").Component);s=r&&r.prototype;y.prototype.render=function(){var z=this.props,A=z.hasIcon,B=z.title,C=c("MessengerEnvironment").messengerui;return c("React").createElement("div",{className:(C?"_10-e":"")+(C&&A?" _10-f":"")+(C&&A?" _3-91":"")+(!C?" _10-c":"")+(!C&&A?" _10-d":"")+(!C&&A?" _3-90":"")},B)};function y(){r.apply(this,arguments)}y.propTypes={hasIcon:t.bool.isRequired,title:t.string.isRequired};f.exports=u}),null);
__d("MessengerDynamicMapReact.bs",["bs_curry","ReasonReact.bs","MessengerDynamicMap.react"],(function a(b,c,d,e,f,g){"use strict";function h(j,k,l){return c("bs_curry")._1(j,[k,l])}function i(j,k,l,m,n,o,p){return c("ReasonReact.bs").wrapJsForReason(c("MessengerDynamicMap.react"),{lat:j,"long":k,onMarkerDragEnd:function q(r,s){return c("bs_curry")._1(l,[r,s])},onMarkerDragStart:m,height:n,width:o},p)}g.makeTwoArgTuple=h;g.make=i}),null);
__d("MessengerSendLocationDialogReact.bs",["cx","fbt","bs_block","bs_curry","React","Utils.bs","CurrentUser","ReasonReact.bs","PhotosUploadID","MessengerDialogs.bs","MercuryMessageObject","MessengerDialogReact.bs","MercuryAttachmentType","MercuryMessageActions","MessengerSpinnerReact.bs","MercuryTriodeSourceUtil","MessengerDialogBodyReact.bs","MessengerDynamicMapReact.bs"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={enableHighAccuracy:true,timeout:6e4,maximumAge:12e4};function k(){return c("Utils.bs").isTruthy(navigator&&"geolocation"in navigator)}function l(y){if(y)return 0;else return c("MessengerDialogs.bs").removeDialog(0)}function m(y,z){var A=c("Utils.bs").isTruthy(navigator&&"geolocation"in navigator),B=z[1][4][0];if(A!==0&&B){navigator.geolocation.clearWatch(B[0]);return 0}else return 0}function n(y){return c("Utils.bs").$pipe$unknown(y[1],i._("Your Location"))}function o(y,z){__p&&__p();var A=z[3],B=z[1],C=B[0],D=B[2],E=B[3];if(C)return C[0];else{var F=0;if(D)if(E)return c("ReasonReact.bs").element(0,0,c("MessengerDynamicMapReact.bs").make(D[0],E[0],function(G){return c("bs_curry")._1(A,c("bs_block").__(0,[G]))},c("bs_curry")._1(z[0],m),500,500,[]));else F=1;else F=1;if(F===1)return c("React").createElement("div",{className:"_j4g"},y)}}function p(y){return m(0,y)}function q(y){var z=y[3];if(c("Utils.bs").isTruthy(navigator&&"geolocation"in navigator))y[1][4][0]=[navigator.geolocation.watchPosition(function(A){return c("bs_curry")._1(z,c("bs_block").__(1,[A]))},function(A){return c("bs_curry")._1(z,c("bs_block").__(2,[A]))},j)];else c("bs_curry")._1(z,c("bs_block").__(3,[0]));return 0}function r(){return[0,0,0,0,[0]]}var s=c("ReasonReact.bs").reducerComponent("MessengerSendLocationDialogReact");function t(y,z,A){__p&&__p();var B=function B(A,E){__p&&__p();var F=E[1];c("MessengerDialogs.bs").removeDialog(0);var G=c("CurrentUser").getID(),H=c("MercuryMessageObject").getForFBID(G),I=c("MercuryMessageActions").getForFBID(G),J="upload_"+c("PhotosUploadID").getNewID(),K=H.constructAttachmentMessageObject(c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),y),L=F[2],M=F[3];if(L)if(M)K.location_attachment={coordinates:{latitude:L[0],longitude:M[0]},is_current_location:true};var N={upload_id:J,preview_attachments:[{upload_id:J,attach_type:c("MercuryAttachmentType").PHOTO,preview_uploading:true}]};I.addAttachmentPlaceholder(K,J,N);I.send(K,function(){I.confirmAttachmentPlaceholder(J,{upload_id:J});return 0},undefined);return c("bs_curry")._1(z,0)},C=function C(E){var F=E[1],G=F[0],H=F[2],I=F[3];if(G||!(H&&I))return null;else return c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Button[0](0,[i._("Send Location")],0,0,[c("bs_curry")._1(E[0],B)],[0],0,0,[]))},D=s.slice();D[4]=q;D[6]=p;D[9]=function(E){return c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Dialog[0](0,l,0,0,0,0,[548],[c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Header[0](0,0,n(E[1]))),c("ReasonReact.bs").element(0,0,c("MessengerDialogBodyReact.bs").make(0,[o(c("ReasonReact.bs").element(0,0,c("MessengerSpinnerReact.bs").make(0,0,0,[])),E)])),c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Footer[0](0,0,[c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").CancelButton[0](0,[])),C(E)]))]))};D[10]=r;D[12]=function(E,F){switch(E.tag|0){case 0:var G=E[0];return c("bs_block").__(0,[[F[0],F[1],[G[0]],[G[1]],F[4]]]);case 1:var H=E[0];return c("bs_block").__(0,[[F[0],F[1],[H.coords.latitude],[H.coords.longitude],F[4]]]);case 2:var I=E[0].code,J=I!==1?[i._("Sorry, something went wrong. Please try again or send your location from the Messenger app."),i._("Couldn't Find Location")]:[i._("Messenger needs permission to access your location. Please update your browser settings or use the Messenger app."),i._("Permission Required")];return c("bs_block").__(0,[[[J[0]],[J[1]],F[2],F[3],F[4]]]);case 3:return c("bs_block").__(0,[[[i._("Your browser doesn't support location sharing. You can also send your location from the Messenger app.")],[i._("Location Not Supported")],F[2],F[3],F[4]]])}};return D}var u=c("ReasonReact.bs").wrapReasonForJs(s,function(y){return t(y.threadID,y.onCompletion,[])}),v=500,w=500,x=c("Utils.bs").$pipe$unknown;g.mapHeight=v;g.mapWidth=w;g.locationOptions=j;g.$pipe$unknown=x;g.isLocationAPISupported=k;g.handleToggle=l;g.clearWatchLocation=m;g.getTitle=n;g.getBody=o;g.willUnmount=p;g.didMount=q;g.initialState=r;g.component=s;g.make=t;g.jsComponent=u}),null);
__d("XUIDialogReact.bs",["ReasonReact.bs","bs_js_null_undefined","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogHeader.react","XUIDialogHeaderTitle.react","XUIDialogCancelButton.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(v){if(v)switch(v[0]){case 0:return["cancel"];case 1:return["confirm"];case 2:return["button"]}else return 0}function i(v){if(v)switch(v[0]){case 0:return["default"];case 1:return["special"];case 2:return["confirm"]}else return 0}function j(v){return c("ReasonReact.bs").wrapJsForReason(c("XUIDialogHeader.react"),{},v)}var k=[j];function l(v){return c("ReasonReact.bs").wrapJsForReason(c("XUIDialogHeaderTitle.react"),{},v)}var m=[l];function n(v){return c("ReasonReact.bs").wrapJsForReason(c("XUIDialogBody.react"),{},v)}var o=[n];function p(v){return c("ReasonReact.bs").wrapJsForReason(c("XUIDialogFooter.react"),{},v)}var q=[p];function r(v,w,x,y,z){return c("ReasonReact.bs").wrapJsForReason(c("XUIDialogButton.react"),{action:c("bs_js_null_undefined").from_opt(h(v)),label:c("bs_js_null_undefined").from_opt(w),onClick:c("bs_js_null_undefined").from_opt(x),use:c("bs_js_null_undefined").from_opt(i(y))},z)}var s=[r];function t(v){return c("ReasonReact.bs").wrapJsForReason(c("XUIDialogCancelButton.react"),{},v)}var u=[t];g.stringOfButtonAction=h;g.stringOfButtonUse=i;g.Header=k;g.HeaderTitle=m;g.Body=o;g.Footer=q;g.Button=s;g.CancelButton=u}),null);
__d("XUISpinnerReact.bs",["ReasonReact.bs","XUISpinner.react"],(function a(b,c,d,e,f,g){"use strict";function h(i){return c("ReasonReact.bs").wrapJsForReason(c("XUISpinner.react"),{},i)}g.make=h}),null);
__d("ChatTabSendLocationDialogReact.bs",["fbt","bs_block","bs_curry","React","CurrentUser","ReasonReact.bs","PhotosUploadID","XUIDialogReact.bs","XUISpinnerReact.bs","MercuryMessageObject","MercuryAttachmentType","MercuryMessageActions","MercuryTriodeSourceUtil","MessengerSendLocationDialogReact.bs"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=h._("Send Location"),j=c("ReasonReact.bs").reducerComponent("ChatTabSendLocationDialogReact");function k(l,m,n){__p&&__p();var o=function o(n,r){__p&&__p();var s=r[1],t=c("CurrentUser").getID(),u=c("MercuryMessageObject").getForFBID(t),v=c("MercuryMessageActions").getForFBID(t),w="upload_"+c("PhotosUploadID").getNewID(),x=u.constructAttachmentMessageObject(c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),l),y=s[2],z=s[3];if(y)if(z)x.location_attachment={coordinates:{latitude:y[0],longitude:z[0]},is_current_location:true};var A={upload_id:w,preview_attachments:[{upload_id:w,attach_type:c("MercuryAttachmentType").PHOTO,preview_uploading:true}]};v.addAttachmentPlaceholder(x,w,A);v.send(x,function(){v.confirmAttachmentPlaceholder(w,{upload_id:w});return 0},undefined);return c("bs_curry")._1(m,0)},p=function p(r){__p&&__p();var s=r[1],t=s[0],u=s[2],v=s[3],w=0;if(t)w=1;else if(u)if(v)return c("ReasonReact.bs").element(0,0,c("XUIDialogReact.bs").Button[0]([0],[i],[c("bs_curry")._1(r[0],o)],[2],[]));else w=1;else w=1;if(w===1)return c("ReasonReact.bs").element(0,0,c("XUIDialogReact.bs").CancelButton[0]([]))},q=j.slice();q[4]=c("MessengerSendLocationDialogReact.bs").didMount;q[6]=c("MessengerSendLocationDialogReact.bs").willUnmount;q[9]=function(r){return c("React").createElement("div",undefined,c("ReasonReact.bs").element(0,0,c("XUIDialogReact.bs").Header[0]([c("ReasonReact.bs").element(0,0,c("XUIDialogReact.bs").HeaderTitle[0](c("MessengerSendLocationDialogReact.bs").getTitle(r[1])))])),c("ReasonReact.bs").element(0,0,c("XUIDialogReact.bs").Body[0](c("MessengerSendLocationDialogReact.bs").getBody(c("ReasonReact.bs").element(0,0,c("XUISpinnerReact.bs").make([])),r))),c("ReasonReact.bs").element(0,0,c("XUIDialogReact.bs").Footer[0](p(r))))};q[10]=c("MessengerSendLocationDialogReact.bs").initialState;q[12]=function(r,s){switch(r.tag|0){case 0:var t=r[0];return c("bs_block").__(0,[[s[0],s[1],[t[0]],[t[1]],s[4]]]);case 1:var u=r[0];return c("bs_block").__(0,[[s[0],s[1],[u.coords.latitude],[u.coords.longitude],s[4]]]);case 2:var v=r[0].code,w=v!==1?[h._("Sorry, something went wrong. Please try again or send your location from the Messenger app."),h._("Couldn't Find Location")]:[h._("Facebook needs permission to access your location. Please update your browser settings or use the Messenger app."),h._("Permission Required")];return c("bs_block").__(0,[[[w[0]],[w[1]],s[2],s[3],s[4]]]);case 3:return c("bs_block").__(0,[[[h._("Your browser doesn't support location sharing. You can also send your location from the Messenger app.")],[h._("Location Not Supported")],s[2],s[3],s[4]]])}};return q}g.sendButtonTitle=i;g.component=j;g.make=k}),null);
__d("ChatTabSendLocationDialog.bs",["DialogX","ReasonReact.bs","ChatTabSendLocationDialogReact.bs"],(function a(b,c,d,e,f,g){"use strict";function h(j,k,l){var m=c("ReasonReact.bs").element(0,0,c("ChatTabSendLocationDialogReact.bs").make(j,k,[])),n={width:524};c("DialogX").show(new(c("DialogX"))(n,m));return 0}var i=524;g.dialogWidth=i;g.show=h}),null);
__d("MessengerAskLocationPermissionDialogReact.bs",["fbt","ReasonReact.bs","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs","MessengerSendLocationDialogReact.bs"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=h._("Allow Location Access"),j=h._("Giving Messenger access to your location enables features like sharing where you are with friends. You can turn it off anytime."),k=h._("Allow"),l=c("ReasonReact.bs").statelessComponent("MessengerAskLocationPermissionDialogReact");function m(p){if(p)return 0;else return c("MessengerDialogs.bs").removeDialog(0)}function n(p,q){var r=function r(){c("MessengerDialogs.bs").removeDialog(0);return c("MessengerDialogs.bs").showDialog(function(){return c("ReasonReact.bs").element(0,0,c("MessengerSendLocationDialogReact.bs").make(p,function(){return 0},[]))})},s=l.slice();s[9]=function(){return c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Dialog[0](0,m,0,0,0,0,0,[c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Header[0](0,0,i)),c("ReasonReact.bs").element(0,0,c("MessengerDialogBodyReact.bs").make(0,[j])),c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Footer[0](0,0,[c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").CancelButton[0](0,[])),c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Button[0](0,[k],0,0,[r],[0],0,0,[]))]))]))};return s}var o=c("ReasonReact.bs").wrapReasonForJs(l,function(p){return n(p.threadID,[])});g.title=i;g.message=j;g.buttonLabel=k;g.component=l;g.handleToggle=m;g.make=n;g.jsComponent=o}),null);
__d("MessengerBotsQuickReplyButtonContainer.react",["cx","fbt","Bootloader","BootloadedComponent.react","ChatTabSendLocationDialog.bs","CurrentUser","JSResource","LazyComponent.react","LoadOnRender.react","MercuryIDs","MercuryMessageActions","MercuryMessageObject","MercurySourceType","MessengerAdsWebTypedLogger","MessengerAskLocationPermissionDialogReact.bs","MessengerBotsWebTypedLogger","MessengerBotsQuickReplyButton.react","MessengerContextualDialog.react","MessengerDialogs.bs","MessengerQuickCamActions","MessengerQuickCamOrigins","MessengerEnvironment","MessengerSendLocationDialogReact.bs","MessengerSpinner.react","MNBotsLoggerEvents","MNAdsLoggerEventEnum","P2PActions","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","PECurrency","React","XUIDialog.react","XUISpinner.react","emptyFunction"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MercuryMessageActions").get(),m=c("MessengerAskLocationPermissionDialogReact.bs").jsComponent,n=c("MessengerSendLocationDialogReact.bs").jsComponent,o=c("React").PropTypes,p="omni_m",q=function q(s){c("Bootloader").loadModules(["MessengerVoiceClipFlyoutReact.bs"],function(t){var u=t.jsComponent;return s(u)},"MessengerBotsQuickReplyButtonContainer.react")};j=babelHelpers.inherits(r,c("React").PureComponent);k=j&&j.prototype;function r(){__p&&__p();var s,t;for(var u=arguments.length,v=Array(u),w=0;w<u;w++)v[w]=arguments[w];return t=(s=k.constructor).call.apply(s,[this].concat(v)),this.state={camDialogOpen:false,voiceDialogOpen:false},this.$MessengerBotsQuickReplyButtonContainer1=false,this.$MessengerBotsQuickReplyButtonContainer2=null,this.$MessengerBotsQuickReplyButtonContainer3=function(){var x=new(c("MercuryMessageObject"))(c("CurrentUser").getID()),y=this.props.option,z=this.props.threadID;l.send(x.constructCTAConfirmationMessageObject(y.title,c("MercurySourceType").TITAN_WEB,z,y));new(c("MessengerBotsWebTypedLogger"))().setEvent(c("MNBotsLoggerEvents").BOT_COMPOSER_QUICK_REPLY_TAPPED).setPageID(c("MercuryIDs").getUserIDFromThreadID(z)).setPayload(y.payload).setTitle(y.title).setQrContentType(y.content_type).setIndex(this.props.index.toString()).log();if(this.props.isSponsored)new(c("MessengerAdsWebTypedLogger"))().setEvent(c("MNAdsLoggerEventEnum").QUICK_REPLY_TAPPED).setIsSponsored(this.props.isSponsored).setMessageID(this.props.messageId).setPageID(this.props.pageId).setIndex(this.props.index.toString()).log()}.bind(this),this.$MessengerBotsQuickReplyButtonContainer4=function(){__p&&__p();var x=c("MessengerEnvironment").messengerui;if(x)if(navigator&&"permissions"in navigator)navigator.permissions.query({name:"geolocation"}).then(function(y){var z=y&&y.state;if(z==="prompt")c("MessengerDialogs.bs").showDialog(function(){return c("React").createElement(m,{threadID:this.props.threadID})}.bind(this));else c("MessengerDialogs.bs").showDialog(function(){return c("React").createElement(n,{threadID:this.props.threadID,onCompletion:c("emptyFunction")})}.bind(this))}.bind(this)).done();else c("MessengerDialogs.bs").showDialog(function(){return c("React").createElement(n,{threadID:this.props.threadID,onCompletion:c("emptyFunction")})}.bind(this));else c("ChatTabSendLocationDialog.bs").show(this.props.threadID,c("emptyFunction"))}.bind(this),this.$MessengerBotsQuickReplyButtonContainer5=function(){var x=this.props,y=x.option,z=x.threadID,A=y&&y.data&&y.data.payment_amount,B=y&&y.data&&y.data.payment_currency,C=y&&y.data&&y.data.payment_type,D={referrer:p,threadID:z,openRequestTab:C==="request",onCompletion:c("emptyFunction")};if(A&&B)D.amount=c("PECurrency").formatAmount(B,A,false,false,false,false);c("P2PLogger").log(c("P2PPaymentLoggerEvent").UI_ACTN_SEND_MONEY_OMNIM_SUGGESTION_CLICKED,{www_event_flow:C==="request"?c("P2PPaymentLoggerEventFlow").UI_FLOW_P2P_REQUEST:c("P2PPaymentLoggerEventFlow").UI_FLOW_P2P_SEND,amount:A,currency:B,object_id:c("MercuryIDs").getThreadFBIDFromThreadID(z)});c("P2PActions").chatSendViewOpened(D)}.bind(this),this.$MessengerBotsQuickReplyButtonContainer6=function(x){if(this.state.camDialogOpen)return;x.stopPropagation();this.setState(function(y){return{camDialogOpen:!y.camDialogOpen}})}.bind(this),this.$MessengerBotsQuickReplyButtonContainer8=function(){__p&&__p();var x=new(c("MercuryMessageObject"))(c("CurrentUser").getID()),y=this.props,z=y.option,A=y.viewerEmail,B=y.viewerPhone,C=this.props.threadID,D=null;switch(z.content_type){case"user_email":D=A;break;case"user_phone_number":D=B;break;default:break}if(D===null)return;var E=z;E.payload=D;l.send(x.constructCTAConfirmationMessageObject(D,c("MercurySourceType").TITAN_WEB,C,E));new(c("MessengerBotsWebTypedLogger"))().setEvent(c("MNBotsLoggerEvents").BOT_COMPOSER_QUICK_REPLY_TAPPED).setPageID(c("MercuryIDs").getUserIDFromThreadID(C)).setQrContentType(z.content_type).setIndex(this.props.index.toString()).log()}.bind(this),this.$MessengerBotsQuickReplyButtonContainer15=function(){if(this.state.camDialogOpen)this.setState({camDialogOpen:false})}.bind(this),this.$MessengerBotsQuickReplyButtonContainer16=function(x){if(!x)this.$MessengerBotsQuickReplyButtonContainer15();else c("MessengerQuickCamActions").requestUserMedia(this.props.viewer,this.props.threadID)}.bind(this),this.$MessengerBotsQuickReplyButtonContainer7=function(x){x.stopPropagation();if(this.state.voiceDialogOpen||this.$MessengerBotsQuickReplyButtonContainer1)return;this.setState(function(y){return{voiceDialogOpen:!y.voiceDialogOpen}})}.bind(this),this.$MessengerBotsQuickReplyButtonContainer9=function(x){this.$MessengerBotsQuickReplyButtonContainer1=this.state.voiceDialogOpen}.bind(this),this.$MessengerBotsQuickReplyButtonContainer12=function(x){this.setState({voiceDialogOpen:x})}.bind(this),this.$MessengerBotsQuickReplyButtonContainer13=function(){this.setState({voiceDialogOpen:false})}.bind(this),this.$MessengerBotsQuickReplyButtonContainer14=function(x){this.setState({voiceDialogOpen:false});this.props.onVoiceClipCreate&&this.props.onVoiceClipCreate(x)}.bind(this),t}r.prototype.render=function(){__p&&__p();var s=this.props,t=s.option,u=s.viewerEmail,v=s.viewerPhone;if(t.content_type==="user_email"&&u===null||t.content_type==="user_phone_number"&&v===null)return null;var w={text:this.$MessengerBotsQuickReplyButtonContainer3,location:this.$MessengerBotsQuickReplyButtonContainer4,sticker:c("emptyFunction"),p2p_payment:this.$MessengerBotsQuickReplyButtonContainer5,ride_service:c("emptyFunction"),open_camera:this.$MessengerBotsQuickReplyButtonContainer6,record_audio:this.$MessengerBotsQuickReplyButtonContainer7,user_email:this.$MessengerBotsQuickReplyButtonContainer8,user_phone_number:this.$MessengerBotsQuickReplyButtonContainer8},x={record_audio:this.$MessengerBotsQuickReplyButtonContainer9},y=w[t.content_type],z=x[t.content_type],A=null;if(t.content_type==="open_camera"&&this.state.camDialogOpen)A=this.props.quickCamOriginLocation===c("MessengerQuickCamOrigins").MESSENGER?this.$MessengerBotsQuickReplyButtonContainer10():this.$MessengerBotsQuickReplyButtonContainer11();else if(t.content_type==="record_audio"&&this.state.voiceDialogOpen)A=c("React").createElement(c("MessengerContextualDialog.react"),{contextRef:function(){return this.$MessengerBotsQuickReplyButtonContainer2}.bind(this),shown:this.state.voiceDialogOpen,onToggle:this.$MessengerBotsQuickReplyButtonContainer12,onBlur:this.$MessengerBotsQuickReplyButtonContainer13},c("React").createElement(c("LoadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),{onCancel:this.$MessengerBotsQuickReplyButtonContainer13,onStopAndGetVoiceClip:this.$MessengerBotsQuickReplyButtonContainer14}),loader:q,placeholder:c("React").createElement("div",{style:{padding:"30px",textAlign:"center"}},c("React").createElement(c("MessengerSpinner.react"),{color:"grey"}))}));var B=null;switch(t.content_type){case"user_email":B=u;break;case"user_phone_number":B=v;break;default:break}return c("React").createElement("div",{className:"_4yx8"},c("React").createElement(c("MessengerBotsQuickReplyButton.react"),{isMessengerAdPreview:this.props.isMessengerAdPreview,onClick:y,onMouseDown:z,option:t,className:this.props.className,ref:function(C){this.$MessengerBotsQuickReplyButtonContainer2=C}.bind(this),userData:B}),A)};r.prototype.$MessengerBotsQuickReplyButtonContainer10=function(){var s=window.innerWidth/3;return c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("div",{style:{padding:"30px",textAlign:"center"}},c("React").createElement(c("MessengerSpinner.react"),null)),bootloadLoader:c("JSResource")("MessengerDialog.react").__setRef("MessengerBotsQuickReplyButtonContainer.react"),overflow:"hidden",shown:this.state.camDialogOpen,onBlur:this.$MessengerBotsQuickReplyButtonContainer15,onToggle:this.$MessengerBotsQuickReplyButtonContainer16,width:400>s?400:s},c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("div",{style:{padding:"30px",textAlign:"center"}},c("React").createElement(c("MessengerSpinner.react"),null)),bootloadLoader:c("JSResource")("MessengerQuickCamDialog.react").__setRef("MessengerBotsQuickReplyButtonContainer.react"),location:this.props.quickCamOriginLocation,onShown:function(t){this.$MessengerBotsQuickReplyButtonContainer16(true)}.bind(this),onHidden:this.$MessengerBotsQuickReplyButtonContainer15,onEscKeyDown:this.$MessengerBotsQuickReplyButtonContainer15,shown:this.state.camDialogOpen,threadID:this.props.threadID,viewer:this.props.viewer}))};r.prototype.$MessengerBotsQuickReplyButtonContainer11=function(){var s=window.innerWidth/3;return c("React").createElement(c("XUIDialog.react"),{label:i._("Take a photo"),overflow:"hidden",shown:this.state.camDialogOpen,onBlur:this.$MessengerBotsQuickReplyButtonContainer15,hideOnEscape:true,onToggle:this.$MessengerBotsQuickReplyButtonContainer16,width:400>s?400:s},c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("div",{style:{padding:"30px",textAlign:"center"}},c("React").createElement(c("XUISpinner.react"),null)),bootloadLoader:c("JSResource")("MessengerQuickCamDialog.react").__setRef("MessengerBotsQuickReplyButtonContainer.react"),location:this.props.quickCamOriginLocation,onShown:function(t){this.$MessengerBotsQuickReplyButtonContainer16(true)}.bind(this),onHidden:this.$MessengerBotsQuickReplyButtonContainer15,onEscKeyDown:this.$MessengerBotsQuickReplyButtonContainer15,shown:this.state.camDialogOpen,threadID:this.props.threadID,viewer:this.props.viewer}))};r.propTypes={className:o.string,index:o.number.isRequired,onVoiceClipCreate:o.func,option:o.object.isRequired,threadID:o.string.isRequired,quickCamOriginLocation:o.oneOf(c("MessengerQuickCamOrigins").getValues()).isRequired,viewer:o.string.isRequired,messageId:o.string.isRequired,pageId:o.string.isRequired,isMessengerAdPreview:o.bool,isSponsored:o.bool,viewerEmail:o.string,viewerPhone:o.string};f.exports=r}),null);
__d("MessengerBotsQuickReplyButtonList.react",["cx","AdsArrowedCarouselEnhanced.react","MessengerEnvironment","MessengerBotsQuickReplyButtonContainer.react","MessengerBotsWebTypedLogger","MessengerQuickCamOrigins","MNBotsLoggerEvents","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.componentDidMount=function(){new(c("MessengerBotsWebTypedLogger"))().setEvent(c("MNBotsLoggerEvents").BOT_COMPOSER_QUICK_REPLY_DISPLAYED).setPageID(this.props.pageId).log()};l.prototype.render=function(){return c("React").createElement(c("AdsArrowedCarouselEnhanced.react"),null,this.$MessengerBotsQuickReplyButtonList1())};l.prototype.$MessengerBotsQuickReplyButtonList1=function(){var m=this.props.options,n=c("MessengerEnvironment").messengerui;return m.map(function(o,p){return c("React").createElement("div",{className:(n?"_1nl7":"")+(!n?" _1nl8":""),key:p},c("React").createElement(c("MessengerBotsQuickReplyButtonContainer.react"),{option:o,onVoiceClipCreate:this.props.onVoiceClipCreate,threadID:this.props.threadID,index:p,viewer:this.props.viewer,quickCamOriginLocation:this.props.quickCamOriginLocation,messageId:this.props.messageId,pageId:this.props.pageId,isMessengerAdPreview:this.props.isMessengerAdPreview,isSponsored:this.props.isSponsored,viewerEmail:this.props.viewerEmail,viewerPhone:this.props.viewerPhone}))}.bind(this))};function l(){i.apply(this,arguments)}l.propTypes={options:k.array.isRequired,onVoiceClipCreate:k.func,threadID:k.string.isRequired,quickCamOriginLocation:k.oneOf(c("MessengerQuickCamOrigins").getValues()).isRequired,viewer:k.string.isRequired,messageId:k.string.isRequired,pageId:k.string.isRequired,isMessengerAdPreview:k.bool,isSponsored:k.bool,viewerEmail:k.string,viewerPhone:k.string};f.exports=l}),null);