if (self.CavalryLogger) { CavalryLogger.start_js(["ck2np"]); }

__d("MessengerThreadInfoPanel.react",["cx","fbt","Bootloader","BootloadOnRender.react","CurrentUser","immutable","ImmutableObject","JSResource","LazyComponent.react","Link.react","MercuryAttachment","MercuryIDs","MercuryMessageStore","MercuryThreadInfo","MessageThreadAssociatedObjectUtils","MessengerAddToConversationDialogReact.bs","MessengerAdminGroupUtils","MessengerConfig","MessengerContactAdapters","MessengerDialogs.bs","MessengerDomIDs.bs","MessengerInfoPanelAssociatedObjectSection.react","MessengerInfoPanelGroupSection.react","MessengerInfoPanelNameSectionReact.bs","MessengerInfoPanelPeopleSection.react","MessengerInfoPanelSectionReact.bs","MessengerInfoPanelThreadOptionsContainerReact.bs","MessengerInfoPanelThreadStatsContainerReact.bs","MessengerInfoPanelWorkContextContainerReact.bs","MessengerSharedFilesContainer.react","MessengerSharedLinksContainer.react","MessengerSharedLinksContainerRoute","MessengerSharedPhotosReact.bs","MercuryBlockedParticipants.bs","React","RelayFBEnvironment","RelayModern","react-relay/classic/container/RelayRootContainer","SubscriptionsHandler","WorkModeConfig","gkx","idx","MarketplaceWWWFeatureGating","MessengerThreadInfoPanelSharedFilesQuery.graphql"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l,m=c("MessengerAddToConversationDialogReact.bs").jsComponent,n=c("MessengerDomIDs.bs").ids,o=c("MessengerInfoPanelNameSectionReact.bs").jsComponent,p=c("MessengerInfoPanelSectionReact.bs").jsComponent,q=c("MessengerInfoPanelThreadOptionsContainerReact.bs").jsComponent,r=c("MessengerInfoPanelThreadStatsContainerReact.bs").jsComponent,s=c("MessengerInfoPanelWorkContextContainerReact.bs").jsComponent,t=c("MessengerSharedPhotosReact.bs").jsComponent,u=c("MercuryBlockedParticipants.bs").get(),v=c("RelayModern").QueryRenderer,w=c("RelayModern").graphql,x=c("React").PropTypes;k=babelHelpers.inherits(y,c("React").PureComponent);l=k&&k.prototype;function y(){__p&&__p();var z,A;for(var B=arguments.length,C=Array(B),D=0;D<B;D++)C[D]=arguments[D];return A=(z=l.constructor).call.apply(z,[this].concat(C)),this.$MessengerThreadInfoPanel2=undefined,this.$MessengerThreadInfoPanel3=false,this.state={sharedFilesSection:null,sharedLinksSection:null},this.$MessengerThreadInfoPanel13=function(){this.$MessengerThreadInfoPanel3=false}.bind(this),this.$MessengerThreadInfoPanel16=function(E,event){this.props.onContactSelect(c("MessengerContactAdapters").fromMercuryParticipant(E))}.bind(this),this.$MessengerThreadInfoPanel15=function(E,F){this.props.onContactAction(E,c("MessengerContactAdapters").fromMercuryParticipant(F))}.bind(this),this.$MessengerThreadInfoPanel14=function(event){event.preventDefault();c("MessengerDialogs.bs").showDialog(function(){return c("React").createElement(m,{thread:this.props.thread,viewer:this.props.viewer})}.bind(this))}.bind(this),A}y.prototype.componentWillMount=function(){this.subscribeStoreUpdate(this.props.thread.thread_id)};y.prototype.componentWillReceiveProps=function(z){if(z.thread.thread_id!==this.props.thread.thread_id||z.photosSectionCollapsed!==this.props.photosSectionCollapsed||z.filesSectionCollapsed!==this.props.filesSectionCollapsed||z.linksSectionCollapsed!==this.props.linksSectionCollapsed){this.$MessengerThreadInfoPanel2&&this.$MessengerThreadInfoPanel2.release();this.subscribeStoreUpdate(z.thread.thread_id);this.$MessengerThreadInfoPanel3=true;setTimeout(function(){return this.setState({sharedFilesSection:this.$MessengerThreadInfoPanel4(true),sharedLinksSection:this.$MessengerThreadInfoPanel5(true)})}.bind(this),1e3)}};y.prototype.subscribeStoreUpdate=function(z){__p&&__p();this.$MessengerThreadInfoPanel1=new(c("MercuryMessageStore"))(z);this.$MessengerThreadInfoPanel2=new(c("SubscriptionsHandler"))();this.$MessengerThreadInfoPanel2.addSubscriptions(this.$MessengerThreadInfoPanel1.subscribe(function(A){__p&&__p();if(A.messages.length<1)return;var B=A.eventType==c("MercuryMessageStore").MESSAGES_RECEIVED,C=A.eventType==c("MercuryMessageStore").MESSAGES_CHANGED,D=A.messages[A.messages.length-1];if(!B&&!C)return;if(D.has_attachment&&D.attachments.length>0){var E=D.attachments.find(function(F){return c("MercuryAttachment").isPhotoAttachment(F)||c("MercuryAttachment").isVideoAttachment(F)});this.$MessengerThreadInfoPanel3=true;if(E)setTimeout(function(){return this.setState({sharedFilesSection:this.$MessengerThreadInfoPanel4(true)})}.bind(this),1e3)}if(D.attachments&&D.attachments.length>0){this.$MessengerThreadInfoPanel3=true;setTimeout(function(){return this.setState({sharedLinksSection:this.$MessengerThreadInfoPanel5(true)})}.bind(this),1e3)}}.bind(this)))};y.prototype.componentWillUnmount=function(){this.$MessengerThreadInfoPanel2&&this.$MessengerThreadInfoPanel2.release()};y.prototype.componentDidUpdate=function(){if(!this.$MessengerThreadInfoPanel3)this.setState({sharedFilesSection:null,sharedLinksSection:null})};y.prototype.render=function(){var z=this.props,A=z.viewer,B=z.thread,C=c("MercuryIDs").getParticipantIDFromUserID(A),D=B.participants&&B.participants.indexOf(C)!==-1,E=this.$MessengerThreadInfoPanel3?this.state.sharedFilesSection:this.$MessengerThreadInfoPanel4(false),F=this.$MessengerThreadInfoPanel3?this.state.sharedLinksSection:this.$MessengerThreadInfoPanel5(false),G=u.isMessageBlocked(B);return c("React").createElement("div",{className:"_3tkv",id:n.THREAD_INFO_PANEL},c("React").createElement("h3",{className:"accessible_elem"},i._("Conversation Information")),c("React").createElement(o,{contact:this.props.contact,isUnread:this.props.isUnread,isUserActive:this.props.isUserActive,isBlocked:G,lastActive:this.props.lastActive,onArchive:this.props.onArchive,onDelete:this.props.onDelete,onLeaveGroup:this.props.onLeaveGroup,onMarkRead:this.props.onMarkRead,onMarkSpam:this.props.onMarkSpam,onMarkUnread:this.props.onMarkUnread,onMute:this.props.onMute,onThreadNameChange:this.props.onThreadNameChange,onThreadPhotoChange:this.props.onThreadPhotoChange,onUnmute:this.props.onUnmute,onIgnore:this.props.onIgnore,onBlock:this.props.onBlock,onUnblock:this.props.onUnblock,showIgnoreGroup:c("gkx")("AT4mycXtTvfXJMAqrd_BSmI0_EEB-8pOs_AaNI2VArui1ThGLeffrrAudIg_2uctK6Ji6Zom3olu5BpcCU5_nD4U"),showBlock:this.props.showBlock,participants:this.props.participants,platform:this.props.platform,showLeaveGroup:this.props.showLeaveGroup,showReport:this.props.showReport,thread:this.props.thread,viewer:this.props.viewer}),this.$MessengerThreadInfoPanel6(),this.$MessengerThreadInfoPanel7(),this.$MessengerThreadInfoPanel8(),c("React").createElement(q,{isCollapsed:this.props.threadOptionsSectionCollapsed,participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer,onToggle:this.props.onThreadOptionsSectionToggle}),this.$MessengerThreadInfoPanel9(),c("MessengerAdminGroupUtils").canSeeGroupOptions(D,B,A)?this.$MessengerThreadInfoPanel10():null,this.props.thread.is_canonical?this.$MessengerThreadInfoPanel11():this.$MessengerThreadInfoPanel12(),F,E,c("React").createElement(t,{getIsScrolledToBottom:this.props.getIsScrolledToBottom,getScrollableHeight:this.props.getScrollableHeight,isCollapsed:this.props.photosSectionCollapsed,onToggle:this.props.onPhotosSectionToggle,threadID:B.thread_id,threadFBID:B.thread_fbid,viewer:this.props.viewer}))};y.prototype.$MessengerThreadInfoPanel5=function(z){if(!c("gkx")("AT67ptDj-ZaeW3Tyo9vbms2vYK1iy8t_jMuVqoEuGQXOqT3WIH9DEYXNBElJniUDVETCVboaIbfUes068dlrYLZO"))return null;var A=new(c("MessengerSharedLinksContainerRoute"))({threadFBID:this.props.thread.thread_fbid});return c("React").createElement(c("react-relay/classic/container/RelayRootContainer"),{Component:c("MessengerSharedLinksContainer.react"),renderLoading:function B(){return null},route:A,forceFetch:z,renderFetched:function(B){return c("React").createElement(c("MessengerSharedLinksContainer.react"),babelHelpers["extends"]({},B,{customColor:this.props.thread.custom_color,clearForceFetch:this.$MessengerThreadInfoPanel13,getIsScrolledToBottom:this.props.getIsScrolledToBottom,getScrollableHeight:this.props.getScrollableHeight,isCollapsed:this.props.linksSectionCollapsed,threadFBID:this.props.thread.thread_fbid,onToggle:this.props.onLinksSectionToggle}))}.bind(this)})};y.prototype.$MessengerThreadInfoPanel6=function(){var z=c("MessageThreadAssociatedObjectUtils").shouldRender(this.props.thread.associated_object);if(!z)return null;return c("React").createElement(c("MessengerInfoPanelAssociatedObjectSection.react"),{isCollapsed:this.props.associatedObjectSectionCollapsed,onToggle:this.props.onAssociatedObjectSectionToggle,customColor:this.props.thread.custom_color,associatedObject:this.props.thread.associated_object})};y.prototype.$MessengerThreadInfoPanel8=function(){var z,A,B,C,D=(z=this.props.thread)!=null?z.marketplace_thread_data:z,E=(A=D)!=null?A.for_sale_item:A,F=(B=D)!=null?B.buyer_fbid:B,G=(C=D)!=null?C.seller_fbid:C;if(!E||!F||!G)return null;var H=c("MarketplaceWWWFeatureGating").marketplaceWWWMessengerBanner;return H?c("React").createElement(c("BootloadOnRender.react"),{loader:c("JSResource")("MarketplaceMessengerContextBanner.react").__setRef("MessengerThreadInfoPanel.react"),placeholder:c("React").createElement("div",null),component:c("React").createElement(c("LazyComponent.react"),{buyerID:F,forSaleItem:E,renderLocation:"messenger",sellerID:G})}):null};y.prototype.$MessengerThreadInfoPanel10=function(){return c("React").createElement(c("MessengerInfoPanelGroupSection.react"),{isOptionsCollapsed:this.props.groupOptionsSectionCollapsed,onOptionsToggle:this.props.onGroupOptionsSectionToggle,isApprovalsCollapsed:this.props.groupOptionsApprovalsSectionCollapsed,onApprovalToggle:this.props.onGroupApprovalOptionsSectionToggle,onToggle:this.props.onThreadOptionsSectionToggle,participants:this.props.participants,viewer:this.props.viewer,thread:this.props.thread})};y.prototype.$MessengerThreadInfoPanel7=function(){var z=this.props.contact;if(!c("CurrentUser").isWorkUser()||!z||!z.href||!c("gkx")("AT4U12g3_bcwn6ufLpU4OEUYc1kFcjBGcKNGLrZ6ojdDQcQXRWXqnapmNxWOT3hrOPJ53IJ8NqlKsl875YQK2FZ5")||c("WorkModeConfig").hide_email_address||z.type!=="user")return null;return c("React").createElement(s,{isCollapsed:this.props.threadStatsSectionCollapsed,thread:this.props.thread,onToggle:this.props.onThreadStatsSectionToggle,href:z.href})};y.prototype.$MessengerThreadInfoPanel9=function(){if(c("gkx")("AT5MgEQ2BX9EoYtDecXLd_H4PLe0dbm4AiKTfhaDnASNmsTXiM4GP6YZuoppqRP_9-lprti-5sdwbLUtVdnK9mMY"))return c("React").createElement(r,{isCollapsed:this.props.threadStatsSectionCollapsed,thread:this.props.thread,viewer:this.props.viewer,onToggle:this.props.onThreadStatsSectionToggle});return null};y.prototype.$MessengerThreadInfoPanel4=function(z){var A=this.props,B=A.filesSectionCollapsed,C=A.thread;return c("React").createElement(v,{cacheConfig:{force:z},environment:c("RelayFBEnvironment"),query:j||(j=function j(){return c("MessengerThreadInfoPanelSharedFilesQuery.graphql")}),variables:{threadFBID:C.thread_fbid},render:function(D){var E=D.error,F=D.props;if(E)return null;if(!F)return null;return c("React").createElement(c("MessengerSharedFilesContainer.react"),{threadFBID:C.thread_fbid,sharedFiles:F.message_thread,isCollapsed:B,onToggle:this.props.onFilesSectionToggle})}.bind(this)})};y.prototype.$MessengerThreadInfoPanel12=function(){return c("React").createElement(c("MessengerInfoPanelPeopleSection.react"),{canViewerReply:c("MercuryThreadInfo").canReply(this.props.thread),contactAdapter:c("MessengerContactAdapters").fromMercuryParticipant,isCollapsed:this.props.peopleSectionCollapsed,isViewerSubscribed:this.props.thread.is_subscribed,onAddPeopleClick:this.$MessengerThreadInfoPanel14,onContactAction:this.$MessengerThreadInfoPanel15,onContactSelect:this.$MessengerThreadInfoPanel16,onToggle:this.props.onPeopleSectionToggle,participants:this.props.participants,viewer:this.props.viewer,adminIds:this.props.thread.admin_ids,thread:this.props.thread})};y.prototype.$MessengerThreadInfoPanel11=function(){var z=this.props.contact;if(!z||!z.href||z.fbid.toString()===c("MessengerConfig").MoneyPennyFBID)return null;if(c("CurrentUser").isWorkUser()&&c("gkx")("AT4U12g3_bcwn6ufLpU4OEUYc1kFcjBGcKNGLrZ6ojdDQcQXRWXqnapmNxWOT3hrOPJ53IJ8NqlKsl875YQK2FZ5"))return null;var A=z.href,B=c("CurrentUser").isWorkUser()?"Workplace":"Facebook",C=z.type==="page"?i._("{productName} Page",[i.param("productName",B)]):i._("{productName} Profile",[i.param("productName",B)]),D=c("CurrentUser").isWorkUser()?this.$MessengerThreadInfoPanel17:function(){};return c("React").createElement(p,{customColor:this.props.thread.custom_color,title:C},c("React").createElement("div",{className:"_4v0l"},c("React").createElement(c("Link.react"),{onClick:D,className:"_3oh-",style:{color:this.props.thread.custom_color},href:A,target:"_blank"},A.replace("www.",""))))};y.prototype.$MessengerThreadInfoPanel17=function(){c("Bootloader").loadModules(["WorkChatActivityTypedLogger","WorkChatActivityEvent"],function(z,A){var B=new z();B.setEvent(A.INFO_PANEL_PROFILE_LINK_CLICK).log()},"MessengerThreadInfoPanel.react")};y.propTypes={contact:x.instanceOf(c("ImmutableObject")),getIsScrolledToBottom:x.func.isRequired,getScrollableHeight:x.func.isRequired,isUserActive:x.bool.isRequired,isBusinessEnabled:x.bool,lastActive:x.string,linksSectionCollapsed:x.bool.isRequired,onArchive:x.func.isRequired,onContactAction:x.func.isRequired,onContactSelect:x.func.isRequired,onDelete:x.func.isRequired,onLeaveGroup:x.func,onLinksSectionToggle:x.func.isRequired,onMarkRead:x.func.isRequired,onMarkSpam:x.func.isRequired,onMarkUnread:x.func.isRequired,onMute:x.func.isRequired,onAssociatedObjectSectionToggle:x.func.isRequired,onPeopleSectionToggle:x.func.isRequired,onPhotosSectionToggle:x.func.isRequired,onFilesSectionToggle:x.func.isRequired,onThreadOptionsSectionToggle:x.func.isRequired,onThreadStatsSectionToggle:x.func.isRequired,onGroupOptionsSectionToggle:x.func.isRequired,onGroupApprovalOptionsSectionToggle:x.func.isRequired,onThreadNameChange:x.func.isRequired,onThreadPhotoChange:x.func.isRequired,onUnmute:x.func.isRequired,onIgnore:x.func.isRequired,onBlock:x.func.isRequired,onUnblock:x.func.isRequired,showBlock:x.bool.isRequired,participants:x.instanceOf(c("immutable").Map).isRequired,associatedObjectSectionCollapsed:x.bool.isRequired,peopleSectionCollapsed:x.bool.isRequired,photosSectionCollapsed:x.bool.isRequired,filesSectionCollapsed:x.bool.isRequired,platform:x.string,prevIsScrolledToBottom:x.bool.isRequired,prevScrollableHeight:x.number.isRequired,showLeaveGroup:x.bool.isRequired,thread:x.instanceOf(c("ImmutableObject")).isRequired,threadOptionsSectionCollapsed:x.bool.isRequired,threadStatsSectionCollapsed:x.bool.isRequired,groupOptionsSectionCollapsed:x.bool.isRequired,groupOptionsApprovalsSectionCollapsed:x.bool.isRequired,viewer:x.string.isRequired};f.exports=y}),null);