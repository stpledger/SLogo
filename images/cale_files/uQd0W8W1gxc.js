if (self.CavalryLogger) { CavalryLogger.start_js(["AF3\/U"]); }

__d("MessengerMount",["cx","Bootloader","CSS","ChannelConnection","ChannelManager","CurrentUser","HotLikeSound","InstantGamesGateKeepers","MercuryWorkContextInformation","MercuryWorkTopGroupThreads","MercuryBlockedParticipants.bs","MercuryDelayedRoger","MercuryDeliveryState","MercuryOrderedThreadlist","MercuryParticipants","MercuryServerPayloadPreprocessor","MercurySyncEnvironment","MercuryThreads","MercuryThreadIDMap","MercuryUnreadState","MercuryUnseenState","MessengerReact.bs","MessengerActions","MessengerAsyncWrapper","MessengerDialogs.bs","MessengerAttributionTagsStore","MessengerComposerActions","MessengerBrowserAlerts","MessengerComposerStore","MessengerConfig","MessengerEnvironment","MessengerInitialDataTransformer.bs","MessengerMDotMeReferralStore","MessengerPage","MessengerRTCMessageHandler","MessengerSettingsStore","MessengerSearchConfirmationDialogReact.bs","MessengerStateStore","MessengerThreadSearchStore","MessengerURIListener","MessengerURIConstants","MessengerURISerializer","MessengerView","MNPlatformTagsDataManager","React","ReactDOM","URI","gkx","goURI","OrderedFriendsList","PageHooks"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("MercuryDelayedRoger").get(),j=c("MessengerReact.bs").jsComponent,k=c("MessengerSearchConfirmationDialogReact.bs").jsComponent;c("OrderedFriendsList");c("PageHooks");c("ChannelManager").startChannelManager();var l={initStoresAndListeners:m,dispatchInitialData:p,mount:function r(s,t){__p&&__p();c("MessengerEnvironment").setMessengerUI(true);c("MessengerPage").emit(c("MessengerPage").Events.JS_LOADED);var u=c("CurrentUser").getID(),v=c("CurrentUser").isWorkUser();m(u);p(u,t);c("MessengerPage").emit(c("MessengerPage").Events.DATA_INITIALIZED);var w=document.documentElement;if(w)c("CSS").addClass(w,"_51l0");if(document.body){var x=document.body;c("CSS").addClass(x,"_z4_");if(c("gkx")("AT5IxpGyr_e_BP0vwmwI97KQ-06AcFx3p0KzLo4XrwvEx9LNsTw4zcllfYjyjNwTeWsixCIsFObxMrpOJ6dAPYDP05CJEInbznXmAUIc5U8EEA"))c("CSS").addClass(x,"_1bui");if(c("MessengerConfig").SFFontEnabled)c("CSS").addClass(x,"__6g");if(c("MessengerConfig").SegoeUIDisabled)c("CSS").addClass(x,"_2por");if(c("MessengerEnvironment").facebookdotcom)c("CSS").addClass(x,"_mvg")}c("HotLikeSound").setCheckSoundEnabledFunc(function(){return c("MessengerSettingsStore").getSettings().sound_enabled});c("ReactDOM").render(c("React").createElement(c("MessengerAsyncWrapper"),null,c("React").createElement(j,{employeeData:t.employeeData,facebookNotificationTokens:t.facebookNotificationTokens,showWorkchatUpsellBanner:t.showWorkchatUpsellBanner,promotionData:t.promotionData,isFirstRedirect:!c("gkx")("AT71LRcbgltkBEoVFCCCdNV29c5_0WezosqmKxl4WEXk8XQNpOgP_oLFicsbGWor0e-3lTCNH9el3cQIDbyD2Ry3"),viewer:u,isWorkUser:v,onMount:function y(){return q(t)}})),s)}};function m(r){n(r);o(r)}function n(r){__p&&__p();i;c("MercuryDeliveryState").getForFBID(r);c("MercuryOrderedThreadlist").getForFBID(r);c("MercuryParticipants");c("MercuryBlockedParticipants.bs").getForFBID(r);c("MercuryThreads").getForFBID(r);c("MercuryUnreadState").getForFBID(r);c("MercuryUnseenState").getForFBID(r);if(c("gkx")("AT58O0ueTgrNywfhkMH9fYHs8_paoL8Uj3nAzEseDtJbi75rIYW1Jld0CDq2Sj1iPDsNcWsScyu5Jv7kTxxdRT_i"))c("MercuryWorkTopGroupThreads").getForFBID(r);if(c("gkx")("AT4U12g3_bcwn6ufLpU4OEUYc1kFcjBGcKNGLrZ6ojdDQcQXRWXqnapmNxWOT3hrOPJ53IJ8NqlKsl875YQK2FZ5"))c("MercuryWorkContextInformation").getForFBID(r);c("MessengerAttributionTagsStore");c("MessengerComposerStore");c("MessengerMDotMeReferralStore");c("MessengerSettingsStore");c("MessengerStateStore");c("MessengerThreadSearchStore").getForFBID(r)}function o(r){c("MessengerURIListener").start();c("MercurySyncEnvironment").setUp();c("MessengerBrowserAlerts").init(r);c("MessengerRTCMessageHandler").init();c("ChannelConnection")}function p(r,s){__p&&__p();var t,u=c("MercuryServerPayloadPreprocessor").getForFBID(r),v=s.lastReadThreadKey;if(s.graphqlPayload){var w=c("MessengerInitialDataTransformer.bs").transform(s.graphqlPayload),x=w[0];v=w[1];x.message_blocked_ids=s.mercuryPayload.message_blocked_ids;x.message_ignored_ids=s.mercuryPayload.message_ignored_ids;u.handleUpdate(x)}else u.handleUpdate(s.mercuryPayload);var y=new(c("URI"))(window.location.href),z=c("MessengerURISerializer").deserialize(y);if(z.query)(function(){var C=z.masterView===c("MessengerView").MASTER.SEARCH,D=z.query;z.query=null;z.masterView=c("MessengerView").MASTER.RECENT;c("MessengerDialogs.bs").showDialog(function(){return c("React").createElement(k,{term:D,onSearch:function E(){c("MessengerDialogs.bs").removeAllDialogs();C?c("MessengerActions").changeQueryAll(D):c("MessengerActions").changeQuery(D)}})})})();c("goURI")(c("MessengerURISerializer").serialize(z),false,true);if(y.getPath().match(c("MessengerURIConstants").COMPOSE_SUBPATH+"/?$"))return;if(z.masterView===c("MessengerView").MASTER.PAYMENT)return;c("MessengerActions").changeMDotMeReferral(s.mDotMeReferral,s.mDotMeReferralThreadKey);var A=c("MercuryThreadIDMap").get(),B=A.getClientIDFromServerIDNow(v);if(B){c("MessengerComposerActions").exitComposeState();c("MessengerActions").selectThread(B)}else if(y.getPath()==="/")c("MessengerActions").changeDetailView(c("MessengerView").DETAIL.COMPOSE);c("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread(s.messagingSource,s.mDotMeReferralThreadKey&&s.mDotMeReferralThreadKey.toString())}function q(r){__p&&__p();c("MessengerPage").emit(c("MessengerPage").Events.APP_MOUNTED);if(r.gameData&&r.gameData.gameID&&c("InstantGamesGateKeepers").messenger_dot_com_shareable_link_open_game)c("Bootloader").loadModules(["MessengerGamesQuicksilverPlayerContainer.react","InstantGameContextType","QuicksilverSources"],function(s,t,u){var v=null,w=t.SOLO;if(r.gameData.contextSourceID){v=r.gameData.contextSourceID;w=t.THREAD}c("MessengerDialogs.bs").showDialog(function(){return c("React").createElement(s,{initialContextSourceID:v,initialContextType:w,onHide:function x(){return c("MessengerDialogs.bs").removeAllDialogs()},initialGameID:r.gameData.gameID,initialSource:u.M_ME_LINK,sourceID:null})})},"MessengerMount")}f.exports=l}),null);