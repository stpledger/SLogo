if (self.CavalryLogger) { CavalryLogger.start_js(["MCl4\/"]); }

__d("MessengerMessageCountReact.bs",["cx","fbt","bs_block","bs_curry","React","Number.bs","ReasonReact.bs","bs_js_primitive","MercuryThreadInformer"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact.bs").reducerComponentWithRetainedProps("MessengerMessageCountReact");function k(n,o){if(n==null)return 0;else return c("bs_js_primitive").undefined_to_opt(n[o])}function l(n,o,p){__p&&__p();return[j[0],j[1],j[2],function(q){var r=+(q[2][0]===n.thread_id);if(r!==0)return q[1];else return n.message_count},j[4],j[5],j[6],j[7],j[8],function(q){return c("React").createElement("div",{className:"_60oa"},i._("Messages Sent:"),c("React").createElement("div",{className:"_397l"},c("ReasonReact.bs").element(0,0,c("Number.bs").make(q[1],[]))))},function(){return n.message_count},[n.thread_id],function(q,r){__p&&__p();if(q.tag){var s=k(q[0],n.thread_id);if(s&&s[0].source==="client_delete_messages")return c("bs_block").__(0,[r-1|0]);else return 0}else{var t=k(q[0],n.thread_id);if(t)return c("bs_block").__(0,[r+t[0].length|0]);else return 0}},function(q){__p&&__p();var r=c("MercuryThreadInformer").getForFBID(o);return[[function(){return r.subscribe("messages-received",function(p,s){return c("bs_curry")._1(q[3],c("bs_block").__(0,[s]))})},function(s){s.unsubscribe();return 0}],[[function(){return r.subscribe("messages-reordered",function(p,s){return c("bs_curry")._1(q[3],c("bs_block").__(1,[s]))})},function(s){s.unsubscribe();return 0}],0]]},j[14]]}var m=c("ReasonReact.bs").wrapReasonForJs(j,function(n){return l(n.thread,n.viewer,[])});g.component=j;g.getThreadPayloadFromInform=k;g.make=l;g.jsComponent=m}),null);