if (self.CavalryLogger) { CavalryLogger.start_js(["QOngA"]); }

__d("MessengerPlatformCTAShareMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLMutationBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1517047784999597"};j.getQueryID=function(){"use strict";return"156612948261507"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("MessengerTextWithEmojiInputReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerTextWithEmojiInput.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o){return c("ReasonReact.bs").wrapJsForReason(c("MessengerTextWithEmojiInput.react"),{className:c("bs_js_null_undefined").from_opt(i),onReturn:c("bs_js_null_undefined").from_opt(j),maxLength:c("bs_js_null_undefined").from_opt(k),onChange:c("bs_js_null_undefined").from_opt(l),placeholder:c("bs_js_null_undefined").from_opt(m),initialValue:c("bs_js_null_undefined").from_opt(n)},o)}g.make=h}),null);
__d("MessengerPreviewDialogReact.bs",["ix","cx","fbt","bs_block","bs_curry","React","immutable","ImageReact.bs","bs_js_boolean","CurrentUser","fbglyph","ReasonReact.bs","AsyncRequest","bs_js_primitive","MercuryLocalIDs","MessengerDialogReact.bs","MessengerSpinnerReact.bs","MessengerDialogBodyReact.bs","MessengerComposeViewHeaderReact.bs","MessengerTextWithEmojiInputReact.bs","MessengerPlatformCTAShareMutationWebGraphQLMutation"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=j._("Send"),l=c("ReasonReact.bs").reducerComponent("messengerPreviewDialogReact");function m(q,r){r[1][3][0]=q==null?0:[q];return 0}function n(q,r,s){new(c("AsyncRequest"))(q.getURI(r)).setMethod("POST").setHandler(s).send();return 0}function o(q,r,s,t,u,v,w,x,y,z){__p&&__p();var A=function A(D){if(D)return 0;else return c("bs_curry")._1(w,0)},B=function B(z,D){__p&&__p();var E=D[3],F=D[1],G=function G(K){if(K.payload.success)return c("bs_curry")._1(E,2);else return c("bs_curry")._1(E,c("bs_block").__(2,[c("bs_js_primitive").null_undefined_to_opt(K.payload.error)]))},H={},I=F[3][0],J=I?[I[0].getValue()]:0;F[0].forEach(function(K,z,L){H[String(c("MercuryLocalIDs").generateOfflineThreadingID(undefined))]=K.getUniqueID();return true});n(c("MessengerPlatformCTAShareMutationWebGraphQLMutation"),{cta_id:v,message_id:x,thread_ids:H,message_text:String(J)},G);c("bs_curry")._1(D[3],1);return A(false)},C=l.slice();C[9]=function(D){__p&&__p();var E=D[1],F=E[2],G=E[1],H;if(F!==0)H=c("React").createElement("div",undefined,c("ReasonReact.bs").element(0,0,c("MessengerSpinnerReact.bs").make(0,0,0,[])),c("React").createElement("span",{className:"_3b2o _3-99"},j._("Sending...")));else if(G){var I=h("141787");H=c("React").createElement("div",{className:"_3b2o"},c("ReasonReact.bs").element(0,0,c("ImageReact.bs").make(0,0,[I],0,0,0,0,[])),c("React").createElement("span",{className:"_3-99"},G[0]))}else H=null;return c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Dialog[0](0,A,0,[y],0,0,[560],[c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Header[0](0,0,c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Title[0](0,[q])))),c("ReasonReact.bs").element(0,0,c("MessengerDialogBodyReact.bs").make(["_3b2u"],[c("React").createElement("div",{className:"_3b2s"},c("ReasonReact.bs").element(0,[c("bs_curry")._1(D[0],m)],c("MessengerTextWithEmojiInputReact.bs").make(["_3b2r"],0,0,0,["Write a message..."],0,[]))),c("React").createElement("div",{className:"_3b2s"},c("React").createElement("div",{className:"_3b2p"},c("ReasonReact.bs").element(0,0,c("ImageReact.bs").make(0,0,[t],0,0,0,0,[]))),c("React").createElement("div",{className:"_3b2v"},c("React").createElement("div",{className:"_3b2y _3b30"},r),c("React").createElement("div",{className:"_3b30"},s),c("React").createElement("div",{className:"_3b2_ _3b2w"},u))),c("ReasonReact.bs").element(0,0,c("MessengerComposeViewHeaderReact.bs").make(["_wl1"],0,[function(){return c("bs_curry")._1(D[3],0)}],function(J){return c("bs_curry")._1(D[3],c("bs_block").__(0,[J]))},function(J){return c("bs_curry")._1(D[3],c("bs_block").__(1,[J]))},function(){return 0},E[0],c("CurrentUser").getID(),+c("CurrentUser").isWorkUser(),[]))])),c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Footer[0](0,[H],[c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").CancelButton[0](0,[])),c("ReasonReact.bs").element(0,0,c("MessengerDialogReact.bs").Button[0]([2],[k],[+E[0].isEmpty()||E[2]],0,[c("bs_curry")._1(D[0],B)],[0],0,0,[]))]))]))};C[10]=function(){return[c("immutable").List([]),0,0,[0]]};C[12]=function(D){__p&&__p();if(typeof D==="number")switch(D){case 0:return function(H){return c("bs_block").__(0,[[c("immutable").List([]),H[1],H[2],H[3]]])};case 1:return function(H){return c("bs_block").__(0,[[H[0],0,1,H[3]]])};case 2:c("bs_curry")._1(w,0);return function(){return c("bs_block").__(0,[[c("immutable").List([]),0,0,[0]]])}}else switch(D.tag|0){case 0:var E=D[0];return function(H){return c("bs_block").__(0,[[H[0].push(E),H[1],H[2],H[3]]])};case 1:var F=D[0];return function(H){return c("bs_block").__(0,[[H[0].filter(function(I){return c("bs_js_boolean").to_js_boolean(+(I!==F))}),H[1],H[2],H[3]]])};case 2:var G=D[0];return function(H){return c("bs_block").__(0,[[H[0],G,0,H[3]]])}}};return C}var p=c("ReasonReact.bs").wrapReasonForJs(l,function(q){return o(q.title,q.preview_title,q.preview_subtitle,q.image_url,q.target_display,q.attachmentID,q.onClose,q.messageID,+q.shown,[])});g.sendButtonLabel=k;g.component=l;g.setInput=m;g.sendData=n;g.make=o;g.jsComponent=p}),null);