if (self.CavalryLogger) { CavalryLogger.start_js(["duwuA"]); }

__d("NotifType",[],(function a(b,c,d,e,f,g){f.exports={LIKE:"like",OPEN_GRAPH_ACTION_LIKE:"open_graph_action_like",LIKE_TAGGED:"like_tagged",PAGE_FAN:"page_fan",IG_MEDIA_LIKE:"ig_media_like",FEEDBACK_REACTION_GENERIC:"feedback_reaction_generic",FEEDBACK_REACTION_GENERIC_TAGGED:"feedback_reaction_generic_tagged",MESSENGER_REACTIONS:"messenger_reactions",MARKETPLACE_RECEIVED_RATING:"marketplace_received_rating",MARKETPLACE_RECEIVED_RATING_COMPLETED:"marketplace_received_rating_completed"}}),null);
__d("asyncSleep",["regeneratorRuntime","Promise"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){return c("regeneratorRuntime").async(function j(k){while(1)switch(k.prev=k.next){case 0:k.next=2;return c("regeneratorRuntime").awrap(new(c("Promise"))(function(l){return setTimeout(l,i)}));case 2:case"end":return k.stop()}},null,this)}f.exports=h}),null);
__d("NullBusinessID",[],(function a(b,c,d,e,f,g){f.exports="personal-business"}),null);
__d("BusinessConf",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({DOMAIN:"business",WWW_DOMAIN:"www",HOSTNAME:"business.facebook.com",BIZ_ID_PARAM_NAME:"business_id",BIZ_ID_AUTOMATICALLY_ATTACHED_API_PARAM_NAME:"__business_id",LABEL_ID_PARAM_NAME:"project_id",ACCOUNT_ID_PARAM_NAME:"act",ACCOUNT_ID_PARAM_NAME_LONG:"account_id",ACCOUNT_IDS_PARAM_NAME_LONG:"account_ids",ACCOUNT_ID_CATEGORY_NAME:"cat",PAGE_ID_PARAM_NAME:"id",PAGE_ADMIN_SELECTED_KEY:"sk",PRODUCT_CATALOG_ID_PARAM_NAME:"catalog_id",PRODUCT_FEED_ID_PARAM_NAME:"feed_id",LEGACY_ADS_MANAGER_PREFIX:"/ads/manage/",CAMPAIGN_MANAGER_PREFIX:"/ads/manager/",SAM_PREFIX:"/ads/management/",AUDIENCE_INSIGHTS_PREFIX:"/ads/audience-insights/",SHOW_ADD_PRODUCT_FEED_DIALOG:"add_feed",SHOW_SPLASH_PARAM_NAME:"splash",SHOW_GRAY_MIGRATE_COMPLETE_SPLASH_PARAM_NAME:"migrate",COMMENT_ID_PARAM_NAME:"comment_id",NAV_SOURCE_PARAM_NAME:"nav_source",OFFLINE_DATASET_PARAM_NAME:"dataset_id",WHITELISTED_URI_CLASS:"bizOK",BIZ_HOME_FAVORITE_UPSELL:"biz_home_favorite_upsell",OPT_OUT_KEY:"do_not_redirect_to_biz_site",GRAY_MIGRATE_KEY:"tried_to_migrate_from_gray_account",HIDE_OPT_OUT_KEY:"hide_opt_out",HIDE_HOME_V3_SPLASH_KEY:"hide_home_v3_splash",CAKE_NUX_IS_OPTED_OUT:"1",DPA_TD_WELCOME_NUX_KEY:"dpa_td_welcome_nux",HIDE_AD_ACCOUNT_MSG_PANEL:"hide_ad_account_msg_panel",HIDE_AD_ACCOUNT_FAV_UPSELL:"hide_ad_account_fav_upsell",HIDE_PAGE_FAV_UPSELL:"hide_page_fav_upsell",DPA_TD_WELCOME_NUX_ID:3918,OPT_OUT_EXPIRE:259200})}),null);
__d("BizSiteIdentifier.brands",["BusinessConf","NullBusinessID","URI"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("NullBusinessID"),i={isBizSite:function j(){return c("URI").getRequestURI(false).getSubdomain()===c("BusinessConf").DOMAIN},getBusinessID:function j(){return c("URI").getRequestURI(false).getQueryData()[c("BusinessConf").BIZ_ID_PARAM_NAME]},createBusinessURL:function j(k,l){if(!l||l===h)return new(c("URI"))(k).setSubdomain("www");var m=new(c("URI"))(k).setSubdomain(c("BusinessConf").DOMAIN);if(i.isBizSite())m.setDomain(c("URI").getRequestURI(false).getDomain());var n=l||i.getBusinessID();m.addQueryData(c("BusinessConf").BIZ_ID_PARAM_NAME,n);return m}};f.exports=i}),null);
__d("BusinessURI.brands",["BizSiteIdentifier.brands","BusinessConf","isFacebookURI","URI"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("URI"));i=h&&h.prototype;function j(l,m){"use strict";__p&&__p();i.constructor.call(this,l);if(c("BizSiteIdentifier.brands").isBizSite()){var n=m||c("BizSiteIdentifier.brands").getBusinessID();if(n)this.addQueryData(c("BusinessConf").BIZ_ID_PARAM_NAME,n);if(!this.$BusinessURI1(this.getSubdomain()))this.setSubdomain(c("BusinessConf").DOMAIN)}if(!c("isFacebookURI")(this))throw new Error("Business URI must be FB URI");return this}j.prototype.$BusinessURI1=function(l){"use strict";return l==="developers"};var k=function k(l,m){return new j(l,m)};k.BusinessURI=j;f.exports=k}),null);
__d("CrossWindowEventEmitter",["CacheStorage","EventEmitter","FBJSON"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("EventEmitter"));i=h&&h.prototype;function j(k){__p&&__p();i.constructor.call(this);this.$CrossWindowEventEmitter2=k;this.$CrossWindowEventEmitter1=new(c("CacheStorage"))("localstorage",k+":");this.$CrossWindowEventEmitter1.addValueChangeCallback(function(l,m,n){var event=l.split(":")[1],o=void 0;try{o=c("FBJSON").parse(n)}catch(p){o=undefined}if(o&&o.__v){var q;(q=i.emit).call.apply(q,[this,event].concat(o.__v))}}.bind(this))}j.prototype.emit=function(k){var l;for(var m=arguments.length,n=Array(m>1?m-1:0),o=1;o<m;o++)n[o-1]=arguments[o];this.emitRemote.apply(this,[k].concat(n));(l=i.emit).call.apply(l,[this,k].concat(n))};j.prototype.emitRemote=function(k){for(var l=arguments.length,m=Array(l>1?l-1:0),n=1;n<l;n++)m[n-1]=arguments[n];this.$CrossWindowEventEmitter1.set(k,m)};f.exports=j}),null);
__d("FavIcon",["DOM"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j;function k(){var m=c("DOM").scry(document.head,"link");if(m)m.forEach(function(n){if(n.rel.indexOf("icon")!=-1||n.rel.indexOf("shortcut icon")!=-1)c("DOM").remove(n)})}var l={isToggledResource:function m(){if(j&&h.href===j)return true;return false},set:function m(n){if(h)c("DOM").remove(h);k();h=c("DOM").create("link",{type:"image/x-icon",rel:"icon",href:n});c("DOM").appendContent(c("DOM").find(document,"head"),h)},setToggleResources:function m(n,o){h=document.querySelector('link[rel*=icon][href*=".ico"]');if(!h)return;i=o||h.href;j=n},toggle:function m(){if(!h||!j)return;if(h.href===i){this.set(j);return}this.set(i)},toggleSet:function m(n){if(!h||!j||!i)return;var o=n?j:i;if(h.href!==o)this.set(o)}};f.exports=l}),null);
__d("NotificationCounter",["Arbiter","CrossWindowEventEmitter","CurrentUser","DocumentTitle","FavIcon","JSLogger","MercuryConfig","MessengerEnvironment"],(function a(b,c,d,e,f,g){__p&&__p();var h=new(c("CrossWindowEventEmitter"))("JewelBase"),i={messages:0,notifications:0,requests:0},j={init:function k(){c("Arbiter").subscribe("update_title",this._handleUpdate.bind(this));c("Arbiter").subscribe("jewel/count-updated",this._handleCountUpdate.bind(this));h.addListener("count-updated",function(l){this._handleCountUpdate("",l)}.bind(this))},getCount:function k(){__p&&__p();var l=0;for(var m in i){var n=Number(i[m]);if(typeof i[m]=="string"&&isNaN(n))return i[m];if(isNaN(n)||n<0){c("JSLogger").create("jewels").error("bad_count",{jewel:m,count:i[m]});continue}l+=n}return l},updateTitle:function k(){if(c("MessengerEnvironment").messengerui)return;var l=this.getCount(),m=c("DocumentTitle").get();m=l?"("+l+") "+m:m;c("DocumentTitle").set(m,true)},_handleCountUpdate:function k(l,m){i[m.jewel]=m.count;this.updateTitle()},_handleUpdate:function k(l,m){this.updateTitle()}};f.exports=j}),null);
__d("NotificationJewelFunnelLoggingConstants",[],(function a(b,c,d,e,f,g){"use strict";f.exports={FUNNEL_LOGGING_NAME:"WWW_NOTIFICATION_FUNNEL",FUNNEL_LOGGING_EVENT:{FETCH_NOTIFICATIONS:"fetch_notifications",OPEN_JEWEL:"open_jewel",CLOSE_JEWEL:"close_jewel",MOUSE_OVER_ON_JEWEL:"mouse_over_on_jewel",SCROLL_TO_FETCH:"scroll_to_fetch",FETCH_NEXT_SET:"fetch_next_set",CLEAR_BADGE_COUNT:"clear_badge_count"}}}),null);
__d("NotificationSeenFilter",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ALL:"all",SEEN_ONLY:"seen_only",UNSEEN_ONLY:"unseen_only",READ_ONLY:"read_only",UNREAD_ONLY:"unread_only",SEEN_BUT_UNREAD_ONLY:"seen_unread_only"})}),null);
__d("objectValues",[],(function a(b,c,d,e,f,g){function h(i){return Object.values(i)}f.exports=h}),null);
__d("NotificationSeenState",["NotificationConstants","NotificationSeenFilter","NotificationUpdates","createObjectFrom","ifRequired","objectValues"],(function a(b,c,d,e,f,g){__p&&__p();var h=1,i=2,j=0,k=h,l=3,m=c("NotificationConstants").PayloadSourceType.INITIAL_LOAD,n={SEEN_AND_READ:l,SEEN_BUT_UNREAD:k,UNSEEN_AND_UNREAD:j},o={};c("ifRequired")("NotificationStore",function(t){var u=t.getAllForAllEndpoints(),v=c("objectValues")(u),w=q(v);Object.keys(w).forEach(function(x){var y=w[x];o[x]=y})});function p(t){__p&&__p();var u=[],v=[];Object.keys(t).forEach(function(w){__p&&__p();var x=t[w],y=o[w];o[w]=x;if(y===undefined){u.push(w);v.push(w);return}var z=y^x;if(z&h)u.push(w);if(z&i)v.push(w)});u.length&&c("NotificationUpdates").didUpdateSeenState(u);v.length&&c("NotificationUpdates").didUpdateReadState(v)}c("NotificationUpdates").subscribe("update-notifications",function(t,u){var v=u.nodes;if(!v||!v.length)return;var w=u.payloadsource,x=c("NotificationConstants").PayloadSourceType,y=w==x.ENDPOINT,z=v.filter(function(B){var C=B.alert_id;return!y||o[C]===undefined}),A=q(z);p(A)});function q(t){var u={};t.forEach(function(v){if(v.seen_state)u[v.alert_id]=n[v.seen_state]});return u}c("NotificationUpdates").subscribe("update-seen",function(t,u){__p&&__p();if(!u.seenState)return;var v=[],w={};Object.keys(u.seenState).forEach(function(y){if(!u.seenState||!u.seenState[y]){v.push(y);return}var z=o[y];if(z!==undefined)w[y]=z|h});var x=babelHelpers["extends"]({},c("createObjectFrom")(v,j),w);p(x)});c("NotificationUpdates").subscribe("update-read",function(t,u){__p&&__p();if(!u.readState)return;var v=[],w={};Object.keys(u.readState).forEach(function(y){__p&&__p();if(!u.readState)return;var z=u.readState[y];if(z){v.push(y);return}var A=o[y];if(A!==undefined)w[y]=A&~i;else if(u.payloadsource==m)w[y]=k});var x=babelHelpers["extends"]({},c("createObjectFrom")(v,l),w);p(x)});function r(t){var u=o[t];return u}var s={isRead:function t(u){return r(u)===l},isSeen:function t(u){return r(u)!==j},getUnseenCount:function t(){return s.getUnseenIDs().length},getUnseenIDs:function t(){return Object.keys(o).filter(function(u){return o[u]===j})},getUnreadCount:function t(){return s.getUnreadIDs().length},getUnreadIDs:function t(){return Object.keys(o).filter(function(u){return o[u]!==l})},validateFilter:function t(u,v){switch(v){case c("NotificationSeenFilter").SEEN_ONLY:return s.isSeen(u);case c("NotificationSeenFilter").UNSEEN_ONLY:return!s.isSeen(u);case c("NotificationSeenFilter").READ_ONLY:return s.isRead(u);case c("NotificationSeenFilter").UNREAD_ONLY:return!s.isRead(u);case c("NotificationSeenFilter").SEEN_BUT_UNREAD_ONLY:return s.isSeen(u)&&!s.isRead(u);default:return true}}};f.exports=s}),6);
__d("NotificationEndpointState",["BusinessUserConf","KeyedCallbackManager","RangedCallbackManager","flatMapArray","objectValues","react-relay/classic/query/stableStringify"],(function a(b,c,d,e,f,g){__p&&__p();var h={AdsUnifiedNavNotificationsPayloadPagelet:"AdsUnifiedNavNotificationsPayloadPagelet",BusinessManagerNotificationsPayloadPagelet:"BusinessManagerNotificationsPayloadPagelet",WebNotificationsPayloadPagelet:"WebNotificationsPayloadPagelet","/notifications/client/ads_unified_nav/":"AdsUnifiedNavNotificationsPayloadPagelet","/notifications/client/business_manager/":"BusinessManagerNotificationsPayloadPagelet","/ajax/notifications/client/get.php":c("BusinessUserConf").businessUserID?"BusinessManagerNotificationsPayloadPagelet":"WebNotificationsPayloadPagelet"};i.getInstance=function(j){"use strict";var k=j.classification!=null?j.classification:"_",l=j.readness!=null?j.readness:"_",m="(c)"+k+"(s)"+l,n=i.$NotificationEndpointState1[j.endpointControllerName];if(n==null)i.$NotificationEndpointState1[j.endpointControllerName]=n={};if(n[m]==null)n[m]=new i(j);return n[m]};i.getAllInstances=function(j){"use strict";__p&&__p();var k=void 0;if(j!=null)k=[j];else k=Object.keys(i.$NotificationEndpointState1);return c("flatMapArray")(k,function(j){var l=i.$NotificationEndpointState1[j];if(l==null)return[];else return c("objectValues")(l)})};function i(j){__p&&__p();var k=j.businessUserID,l=j.classification,m=j.endpointControllerName,n=j.readness;"use strict";this.notifications=new(c("KeyedCallbackManager"))();this.businessUserID=k!=null?k:c("BusinessUserConf").businessUserID;this.classification=l;this.endpointControllerName=m;this.readness=n;var o=function o(p){var q=this.notifications.getResource(p);return q.creation_time};this.order=new(c("RangedCallbackManager"))(o.bind(this),function(p,q){return q-p});this.graphQLPageInfo=null}i.prototype.getConfig=function(){"use strict";return{businessUserID:this.businessUserID,classification:this.classification,endpointControllerName:this.endpointControllerName,readness:this.readness}};i.prototype.getHash=function(){"use strict";return c("react-relay/classic/query/stableStringify")(this.getConfig())};i.prototype.getRequestParams=function(j){"use strict";var k=Math.max(0,j-this.order.getAllResources().length);return{businessUserID:this.businessUserID,classification:this.classification!=null?this.classification.toLowerCase():undefined,cursor:this.graphQLPageInfo&&this.graphQLPageInfo.end_cursor,filter:this.readness==null?undefined:this.readness==="SEEN_AND_READ"?"read":"unread",readness:this.readness,length:k}};i.prototype.getStreamingTransportPageletName=function(){"use strict";return h[this.endpointControllerName]||this.endpointControllerName};i.$NotificationEndpointState1={};f.exports=i}),null);
__d("once",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j){var k=i(j);for(var l in j)if(Object.prototype.hasOwnProperty.call(j,l))k[l]=j[l];return k}function i(j){var k=j,l=void 0,m=function m(){if(k){for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];l=k.apply(this,o);k=null}return l};return m}f.exports=h}),null);
__d("NotificationServerTransport",["invariant","DOM","UIPagelet","compactArray","ifRequired","objectValues","once","promiseFinally","setImmediateAcrossTransitions","uniqueID"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i={},j={},k={},l={};function m(w){if(l[w]==null){l[w]=c("DOM").create("div",{"class":"hidden_elem",id:w});c("DOM").appendContent(document.documentElement,l[w])}return l[w].id}function n(w){return w.reduce(function(x,y){var z=y.targetNumToLoad;return Math.max(x,z)},0)}function o(w,x){__p&&__p();var y=x.getHash(),z=i[y];if(!z||z.clientRequestID!==w)return;delete i[y];z.calls.forEach(function(A){var B=A.onCompleted;if(B)B()});if(j[y]!=null)q(x)}function p(w,x,y){__p&&__p();var z=x.getHash(),A=i[z];if(!A||A.clientRequestID!==w)return;delete i[z];A.calls.forEach(function(B){var C=B.onError;if(C)C(y)});if(j[z]!=null)q(x)}function q(w){__p&&__p();var x=w.getHash();if(k[x]!=null)return;k[x]=c("setImmediateAcrossTransitions")(function(){__p&&__p();delete k[x];var y=c("uniqueID")(),z=j[x];delete j[x];if(z==null)return;var A=n(z),B=w.getRequestParams(A);if(B.length<=0){z.forEach(function(F){var G=F.onCompleted;if(G)G()});return}var C=function C(F){p(y,w,F.toError())},D=w.getStreamingTransportPageletName();D!=null||h(0);var E=c("UIPagelet").loadFromEndpoint(D,m(y),babelHelpers["extends"]({},B,{clientRequestID:y}),{allowIrrelevantRequests:true,automatic:false,crossPage:true,errorHandler:C,jsNonblock:true,transportErrorHandler:C,usePipe:true,usePostRequest:false});i[x]={calls:z,clientRequestID:y,endpointState:w,transport:E}})}var r={makeRequest:function w(x,y,z){__p&&__p();var A=z.onChunkResponse,B=z.onCompleted,C=z.onError,D=x.getHash(),E={onChunkResponse:A,onCompleted:B,onError:C,targetNumToLoad:y};v(D);var F=i[D],G=F?n(F.calls)>=y:false;if(G){F!=null||h(0);F.calls.push(E)}else{if(j[D]==null)j[D]=[];j[D].push(E);if(F==null)q(x)}return{remove:function H(){__p&&__p();var F=i[D];if(F!=null){var I=F.calls.indexOf(E);if(I!==-1)F.calls.splice(I,1);if(F.calls.length===0){if(F.transport)F.transport.abandon();delete i[D];if(j[D]!=null)q(x)}}var J=j[D];if(J!=null){var K=J.indexOf(E);if(K!==-1)J.splice(K,1)}}}},handleResponseChunk:function w(x,y){var z=s(x);z.forEach(function(A){A(y)})},handleRequestCompleted:function w(x){var y=c("objectValues")(i).find(function(y){return y&&y.clientRequestID===x});y||h(0);o(x,y.endpointState)},handleRequestFailed:function w(x,y){__p&&__p();var z=c("objectValues")(i).find(function(z){return z&&z.clientRequestID===x});z||h(0);var A=z.endpointState.getHash(),B=i[A];if(!B||B.clientRequestID!==x)return;delete i[A];B.calls.forEach(function(C){var D=C.onError;if(D)D(new Error(y))});if(j[A]!=null)q(z.endpointState)}};function s(w){__p&&__p();var x=Object.keys(i).find(function(B){var C=i[B];return C&&C.clientRequestID===w}),y=x&&i[x];if(!y||!x)return[];var z=y.calls,A=j[x];if(A)z=z.concat(A);return c("compactArray")(z.map(function(B){return B.onChunkResponse}))}function t(w,x){__p&&__p();var y=x.targetNumToLoad,z=x.endpointState,A=x.payloadPromise;if(i[w]!=null)return;var B=c("uniqueID")(),C={calls:[{targetNumToLoad:y}],clientRequestID:B,endpointState:z};i[w]=C;A||h(0);var D=A.then(function(E){var F=s(B);F.forEach(function(G){G(E)})});c("promiseFinally")(D,function(){o(B,z)}).done()}var u=function u(w){c("ifRequired")("NotificationEagerLoader",function(x){var y=x.eagerlyLoadedData;if(y.hasData&&w===y.endpointState.getHash())t(w,y)})},v=c("once")(u);f.exports=r}),null);
__d("createObjectBy",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j){var k={};for(var l=0;l<i.length;l++){var m=i[l],n=j(m,l,i);k[n]=m}return k}f.exports=h}),null);
__d("distinctArrayBy",["Set"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j){return j}function i(j){__p&&__p();var k=arguments.length<=1||arguments[1]===undefined?h:arguments[1],l=[],m=new(c("Set"))();for(var n=j,o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q,s=k(r);if(!m.has(s)){m.add(s);l.push(r)}}return l}f.exports=i}),null);
__d("sortBy",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){__p&&__p();var k=i.map(function(l,m){return{index:m,sortValue:j(l),value:l}});k.sort(function(l,m){var n=l.sortValue,o=m.sortValue;if(n>o)return 1;if(n<o)return-1;return l.index-m.index});return k.map(function(l){return l.value})}f.exports=h}),null);
__d("NotificationStore",["ErrorUtils","NotificationConstants","NotificationEndpointState","NotificationServerTransport","NotificationUpdates","createObjectBy","distinctArrayBy","flatMapArray","objectValues","sortBy","sprintf"],(function a(b,c,d,e,f,g){__p&&__p();var h={};function i(n,o,p){return n.page_info!=null&&o.classification==p.classification&&o.endpointControllerName===p.endpointControllerName&&o.readness==p.readness}function j(n,o){__p&&__p();var p={};c("NotificationEndpointState").getAllInstances(o.endpointControllerName).forEach(function(q){__p&&__p();var r=void 0;if(i(n,q,o)){q.graphQLPageInfo=n.page_info;r=n}else if(n.payloadsource===c("NotificationConstants").PayloadSourceType.SYNC&&o.endpointControllerName==="WebNotificationsPayloadPagelet"&&q.classification==null&&q.readness==null)r=n;else r=babelHelpers["extends"]({},n,{nodes:n.nodes?n.nodes.filter(function(t){return k(t,q)}):undefined});if(r.nodes&&r.nodes.length>0){var s=l(q,r);if(s!=null)s.forEach(function(t){p[t]=true})}});c("NotificationUpdates").didUpdateNotifications(Object.keys(p))}function k(n,o){__p&&__p();var p=o.classification,q=o.notifications,r=o.order,s=o.readness,t=r.getAllResources();t.length===0;if(t.length>0){var u=t[0],v=q.getResource(u);if(v.creation_time>=n.creation_time)return false}if(p&&(!n.classifications||!n.classifications.includes(p)))return false;if(s&&s==="SEEN_AND_READ"!==(n.seen_state==="SEEN_AND_READ"))return false;return true}function l(n,o){__p&&__p();var p=[],q={};if(o.nodes&&o.nodes.length>0)o.nodes.forEach(function(r){var s=r.alert_id,t=n.notifications.getResource(s);if(!t||t.creation_time<r.creation_time){p.push(s);q[s]=r}});n.notifications.addResourcesAndExecute(q);n.order.addResources(p);return p}c("NotificationUpdates").subscribe("update-notifications",function(n,o){if(o.payloadsource!==c("NotificationConstants").PayloadSourceType.ENDPOINT)j(o,{endpointControllerName:o.endpoint!=null?o.endpoint:"WebNotificationsPayloadPagelet"})});var m={getNotifications:function n(o,p,q){__p&&__p();var r=c("NotificationEndpointState").getInstance(p),s=r.notifications,t=r.order,u=void 0,v=t.executeOrEnqueue(0,o,function(D){if(q){u=s.executeOrEnqueue(D,q);var E=s.getUnavailableResources(u);if(E.length>0)c("ErrorUtils").reportError(new Error(c("sprintf")("The range for this endpoint contained notification IDs for which we have no payload (Notification IDs: `%s`. Endpoint config: `%s`).",JSON.stringify(E),JSON.stringify(r.getConfig()))))}});function w(){t.unsubscribe(v);if(u)s.unsubscribe(u)}if(t.getUnavailableResources(v).length===0)return{remove:w};if(!m.canFetchMore(p)){t.forceRunCallbacks();return{remove:w}}var x=r.getHash();if(h[x]==null)h[x]=1;else h[x]++;function y(){h[x]--;if(h[x]===0)t.forceRunCallbacks()}function z(D){if(!(D&&D.nodes))return;c("NotificationUpdates").handleUpdate(c("NotificationConstants").PayloadSourceType.ENDPOINT,D,p.readness,p.classification);j(babelHelpers["extends"]({},D,{payloadsource:c("NotificationConstants").PayloadSourceType.ENDPOINT}),p)}function A(){h[x]--;if(h[x]===0)t.forceRunCallbacks()}var B=c("NotificationServerTransport").makeRequest(r,o,{onChunkResponse:z,onCompleted:A,onError:y}),C=B.remove;return{remove:function D(){w();C()}}},getNotification:function n(o){var p=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],q=p.classification,r=p.endpointControllerName,s=r===undefined?"WebNotificationsPayloadPagelet":r,t=p.readness,u=c("NotificationEndpointState").getInstance({classification:q,endpointControllerName:s,readness:t}),v=u.notifications;return v.getResource(o)},getAllForAllEndpoints:function n(){var o=c("NotificationEndpointState").getAllInstances(),p=c("flatMapArray")(o,function(t){var u=this.getAll(t.getConfig());return c("objectValues")(u)}.bind(this)),q=c("sortBy")(p,function(t){return t.creation_time}),r=q.reverse(),s=c("distinctArrayBy")(r,function(t){return t.alert_id});return c("createObjectBy")(s,function(t){return t.alert_id})},getAll:function n(o){var p=c("NotificationEndpointState").getInstance(o),q=p.notifications,r=p.order,s={};r.getAllResources().forEach(function(t){var u=q.getResource(t);if(u==null)c("ErrorUtils").reportError(new Error(c("sprintf")("The range for this endpoint contained a notification ID for which we have no payload (Notification ID: `%s`. Endpoint config: `%s`).",t,JSON.stringify(o))));else s[t]=u});return s},getCount:function n(o){var p=c("NotificationEndpointState").getInstance(o);return p.order.getAllResources().length},canFetchMore:function n(o){var p=c("NotificationEndpointState").getInstance(o),q=p.graphQLPageInfo;return!q||!Object.prototype.hasOwnProperty.call(q,"has_next_page")||q.has_next_page},registerEndpoint:function n(o){c("NotificationEndpointState").getInstance(o)}};m.registerEndpoint({endpointControllerName:"WebNotificationsPayloadPagelet"});f.exports=m}),null);
__d("XWorkHubController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/notifications/hub/{?tab}/{?alert_id}/",{ref:{type:"String"},tab:{type:"String"},selected_key:{type:"String",defaultValue:"app_401904056828201"},alert_id:{type:"String"},mini:{type:"Bool",defaultValue:false}})}),null);
__d("isInFocusMode",["WorkFocusModeController"],(function a(b,c,d,e,f,g){var h=c("WorkFocusModeController").WorkFocusMode,i=function i(j){return!!(h&&h.currentViewerInFocusMode(j))};f.exports=i}),null);
__d("NotificationJewelController",["Arbiter","Bootloader","Event","EventProfiler","FunnelLogger","NotificationConstants","NotificationCounter","NotificationJewelFunnelLoggingConstants","NotificationSeenState","NotificationStore","NotificationUpdates","XWorkHubController","createObjectFrom","curry","gkx","isInFocusMode","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("NotificationConstants").PayloadSourceType,i=c("NotificationJewelFunnelLoggingConstants").FUNNEL_LOGGING_NAME,j=c("NotificationJewelFunnelLoggingConstants").FUNNEL_LOGGING_EVENT,k=0,l=false;function m(o){var p=c("isInFocusMode")(),q=c("NotificationSeenState").getUnseenCount();c("Arbiter").inform("jewel/count-updated",{jewel:o,count:p?0:q,animation:!p&&l&&q>0?"heart":"none"},c("Arbiter").BEHAVIOR_STATE)}function n(o,p){"use strict";__p&&__p();var q=p.badgeAnimationData,r=p.endPoint,s=p.list,t=p.startTime,u=p.unseenNotifs;if(r)c("NotificationStore").registerEndpoint({endpointControllerName:r});c("NotificationCounter").init();var v=false,w=null,x=c("Event").listen(o.getRoot(),"mouseover",function(){if(!v){v=true;w=c("EventProfiler").notifyRunningEagerInteraction(["Notifications_Jewel_Button"],"click")}c("FunnelLogger").startFunnel(i);x&&x.remove();x=null;s.open();c("FunnelLogger").appendAction(i,j.MOUSE_OVER_ON_JEWEL)}),y=null;c("Event").listen(o.getRoot(),"mouseover",function(){y=c("setTimeoutAcrossTransitions")(function(){c("Bootloader").loadModules(["QE2Logger"],function(C){C.logExposureForUser("www_jewel_tooltip_experiment")},"NotificationJewelController");y=null},500)});c("Event").listen(o.getRoot(),"mouseout",function(){if(y)clearTimeout(y)});if(c("gkx")("AT7qvBGeY3qi4kzGsfSdDBRKoyiGhUCE2HY_OLm4gW_hIR5XTy870z-6Bh0Vp_U80-c"))c("Event").listen(o.getButton(),"click",function(C){if(C.metaKey||C.ctrlKey){var D=c("XWorkHubController").getURIBuilder().setString("ref","jewel").setString("tab","all").getURI();window.open(D,"notification_hub_tab_identifier")}});var z=false,A=o.subscribe("opened",function(){if(!z){z=true;c("EventProfiler").tagCurrentActiveInteractionsAs("FirstNotificationJewelOpen")}if(w)w();A&&A.unsubscribe();A=null;s.open()}),B=s.pause.bind(s);o.subscribe("opened",function(){setTimeout(B,0);m(o.name);c("Bootloader").loadModules(["NotificationVPVs"],function(C){return C.clearImpressions()},"NotificationJewelController");c("Arbiter").inform("notificationJewel/opened")});o.subscribe("closed",function(){s.unpause();m(o.name);c("Arbiter").inform("notificationJewel/closed")});c("NotificationUpdates").subscribe("seen-state-updated",c("curry")(m,o.name));if(q){if(q.logWithQEUniverse)c("Bootloader").loadModules(["QE2Logger"],function(C){return C.logExposureForUser(q.logWithQEUniverse)},"NotificationJewelController");if(q.injectWithAnimation)c("Bootloader").loadModules(["RelationshipDelightsBadge"],function(C){return C.inject(o,q.injectWithAnimation)},"NotificationJewelController");c("Bootloader").loadModules(["RelationshipDelightUtils"],function(C){__p&&__p();c("NotificationUpdates").subscribe("update-notifications",function(D,E){var F=E.nodes,G=E.payloadsource,H=F&&F.length?F.filter(C.shouldHeartBadge):null;if(H&&H.length){l=true;if(q.injectWithAnimation)if(G===h.INITIAL_LOAD||G===h.INITIAL_SEND)C.logBadgeAnimation(H[0].alert_id)}else l=false});if(q.logWithAlertID)C.logBadgeAnimation(q.logWithAlertID)},"NotificationJewelController")}c("NotificationUpdates").handleUpdate(h.INITIAL_LOAD,{seenState:c("createObjectFrom")(u,k)});m(o.name)}f.exports=n}),null);
__d("NotificationGenericBucket",["NotificationSeenState"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){this.$NotificationGenericBucket2=[];this.$NotificationGenericBucket3={};this.$NotificationGenericBucket4={};this.$NotificationGenericBucket7=function(j,k){var l=this.$NotificationGenericBucket4[j],m=this.$NotificationGenericBucket4[k];return Number(m)-Number(l)}.bind(this);this.$NotificationGenericBucket1=i}h.prototype.reset=function(){this.$NotificationGenericBucket2=[];this.$NotificationGenericBucket3={};this.$NotificationGenericBucket4={}};h.prototype.getType=function(){return this.$NotificationGenericBucket1.bucket_type};h.prototype.getTitle=function(){return this.$NotificationGenericBucket1.title};h.prototype.getSortedIDs=function(){return this.$NotificationGenericBucket2.slice()};h.prototype.insertIfEligible=function(i){var j=this.$NotificationGenericBucket5(i);if(!j.eligible)return j;this.$NotificationGenericBucket6(i);return{eligible:true}};h.prototype.remove=function(i){if(!this.$NotificationGenericBucket3[i])return false;delete this.$NotificationGenericBucket3[i];delete this.$NotificationGenericBucket4[i];var j=this.$NotificationGenericBucket2.indexOf(i);j>-1&&this.$NotificationGenericBucket2.splice(j,1);return true};h.prototype.$NotificationGenericBucket6=function(i){__p&&__p();var j=i.alert_id;if(this.$NotificationGenericBucket3[j])return true;this.$NotificationGenericBucket2.push(j);this.$NotificationGenericBucket3[j]=true;var k=this.$NotificationGenericBucket8(this.$NotificationGenericBucket1.sort_key_index);if(k>-1){var l=i.sort_keys?i.sort_keys[k]:null;if(l){this.$NotificationGenericBucket4[j]=l;this.$NotificationGenericBucket9()}}return true};h.prototype.$NotificationGenericBucket9=function(){this.$NotificationGenericBucket2.sort(this.$NotificationGenericBucket7)};h.prototype.$NotificationGenericBucket5=function(i){__p&&__p();if(!this.$NotificationGenericBucket10(i))return{eligible:false,type:"bucket",data:i.eligible_buckets};if(!this.$NotificationGenericBucket11(i))return{eligible:false,type:"exp_time"};if(!this.$NotificationGenericBucket12(i))return{eligible:false,type:"seen_filter"};if(!this.$NotificationGenericBucket13(i))return{eligible:false,type:"max_count"};if(!this.$NotificationGenericBucket14(i))return{eligible:false,type:"seen_evict",data:this.$NotificationGenericBucket15(i)};if(!this.$NotificationGenericBucket16(i))return{eligible:false,type:"read_evict"};return{eligible:true}};h.prototype.$NotificationGenericBucket8=function(i){return Number.isInteger(i)?Number(i):-1};h.prototype.$NotificationGenericBucket10=function(i){if(!i.eligible_buckets)return false;return i.eligible_buckets.includes(this.getType())};h.prototype.$NotificationGenericBucket12=function(i){return c("NotificationSeenState").validateFilter(i.alert_id,this.$NotificationGenericBucket1.seen_filter)};h.prototype.$NotificationGenericBucket11=function(i){var j=this.$NotificationGenericBucket8(this.$NotificationGenericBucket1.min_to_expire);return j===-1?true:Date.now()-i.creation_time<j*60*1e3};h.prototype.$NotificationGenericBucket13=function(i){var j=this.$NotificationGenericBucket8(this.$NotificationGenericBucket1.max_count);return j===-1?true:this.$NotificationGenericBucket2.length<j};h.prototype.$NotificationGenericBucket15=function(i){var j=this.$NotificationGenericBucket8(this.$NotificationGenericBucket1.sec_to_evict_seen);return{secToEvict:j,firstTime:i.first_seen_time||0,currentTime:Date.now()/1e3}};h.prototype.$NotificationGenericBucket17=function(i){var j=this.$NotificationGenericBucket8(this.$NotificationGenericBucket1.sec_to_evict_read);return{secToEvict:j,firstTime:i.first_read_time||0,currentTime:Date.now()/1e3}};h.prototype.$NotificationGenericBucket18=function(i){var j=i.secToEvict,k=i.firstTime,l=i.currentTime;return j===-1||k===0?true:l-k<j};h.prototype.$NotificationGenericBucket14=function(i){return this.$NotificationGenericBucket18(this.$NotificationGenericBucket15(i))};h.prototype.$NotificationGenericBucket16=function(i){return this.$NotificationGenericBucket18(this.$NotificationGenericBucket17(i))};h.prototype.$NotificationGenericBucket19=function(i){return true};f.exports=h}),null);
__d("NotificationBucketStore",["Arbiter","Banzai","JSLogger","NotificationConstants","NotificationGenericBucket","NotificationsBucketList","NotificationStore","NotificationUpdates"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("NotificationConstants").PayloadSourceType,i=[],j={},k={},l=[],m=false,n={},o={},p="notif_jewel_buckets",q=function q(){if(m)return;m=true;c("NotificationsBucketList").buckets.forEach(function(D){D.bucket_type=D.bucket_type.toUpperCase();var E=new(c("NotificationGenericBucket"))(D);i.push(E);j[E.getType()]=E});A()},r=function r(){l=i.map(function(D){return{ids:D.getSortedIDs(),title:D.getTitle()||"",bucketType:D.getType()}})},s=function s(D){__p&&__p();var E=D.alert_id;if(!n[E])n[E]=[];var F=[];for(var G=0,H=i.length;G<H;G++){var I=i[G],J=I.insertIfEligible(D);F.push({bucket:I.getType(),result:J});if(J.eligible){n[E].push(F);u(D,I);return I.getType()}}n[E].push(F);return null},t=function t(D,E){var F="PRIORITY_INBOX";if(!j[F]||E.getType()===F)return;var G=D.alert_id;if(o[G]||D.creation_time>Date.now()/1e3-60*60){var H=n[G],I=H[H.length-1]||[],J={notif_data:{alert_id:D.alert_id.split(":")[1],creation_time:D.creation_time,eligible_buckets:D.eligible_buckets,first_seen_time:D.first_seen_time,notif_type:D.notif_type,seen_state:D.seen_state,sort_keys:D.sort_keys},eviction_data:I,was_live_send:o[G]===true,priority_eviction_reason:I[0]?I[0].result.type:null};c("Banzai").post(p,{event_type:"bucketing_error",data:J})}},u=function u(D,E){k[D.alert_id]=E.getType();t(D,E)},v=function v(D,E){delete k[D.alert_id]},w=function w(D){var E=D.alert_id,F=x(E);if(F){var G=y(F);if(G){G.remove(E);v(D,G)}}s(D)},x=function x(D){return k[D]},y=function y(D){return j[D]},z=function z(){k={};i.forEach(function(D){return D.reset()});n={};r()},A=function A(){var D=c("NotificationStore").getAll({endpointControllerName:"WebNotificationsPayloadPagelet"});B(Object.keys(D).map(function(E){return D[E]}))},B=function B(D){D.forEach(w);r()};c("NotificationUpdates").subscribe("update-notifications",function(D,E){__p&&__p();if(!E.nodes||E.nodes.length===0)return;if(E.payloadsource===h.LIVE_SEND){E.nodes.forEach(function(F){return o[F.alert_id]=true});z();A()}else if(E.nodes){E.nodes.forEach(function(F){return o[F.alert_id]=false});B(E.nodes)}});c("Arbiter").subscribe(c("JSLogger").DUMP_EVENT,function(D,E){E.notifs_bucket_data={bucketInfo:l,data:l.reduce(function(F,E){var G=E.ids.map(function(H){return{id:H,results:n[H]}});return[].concat(F,G)},[])}});q();var C={getBucketListData:function D(){return l},isEmptyBucketListData:function D(){var E=l.reduce(function(F,G){return F+G.ids.length},0);return E===0}};f.exports=C}),null);
__d("NotificationBucketUtils",["JSResource"],(function a(b,c,d,e,f,g){"use strict";var h={getCustomModuleForType:function i(j){switch(j){case"TICKER":return c("JSResource")("NotificationBucketTicker.react").__setRef("NotificationBucketUtils");default:return null}}};f.exports=h}),null);
__d("NotificationHiddenState",["NotificationConstants","NotificationUpdates","isEmpty"],(function a(b,c,d,e,f,g){__p&&__p();var h={};c("NotificationUpdates").subscribe("update-notifications",function(j,k){__p&&__p();var l,m=k.nodes,n=k.payloadsource;if(n===c("NotificationConstants").PayloadSourceType.LIVE_SEND&&m&&m.length)(function(){var o={};m.forEach(function(p){var q=p.alert_id;if(h[q])o[q]=false});if(!c("isEmpty")(o)){h=Object.assign(h,o);c("NotificationUpdates").didUpdateHiddenState(Object.keys(o))}})()});c("NotificationUpdates").subscribe("update-hidden",function(j,k){if(k.hiddenState){var l=k.hiddenState;h=Object.assign(h,l);c("NotificationUpdates").didUpdateHiddenState(Object.keys(l))}});var i={isHidden:function j(k){if(h[k])return h[k];return false}};f.exports=i}),null);
__d("NotificationURI",["BusinessURI.brands","URI","VideoPermalinkURI","isFacebookURI"],(function a(b,c,d,e,f,g){__p&&__p();var h={localize:function i(j){try{j=c("BusinessURI.brands")(j)}catch(k){return j.toString()}var l=j.getSubdomain();return j.getUnqualifiedURI().getQualifiedURI().setSubdomain(l).toString()},snowliftable:function i(j){if(!j)return false;var k=new(c("URI"))(j),l=k.getQueryData();return c("isFacebookURI")(k)&&(c("VideoPermalinkURI").isValid(k)||"fbid"in l)},isVaultSetURI:function i(j){return this._areEquals(j,"/ajax/vault/sharer_preview.php")},isAlbumDraftRecoveryDialogURI:function i(j){return this._areEquals(j,"/ajax/photos/upload/overlay/")},isQuicksilverURI:function i(j){return this._areEquals(j,"/games/quicksilver/spotlight/")},isDirectURI:function i(j){return this._startsWith(j,"/direct/")},isIGAccountCreationURI:function i(j){return this._areEquals(j,"/ads/growth/aymt/instagram/account-creation-dialog/")},_areEquals:function i(j,k){if(!j)return false;var l=new(c("URI"))(j);return c("isFacebookURI")(l)&&l.getPath()===k},_startsWith:function i(j,k){if(!j)return false;var l=new(c("URI"))(j);return c("isFacebookURI")(l)&&l.getPath().startsWith(k)}};f.exports=h}),null);
__d("NotificationAsyncWrapper",["NotificationListConfig","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=void 0;if(c("NotificationListConfig").reactFiberAsyncNotifications)h=c("React").unstable_AsyncMode;else h=function(){__p&&__p();var i,j;i=babelHelpers.inherits(h,c("React").Component);j=i&&i.prototype;h.prototype.render=function(){"use strict";return this.props.children};function h(){"use strict";i.apply(this,arguments)}return h}();f.exports=h}),null);
__d("NotifTestIDs",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({REACT_BLUE_BAR_JEWEL:"react_blue_bar_jewel",NON_REACT_BLUE_BAR_JEWEL:"non_react_blue_bar_jewel",REACT_NOTIF_LIST:"react_notif_list",NOTIF_LIST_ITEM:"notif_list_item",SEE_ALL_LIST:"see_all_list",REACT_NOTIF_JEWEL_FLYOUT:"react_notif_jewel_flyout",NON_REACT_NOTIF_JEWEL_FLYOUT:"non_react_notif_jewel_flyout",CHEVRON:"chevron",REACT_MARK_ALL_AS_READ_LINK:"react_mark_all_as_read_link",NON_REACT_MARK_ALL_AS_READ_LINK:"non_react_mark_all_as_read_link",NOTIFICATION_SOUND_SETTING:"notifiation_sound_setting",NOTIFICATION_SOUND_SETTING_SELECTOR:"notifiation_sound_setting_selector",MESSAGE_SOUND_SETTING:"message_sound_setting",MESSAGE_SOUND_SETTING_SELECTOR:"message_sound_setting_selector",CLOSE_FRIEND_ACTIVITY_SELECTOR:"close_friend_activity_selector",BIRTHDAY_SELECTOR:"birthday_selector",ON_THIS_DAY_SELECTOR:"on_this_day_selector",TAGS_SELECTOR:"tags_selector",LIVE_VIDEO_SELECTOR:"live_video_selector",REACT_BADGE_COUNT_CONTAINER:"react_badge_count_container",NON_REACT_BADGE_COUNT_CONTAINER:"non_react_badge_count_container",BEEPER_LIST:"beeper_list",NON_REACT_SETTING_LINK:"non_react_setting_link",REACT_SETTING_LINK:"react_setting_link",GEOGRAPHIC_SUBSCRIPTION_SELECTOR:"geographic_subscription_selector"})}),null);
__d("NotificationJewelListBucketHeader.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";function i(j){return c("React").createElement("div",{className:"_fyy"},j.title.toUpperCase())}f.exports=i}),null);
__d("NotificationBucketGeneric.react",["cx","NotificationJewelListBucketHeader.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){var l=this.props,m=l.title,n=l.ids,o=l.listRenderer,p=l.startIndex;if(n.length===0)return null;var q=o(n,p);return c("React").createElement("div",{className:"_32hm"},m?c("React").createElement(c("NotificationJewelListBucketHeader.react"),{title:m}):null,c("React").createElement("ul",null,q))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("NotificationBucket.react",["cx","BootloadedComponent.react","NotificationBucketGeneric.react","NotificationBucketUtils","NotificationJewelListBucketHeader.react","React","XUISpinner.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.$NotificationBucket1=function(){var l=this.props.bucket,m=l.bucketType,n=l.title;return c("React").createElement("div",null,c("React").createElement(c("NotificationJewelListBucketHeader.react"),{title:n,bucketType:m}),c("React").createElement(c("XUISpinner.react"),{className:"_1e00"}))};k.prototype.render=function(){var l=this.props,m=l.bucket,n=l.listRenderer,o=l.startIndex,p=m.bucketType,f=c("NotificationBucketUtils").getCustomModuleForType(p);if(!f)return c("React").createElement(c("NotificationBucketGeneric.react"),babelHelpers["extends"]({},m,{listRenderer:n,startIndex:o}));return c("React").createElement(c("BootloadedComponent.react"),babelHelpers["extends"]({bootloadLoader:f,bootloadPlaceholder:this.$NotificationBucket1()},m))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("RelationshipDelightTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:RelationshipDelightLoggerConfig",this.$RelationshipDelightTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:RelationshipDelightLoggerConfig",this.$RelationshipDelightTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$RelationshipDelightTypedLogger1={};return this};h.prototype.updateData=function(j){this.$RelationshipDelightTypedLogger1=babelHelpers["extends"]({},this.$RelationshipDelightTypedLogger1,j);return this};h.prototype.setAlertID=function(j){this.$RelationshipDelightTypedLogger1.alert_id=j;return this};h.prototype.setEvent=function(j){this.$RelationshipDelightTypedLogger1.event=j;return this};h.prototype.setMetadata=function(j){this.$RelationshipDelightTypedLogger1.metadata=j;return this};h.prototype.setVC=function(j){this.$RelationshipDelightTypedLogger1.vc=j;return this};var i={alert_id:true,event:true,metadata:true,vc:true};f.exports=h}),null);
__d("RelationshipDelightUtils",["NotificationRelationshipDelightsConfig","QE2Logger","RelationshipDelightTypedLogger"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={};function i(n){var o=n.eligible_buckets;return!!o&&o.indexOf("SO_NOTIFICATIONS")!==-1}function j(){c("QE2Logger").logExposureForUser(c("NotificationRelationshipDelightsConfig").universeName)}function k(n){var o=c("NotificationRelationshipDelightsConfig").shouldDecorateNotificationWithHearts,p=c("NotificationRelationshipDelightsConfig").shouldLogExposureForNotification;if(i(n)===false)return false;if(p)j();return o===true}function l(n,event,o){var p=event+"-"+n;if(h[p])return;h[p]=true;var q=new(c("RelationshipDelightTypedLogger"))().setEvent(event).setAlertID(n);if(o)q.setMetadata(JSON.stringify(o));q.log()}var m={shouldHeartBadge:function n(o){var p=c("NotificationRelationshipDelightsConfig").shouldDecorateBadgeWithHearts,q=c("NotificationRelationshipDelightsConfig").shouldLogExposureForBadge;if(i(o)===false)return false;if(q)j();return p===true},shouldHeartBeeper:k,shouldHeartNotification:k,logNotificationAnimation:function n(o,p,q){l(o,"notification_animated",{animation:p,rowIndex:q})},logBeeperAnimation:function n(o){l(o,"beeper_animated")},logBadgeAnimation:function n(o){l(o,"badge_animated")}};f.exports=m}),null);
__d("NotificationListDelightUtils",["RelationshipDelightUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=-1,i={canShowHeartDelight:function j(k,l,m){if(l)return false;if(!c("RelationshipDelightUtils").shouldHeartNotification(k))return false;if(h<0||h>m)h=m;return true},getFirstDelightRow:function j(){return h}};f.exports=i}),null);
__d("NotificationListDelights.react",["cx","BootloadedComponent.react","JSResource","NotificationListDelightUtils","NotificationSeenState","React","RelationshipDelightUtils"],(function a(b,c,d,e,f,g,h){"use strict";var i=-1;function j(k){var l=k.rowIndex,m=k.notification,n=m.alert_id,o=c("NotificationListDelightUtils").getFirstDelightRow()===l&&!c("NotificationSeenState").isSeen(n)?1:2;c("RelationshipDelightUtils").logNotificationAnimation(n,o,l);return c("React").createElement("div",{className:"_3u5l _3u5m"},c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("RelationshipDelightsActorAnimation.react").__setRef("NotificationListDelights.react"),animationPhase:o}))}f.exports=j}),null);
__d("XLiveVideoLoadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/live/video/load/",{video_id:{type:"FBID",required:true}})}),null);
__d("NotificationListRendererUtils",["AsyncRequest","Bootloader","NotificationURI","PageTransitions","URI","VideoChainingCaller","XLiveVideoLoadController","idx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=10;function i(event,m){c("Bootloader").loadModules(["FBStoriesLiveNotificationHandler"],function(n){n.renderLiveStory(m)},"NotificationListRendererUtils")}function j(event,m,n){c("Bootloader").loadModules(["TahoeController"],function(o){var p,q=c("NotificationURI").localize(new(c("URI"))(n.url)),r=m.video_channel_caller;o.openFromVideoLink(new(c("URI"))(q),{channelID:m.video_channel_id,caller:r?(p=c("VideoChainingCaller"))!=null?p[r]:p:null})},"NotificationListRendererUtils")}function k(event,m,n){c("Bootloader").loadModules(["VideoChannelHandleLink"],function(o){o.openChannel(m.video_channel_id,m.video_channel_caller,m.video_id);var p=new(c("URI"))(c("NotificationURI").localize(new(c("URI"))(n.url))),q=function q(p){if(p.getQueryData().ref!=="notif_channel")return false;c("PageTransitions").transitionComplete();return true};c("PageTransitions").registerHandler(q,h);c("PageTransitions").go(new(c("URI"))(p.getPath()).addQueryData("ref","notif_channel"))},"NotificationListRendererUtils")}var l={openNotification:function m(event,n){__p&&__p();var o=n.renderer_data;if(o==null)return;if(!l.isStoryOnlyLiveVideoNotification(n)&&(event.metaKey||event.ctrlKey||event.button===1))return;if(o.__typename==="LiveVideoNotificationRendererData"){event.preventDefault();var p=c("XLiveVideoLoadController").getURIBuilder().setFBID("video_id",o.video_id).getURI(),q=new(c("AsyncRequest"))(p).setHandler(function(r){if(r.payload)l.openNotificationInSurface(event,n);else c("PageTransitions").go(n.url)});q.send()}},openNotificationInSurface:function m(event,n){var o=n.renderer_data;if(o==null)return;if(o.bucket_data)i(event,o);else if(o.can_render_in_tahoe)j(event,o,n);else if(!o.can_render_in_tahoe&&o.video_channel_id)k(event,o,n)},isStoryOnlyLiveVideoNotification:function m(n){var o=n.renderer_data;if(o==null)return false;return o.__typename==="LiveVideoNotificationRendererData"&&!!o.bucket_data}};f.exports=l}),null);
__d("NotificationListItem.react",["cx","Bootloader","Event","Keys","Link.react","NotificationListConfig","NotificationListDelights.react","NotificationListDelightUtils","NotificationListItemBaseModule","NotificationListRendererUtils","NotificationURI","NotificationUserActions","PageTransitions","React","URI"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("NotificationListItemBaseModule").NotificationListItemBase;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$NotificationListItem5=function(r){__p&&__p();var s,t=this.props.notification,u=t.primerAttributes,v=t.url;if(u&&u.ajaxify)(function(){var z=new(c("URI"))(u.ajaxify),A=z.getQueryData(),B=A.app_id,C=A.page_id,D=A.post_id,E=A.ref;if(E==="aymt_auto_opened_dialog")c("Bootloader").loadModules(["BoostedComponentAYMTActionsV2"],function(F){F.aymtAutoOpenDialogLinkClick(B,C,D,E)},"NotificationListItem.react")})();else if(v){var w=new(c("URI"))(v),x=w.getQueryData(),y=x.aymt_tip;if(y==="1")c("PageTransitions").go(w.addQueryData("aymt_link_click",Date.now()))}}.bind(this),this.$NotificationListItem6=function(r){this.props.onClick&&this.props.onClick(this.$NotificationListItem4());this.$NotificationListItem7(r);c("NotificationListRendererUtils").openNotification(r,this.props.notification)}.bind(this),this.$NotificationListItem8=function(r){if(c("Event").getKeyCode(r.nativeEvent)==c("Keys").RETURN){var s=this.$NotificationListItem4();this.props.onSelected&&this.props.onSelected(s);this.$NotificationListItem7(r)}}.bind(this),this.$NotificationListItem7=function(r){var s=this.$NotificationListItem4();if(this.props.onRead&&r)this.props.onRead(s);c("NotificationUserActions").markNotificationsAsRead([s],null)}.bind(this),this.$NotificationListItem9=function(){var r=this.$NotificationListItem4();c("NotificationUserActions").markNotificationsAsUnread([r],null)}.bind(this),this.$NotificationListItem11=function(r){var s=void 0;if(!c("NotificationListRendererUtils").isStoryOnlyLiveVideoNotification(this.props.notification))s=c("NotificationURI").localize(new(c("URI"))(this.props.notification.url));return c("React").createElement("a",babelHelpers["extends"]({},this.props.notification.primerAttributes,{target:this.props.target?this.props.target:"_self",href:s,role:"button",tabIndex:0,className:"_33e _1_0e",onClick:this.$NotificationListItem5,onClickCapture:this.$NotificationListItem6,onKeyUp:this.$NotificationListItem8}),r,this.$NotificationListItem10())}.bind(this),n}l.prototype.$NotificationListItem2=function(){return c("NotificationListConfig").canMarkUnread||(this.props.enableHubView||false)&&c("NotificationListConfig").canMarkUnreadInHub};l.prototype.$NotificationListItem3=function(){var m=this.props,n=m.notification,o=m.isRead,p=m.rowIndex;return c("NotificationListDelightUtils").canShowHeartDelight(n,o,p)};l.prototype.$NotificationListItem4=function(){return this.props.notification.alert_id};l.prototype.$NotificationListItem10=function(){if(!this.$NotificationListItem3()||!this.props.paused)return null;return c("React").createElement(c("NotificationListDelights.react"),{notification:this.props.notification,rowIndex:this.props.rowIndex})};l.prototype.render=function(){return c("React").createElement(k,babelHelpers["extends"]({},this.props,{canMarkUnread:this.$NotificationListItem2(),hasCustomForeground:this.$NotificationListItem3(),renderLink:this.$NotificationListItem11,onMarkItemRead:this.$NotificationListItem7,onMarkItemUnread:this.$NotificationListItem9,hideIcon:false}))};f.exports=l}),null);
__d("NotificationListPropTypes",["React"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").PropTypes,i={tracking:h.string,notifs:h.object,afterScroll:h.func,onChevronShow:h.func,onChevronHide:h.func,onRead:h.func,canFetchMore:h.bool,hiddenState:h.object,readState:h.object,showingChevron:h.bool,paused:h.bool,maxHeight:h.number,shouldScroll:h.bool,listItemRenderer:h.func};f.exports=i}),null);
__d("NotificationVPVs",["MarauderLogger","Set","getElementRect"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new(c("Set"))();function i(o){if(j(o))return;c("MarauderLogger").log("notifications_vpv",undefined,null,"notification",o);h.add(o)}function j(o){return h.has(o)}function k(){h.clear()}function l(o,p){if(!o||!p)return false;return!(o.bottom<p.top||o.top>p.bottom||o.right<p.left||o.left>p.right)}function m(o){var p=c("getElementRect")(o);if(!p||p.top==0&&p.bottom==0&&p.left==0&&p.right==0)return null;return p}var n={logImpression:i,clearImpressions:k,hasLoggedImpression:j,getValidatedRectangle:m,areRectsOverlapping:l};f.exports=n}),null);
__d("WebNotificationsBottomCollisionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:WebNotificationsBottomCollisionsLoggerConfig",this.$WebNotificationsBottomCollisionsTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:WebNotificationsBottomCollisionsLoggerConfig",this.$WebNotificationsBottomCollisionsTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$WebNotificationsBottomCollisionsTypedLogger1={};return this};h.prototype.getData=function(){return babelHelpers["extends"]({},this.$WebNotificationsBottomCollisionsTypedLogger1)};h.prototype.updateData=function(j){this.$WebNotificationsBottomCollisionsTypedLogger1=babelHelpers["extends"]({},this.$WebNotificationsBottomCollisionsTypedLogger1,j);return this};h.prototype.setVC=function(j){this.$WebNotificationsBottomCollisionsTypedLogger1.vc=j;return this};var i={vc:true};f.exports=h}),null);
__d("NotificationJewelList.react",["ix","cx","fbt","AbstractButton.react","Animation","ErrorBoundary.react","Event","EventProfiler","FunnelLogger","Image.react","JewelLogger","LogicalGrid.react","NotificationBucket.react","NotificationJewelFunnelLoggingConstants","NotificationListConfig","NotificationListItem.react","NotificationListPropTypes","NotificationVPVs","NotifTestIDs","QE2Logger","React","ReactDOM","ScrollableArea.react","SubscriptionsHandler","TimeSlice","Vector","WebNotificationsBottomCollisionsTypedLogger","XUISpinner.react","asset","debounce","getObjectValues","isEmpty","performanceNowNoFallback","throttle"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l,m=c("NotificationJewelFunnelLoggingConstants").FUNNEL_LOGGING_NAME,n=c("NotificationJewelFunnelLoggingConstants").FUNNEL_LOGGING_EVENT,o=c("NotificationListConfig").numStoriesFromEndBeforeAFetchIsTriggered,p=160,q=530,r=61,s=Math.ceil(r*o),t=430,u=void 0;function v(x){if(u!=x){new(c("WebNotificationsBottomCollisionsTypedLogger"))().log();u=x}}k=babelHelpers.inherits(w,c("React").Component);l=k&&k.prototype;function w(){__p&&__p();var x,y;"use strict";for(var z=arguments.length,A=Array(z),B=0;B<z;B++)A[B]=arguments[B];return y=(x=l.constructor).call.apply(x,[this].concat(A)),this.state={lastMeasuredHeight:null},this.$NotificationJewelList2=[],this.$NotificationJewelList6=new(c("SubscriptionsHandler"))(),this.$NotificationJewelList7=false,this.$NotificationJewelList8=false,this.$NotificationJewelList11=function(){__p&&__p();if(!this.$NotificationJewelList3||!this.$NotificationJewelList5)return;var C=c("ReactDOM").findDOMNode(this.$NotificationJewelList3);if(!C)return;var D=c("ReactDOM").findDOMNode(this.$NotificationJewelList5);if(!D)return;var E=c("NotificationVPVs").getValidatedRectangle(D);if(this.props.afterScroll){var F=function(){this.props.afterScroll(this.$NotificationJewelList9(),C,E)}.bind(this),G=c("Vector").getElementDimensions(D).y,H=this.$NotificationJewelList5&&this.$NotificationJewelList5.getArea();if(H&&H.getContentHeight()>0&&this.$NotificationJewelList7===false&&c("performanceNowNoFallback")&&c("getObjectValues")(this.props.notifs).length>0){this.$NotificationJewelList7=true;c("JewelLogger").logJewelListComponentEvent({jewelName:"notifications",eventName:"list_population_initial",timestamp:c("performanceNowNoFallback")()})}if(H&&G>0&&H.getContentHeight()>=G){if(this.$NotificationJewelList8===false&&c("performanceNowNoFallback")){this.$NotificationJewelList8=true;c("JewelLogger").logJewelListComponentEvent({jewelName:"notifications",eventName:"list_populated",timestamp:c("performanceNowNoFallback")()})}c("TimeSlice").guard(F,"NotificationJewelList afterScrollCallback",{propagationType:c("TimeSlice").PropagationType.ORPHAN})()}else F()}}.bind(this),this.$NotificationJewelList12=function(){return c("getObjectValues")(this.props.notifs).map(function(C){return JSON.stringify(C)})}.bind(this),this.$NotificationJewelList16=function(C,D){__p&&__p();var E,F=this,G=this.$NotificationJewelList13(D);if(C.ids&&C.ids.length){var E=function(){var H=F.props.notifs,I=C.ids.filter(function(J){return!!H[J]});if(I.length===0)return{v:null}}();if(typeof E==="object")return E.v}return c("React").createElement("li",{key:D},c("React").createElement(c("NotificationBucket.react"),{bucket:C,listRenderer:this.$NotificationJewelList17,startIndex:G}))}.bind(this),this.$NotificationJewelList17=function(C,D){D=D||0;return C.map(function(E,F){var G=this.props.notifs[E];if(!G)return null;var H=F+D;return this.$NotificationJewelList18(G,H,H)}.bind(this))}.bind(this),this.$NotificationJewelList19=function(){this.setState(function(C){return babelHelpers["extends"]({},C,{lastMeasuredHeight:this.$NotificationJewelList10()})}.bind(this))}.bind(this),this.$NotificationJewelList20=function(){var C=c("debounce")(this.$NotificationJewelList19);this.$NotificationJewelList6.addSubscriptions(C);return C}.bind(this)(),this.$NotificationJewelList23=function(){if(this.props.onResetRetryCount)this.props.onResetRetryCount()}.bind(this),this.$NotificationJewelList24=function(){c("FunnelLogger").appendAction(m,n.SCROLL_TO_FETCH);this.$NotificationJewelList11()}.bind(this),this.$NotificationJewelList25=c("throttle").acrossTransitionsWithBlocking(this.$NotificationJewelList24),y}w.prototype.$NotificationJewelList9=function(){"use strict";__p&&__p();if(!this.$NotificationJewelList4||!this.$NotificationJewelList5)return false;var x=c("ReactDOM").findDOMNode(this.$NotificationJewelList5);if(!x)return false;var y=c("ReactDOM").findDOMNode(this.$NotificationJewelList4);if(!y)return false;var z=c("Vector").getElementDimensions(x).y;if(z===0)return false;var A=c("Vector").getElementPosition(x).y+z,B=c("Vector").getElementPosition(y).y,C=this.$NotificationJewelList5&&this.$NotificationJewelList5.getArea();if(C&&C.getScrollTop()>0&&B<A)v(c("getObjectValues")(this.props.notifs).length);return B-s<A};w.prototype.$NotificationJewelList10=function(){"use strict";var x=c("Vector").getViewportDimensions().y,y=Math.min(this.props.maxHeight||q,x-p);return y};w.prototype.$NotificationJewelList13=function(x){"use strict";return this.$NotificationJewelList2.slice(0,x).reduce(function(y,z){return y+z},0)};w.prototype.$NotificationJewelList14=function(x){"use strict";this.$NotificationJewelList2=x?x.map(function(y){return y.ids.length}):[]};w.prototype.$NotificationJewelList15=function(){"use strict";if(!this.props.buckets)return null;return this.props.buckets.map(this.$NotificationJewelList16)};w.prototype.$NotificationJewelList18=function(x,y,z){"use strict";var A=x.alert_id;return c("React").createElement(c("ErrorBoundary.react"),{key:A},c("React").createElement(c("NotificationListItem.react"),{getDebugData:this.$NotificationJewelList12,isRead:this.props.readState[A],onChevronHide:this.props.onChevronHide,onChevronShow:this.props.onChevronShow,onClick:this.props.onClick,onRead:this.props.onRead,parent:this,paused:this.props.paused,row:y,rowIndex:z,shortenTimestamp:this.props.shortenTimestamp,target:this.props.target,visible:!this.props.hiddenState[A],notification:x}))};w.prototype.$NotificationJewelList21=function(x){"use strict";if(this.props.onNumNotificationsViewableChange)this.props.onNumNotificationsViewableChange(x/r)};w.prototype.componentWillMount=function(){"use strict";this.$NotificationJewelList14(this.props.buckets);this.$NotificationJewelList6.addSubscriptions(c("Event").listen(window,"resize",this.$NotificationJewelList20));this.$NotificationJewelList19()};w.prototype.componentDidMount=function(){"use strict";var x=this.state.lastMeasuredHeight;if(x!=null)this.$NotificationJewelList21(x);if(c("performanceNowNoFallback"))c("JewelLogger").logJewelListComponentEvent({jewelName:"notifications",eventName:"list_did_mount",timestamp:c("performanceNowNoFallback")()})};w.prototype.componentWillReceiveProps=function(x){"use strict";if(x.buckets===this.props.buckets)return;this.$NotificationJewelList14(x.buckets)};w.prototype.componentDidUpdate=function(x,y){"use strict";__p&&__p();if(this.props.paused&&!x.paused)if(this.props.shouldScroll&&this.$NotificationJewelList5){var z=this.$NotificationJewelList5.getArea();if(z)z.scrollToTop(false)}var A=this.state.lastMeasuredHeight;if(A!=null&&A!==y.lastMeasuredHeight){this.$NotificationJewelList21(A);if(this.$NotificationJewelList1){this.$NotificationJewelList1.stop();delete this.$NotificationJewelList1}if(!c("isEmpty")(this.props.notifs)){var B=c("ReactDOM").findDOMNode(this.$NotificationJewelList5);if(B)this.$NotificationJewelList1=new(c("Animation"))(B).to("height",A+"px").duration(100).go()}}var C=setTimeout(this.$NotificationJewelList11,0);this.$NotificationJewelList6.addSubscriptions({remove:function D(){clearTimeout(C)}})};w.prototype.componentWillUnmount=function(){"use strict";this.$NotificationJewelList6.release();if(this.$NotificationJewelList1){this.$NotificationJewelList1.stop();delete this.$NotificationJewelList1}};w.prototype.$NotificationJewelList22=function(x,y){"use strict";return y.indexOf(x)};w.prototype.$NotificationJewelList26=function(){"use strict";if(this.props.buckets&&this.props.buckets.length)return this.$NotificationJewelList15();var x=c("getObjectValues")(this.props.notifs).filter(Boolean).map(function(y){return y.alert_id});return c("getObjectValues")(this.props.notifs).filter(Boolean).map(function(y,z){var A=y.alert_id,B=this.$NotificationJewelList22(A,x);return this.$NotificationJewelList18(y,B,z)}.bind(this))};w.prototype.render=function(){"use strict";__p&&__p();var x=this.props.notifs,y=null,z=null,A=t,B=null,C=c("React").createElement("ul",{"data-gt":this.props.tracking,"data-testid":c("NotifTestIDs").REACT_NOTIF_LIST});if(!c("isEmpty")(x)){y=c("React").createElement(c("LogicalGrid.react"),{ref:function(H){return this.$NotificationJewelList3=H}.bind(this),component:C},this.$NotificationJewelList26());z=this.state.lastMeasuredHeight}else if(!this.props.canFetchMore)y=c("React").createElement("div",{className:"_572e","data-testid":c("NotifTestIDs").REACT_NOTIF_LIST},j._("No new notifications"));if(this.props.canFetchMore)if(this.props.retryLimitReached&&this.props.onResetRetryCount!=null)B=c("React").createElement(c("AbstractButton.react"),{className:"_3heb","data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":j._("A temporary issue prevented your notifications from being loaded. Click to try again."),"data-tooltip-delay":true,image:c("React").createElement(c("Image.react"),{className:"_3hec",src:h("458300")}),label:j._("Try again"),labelIsHidden:true,onClick:this.$NotificationJewelList23});else B=c("React").createElement(c("XUISpinner.react"),{ref:function(H){return this.$NotificationJewelList4=H}.bind(this),paused:!this.props.currentlyFetching,className:"jewelLoading"});var D=null;if(this.props.upsell){var E=this.props.upsell.module;D=c("React").createElement(E,this.props.upsell.props)}var F="_50-t"+(this.props.showingChevron?" _2iy1":""),G=c("React").createElement(c("ScrollableArea.react"),{ref:function(H){return this.$NotificationJewelList5=H}.bind(this),width:A,fade:true,persistent:true,onScroll:this.$NotificationJewelList25},y,B);return c("React").createElement("div",{style:z?{height:z+"px"}:{},className:F},G,D)};w.defaultProps={retryLimitExceeded:false};w.propTypes=c("NotificationListPropTypes");f.exports=w}),null);
__d("retry",["regeneratorRuntime","asyncSleep"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,Error);i=h&&h.prototype;function j(G,H,I,J){i.constructor.call(this,G);this.message=G;this.values=H;this.errors=I;this.options=J}function k(G){this.$Retry1=babelHelpers["extends"]({},k.RETRY_OPTION_DEFAULTS,G);this.$Retry2=0;this.$Retry3=false;this.$Retry4=false;this.$Retry5=[];this.$Retry6=[];this.$Retry7=null;this.$Retry8=0;this.$Retry9()}k.prototype.$Retry9=function(){if(this.$Retry1.interval&&this.$Retry1.interval<0)throw new j("C'mon, interval < 0 makes no sense.",[],[],this.$Retry1);if(this.$Retry1.backoff&&this.$Retry1.backoff<1)throw new j("backoff must be >= 1",[],[],this.$Retry1);if(this.$Retry1.jitter&&(this.$Retry1.jitter<0||this.$Retry1.jitter>1))throw new j("jitter must be in range [0, 1]",[],[],this.$Retry1)};k.prototype.onValue=function(){if(!this.$Retry1.retryValues)this.$Retry1.retryValues=[];for(var G=arguments.length,H=Array(G),I=0;I<G;I++)H[I]=arguments[I];this.$Retry1.retryValues=this.$Retry1.retryValues.concat(H);return this};k.prototype.untilValue=function(){for(var G=arguments.length,H=Array(G),I=0;I<G;I++)H[I]=arguments[I];return this.untilValueMatches(function(J){return H.indexOf(J)!==-1})};k.prototype.onFalsy=function(){return this.onValueMatches(function(G){return!G})};k.prototype.onTruthy=function(){return this.onValueMatches(function(G){return!!G})};k.prototype.untilTruthy=function(){return this.onFalsy()};k.prototype.untilFalsy=function(){return this.onTruthy()};k.prototype.onNull=function(){return this.onValueMatches(function(G){return G===null})};k.prototype.onUndefined=function(){return this.onValueMatches(function(G){return G===undefined})};k.prototype.onValueMatches=function(){if(!this.$Retry1.retryValueMatchers)this.$Retry1.retryValueMatchers=[];for(var G=arguments.length,H=Array(G),I=0;I<G;I++)H[I]=arguments[I];this.$Retry1.retryValueMatchers=this.$Retry1.retryValueMatchers.concat(H);return this};k.prototype.untilValueMatches=function(){for(var G=arguments.length,H=Array(G),I=0;I<G;I++)H[I]=arguments[I];return this.onValueMatches.apply(this,H.map(function(J){return function(K){return!J(K)}}))};k.prototype.onError=function(){for(var G=arguments.length,H=Array(G),I=0;I<G;I++)H[I]=arguments[I];if(H.length===0)return this.onErrorMatches(function(J){return true});if(!this.$Retry1.retryErrorClasses)this.$Retry1.retryErrorClasses=[];this.$Retry1.retryErrorClasses=this.$Retry1.retryErrorClasses.concat(H);return this};k.prototype.onErrorMatches=function(){if(!this.$Retry1.retryErrorMatchers)this.$Retry1.retryErrorMatchers=[];for(var G=arguments.length,H=Array(G),I=0;I<G;I++)H[I]=arguments[I];this.$Retry1.retryErrorMatchers=this.$Retry1.retryErrorMatchers.concat(H);return this};k.prototype.limit=function(G){this.$Retry1.retries=G;this.$Retry9();return this};k.prototype.once=function(){return this.limit(1)};k.prototype.twice=function(){return this.limit(2)};k.prototype.withInterval=function(G){this.$Retry1.interval=G;this.$Retry9();return this};k.prototype.withMaxInterval=function(G){this.$Retry1.maxInterval=G;return this};k.prototype.withMinInterval=function(G){this.$Retry1.minInterval=G;return this};k.prototype.withBackoff=function(G){this.$Retry1.backoff=G;this.$Retry9();return this};k.prototype.withJitter=function(G){this.$Retry1.jitter=G;this.$Retry9();return this};k.prototype.abort=function(){this.$Retry3=true};k.prototype.getCallCount=function(){return this.$Retry2};k.prototype.getValues=function(){return this.$Retry5};k.prototype.getErrors=function(){return this.$Retry6};k.prototype.isRunning=function(){return this.$Retry4};k.prototype.call=function G(H){__p&&__p();var I,J;return c("regeneratorRuntime").async(function K(L){__p&&__p();while(1)switch(L.prev=L.next){case 0:if(!this.$Retry4){L.next=2;break}throw new j("Cannot reuse a retry object while it is still running!",[],[],this.$Retry1);case 2:this.$Retry4=true;L.prev=3;this.$Retry7=H;this.$Retry6=[];this.$Retry5=[];case 7:if(!(!this.$Retry1.retries||this.$Retry2<this.$Retry1.retries+1)){L.next=33;break}if(!(this.$Retry2>0)){L.next=12;break}I=this.$Retry10();L.next=12;return c("regeneratorRuntime").awrap(c("asyncSleep")(I));case 12:if(!this.$Retry3){L.next=14;break}throw new j("Retry aborted.",this.$Retry5,this.$Retry6,this.$Retry1);case 14:L.prev=14;this.$Retry2++;L.next=18;return c("regeneratorRuntime").awrap(H());case 18:J=L.sent;this.$Retry5.push(J);if(!this.$Retry11(J)){L.next=22;break}return L.abrupt("continue",7);case 22:return L.abrupt("return",J);case 25:L.prev=25;L.t0=L["catch"](14);this.$Retry6.push(L.t0);if(!this.$Retry12(L.t0)){L.next=30;break}return L.abrupt("continue",7);case 30:throw L.t0;case 31:L.next=7;break;case 33:throw new j("Max call count exceeded.",this.$Retry5,this.$Retry6,this.$Retry1);case 34:L.prev=34;this.$Retry4=false;return L.finish(34);case 37:case"end":return L.stop()}},null,this,[[3,,34,37],[14,25]])};k.prototype.$Retry10=function(){return Math.max(0,this.$Retry13(this.$Retry14()))};k.prototype.$Retry13=function(G){var H=G;if(this.$Retry1.minInterval)H=Math.max(H,this.$Retry1.minInterval);if(this.$Retry1.maxInterval)H=Math.min(H,this.$Retry1.maxInterval);return H};k.prototype.$Retry14=function(){return this.$Retry15()+this.$Retry16()};k.prototype.$Retry17=function(){return this.$Retry1.interval?this.$Retry1.interval:0};k.prototype.$Retry18=function(){return this.$Retry1.backoff?this.$Retry1.backoff:1};k.prototype.$Retry15=function(){var G=this.$Retry17(),H=this.$Retry18();return G*Math.pow(H,this.$Retry2-1)};k.prototype.$Retry16=function(){var G=this.$Retry19(),H=G-this.$Retry8;this.$Retry8=G;return H};k.prototype.$Retry19=function(){var G=this.$Retry1.jitter;if(!G)return 0;var H=Math.random()*2-1,I=H*H*H*G/2,J=this.$Retry17(),K=this.$Retry18(),L=K-1;if(L<1e-6)return J*Math.pow(K,this.$Retry2)*(I+L*(I*I-I)/2);return J*Math.pow(K,this.$Retry2)*(Math.pow(K,I)-1)/(K-1)};k.prototype.$Retry11=function(G){return!!this.$Retry1.retryValues&&this.$Retry1.retryValues.indexOf(G)!==-1||!!this.$Retry1.retryValueMatchers&&this.$Retry1.retryValueMatchers.some(function(H){return H(G)})};k.prototype.$Retry12=function(G){return!!this.$Retry1.retryErrorClasses&&this.$Retry1.retryErrorClasses.some(function(H){return G instanceof H})||!!this.$Retry1.retryErrorMatchers&&this.$Retry1.retryErrorMatchers.some(function(H){return H(G)})};k.RETRY_OPTION_DEFAULTS={interval:1e3,backoff:1,jitter:.25};function l(G,H){return c("regeneratorRuntime").async(function I(J){while(1)switch(J.prev=J.next){case 0:J.next=2;return c("regeneratorRuntime").awrap(new k(H).call(G));case 2:return J.abrupt("return",J.sent);case 3:case"end":return J.stop()}},null,this)}l.Retry=k;l.RetryError=j;function m(){var G;return(G=new k()).onValue.apply(G,arguments)}l.onValue=m;function n(){var G;return(G=new k()).untilValue.apply(G,arguments)}l.untilValue=n;function o(){return new k().onFalsy()}l.onFalsy=o;function p(){return new k().onTruthy()}l.onTruthy=p;function q(){return new k().untilTruthy()}l.untilTruthy=q;function r(){return new k().untilFalsy()}l.untilFalsy=r;function s(){return new k().onNull()}l.onNull=s;function t(){return new k().onUndefined()}l.onUndefined=t;function u(){var G;return(G=new k()).onValueMatches.apply(G,arguments)}l.onValueMatches=u;function v(){var G;return(G=new k()).untilValueMatches.apply(G,arguments)}l.untilValueMatches=v;function w(){var G;return(G=new k()).onError.apply(G,arguments)}l.onError=w;function x(){var G;return(G=new k()).onErrorMatches.apply(G,arguments)}l.onErrorMatches=x;function y(G){return new k().limit(G)}l.limit=y;function z(){return new k().once()}l.once=z;function A(){return new k().twice()}l.twice=A;function B(G){return new k().withInterval(G)}l.withInterval=B;function C(G){return new k().withMaxInterval(G)}l.withMaxInterval=C;function D(G){return new k().withMinInterval(G)}l.withMinInterval=D;function E(G){return new k().withBackoff(G)}l.withBackoff=E;function F(G){return new k().withJitter(G)}l.withJitter=F;f.exports=l}),null);
__d("NotificationList.react",["regeneratorRuntime","Promise","Arbiter","FunnelLogger","NotificationBucketStore","NotificationConstants","NotificationHiddenState","NotificationJewelFunnelLoggingConstants","NotificationListConfig","NotificationSeenState","NotificationStore","NotificationUpdates","NotificationUserActions","NotificationVPVs","NotifType","React","SubscriptionsHandler","TimeSlice","createCancelableFunction","getObjectValues","isEmpty","mapObject","retry"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("NotificationJewelFunnelLoggingConstants").FUNNEL_LOGGING_NAME,k=c("NotificationJewelFunnelLoggingConstants").FUNNEL_LOGGING_EVENT,l=c("React").PropTypes,m=c("NotificationConstants").PayloadSourceType.LIVE_SEND,n=3,o="notification_clicked";function p(r){return{classification:r.classification,endpointControllerName:r.endpoint!=null?r.endpoint:"WebNotificationsPayloadPagelet",readness:r.readness}}h=babelHelpers.inherits(q,c("React").Component);i=h&&h.prototype;function q(r){__p&&__p();var s;"use strict";for(var t=arguments.length,u=Array(t>1?t-1:0),v=1;v<t;v++)u[v-1]=arguments[v];(s=i.constructor).call.apply(s,[this,r].concat(u));this.$NotificationList1={};this.$NotificationList2=false;this.$NotificationList3=new(c("SubscriptionsHandler"))();this.$NotificationList4=0;this.$NotificationList9=function(){this.setState({retryLimitReached:false});this.$NotificationList10()}.bind(this);this.$NotificationList11=function(){var y={};Object.keys(this.$NotificationList1).forEach(function(z){var A=c("NotificationHiddenState").isHidden(z);if(A!=this.state.hiddenState[z])y[z]=A}.bind(this));if(!c("isEmpty")(y))this.setState({hiddenState:babelHelpers["extends"]({},this.state.hiddenState,y)});this.$NotificationList1={};this.$NotificationList8(c("NotificationStore").getCount(p(this.props)))}.bind(this);this.$NotificationList12=function(y,z,A){if(this.state.currentlyFetching||!this.state.canFetchMore)return;if(y){c("FunnelLogger").appendAction(j,k.FETCH_NEXT_SET);this.$NotificationList10()}this.$NotificationList13(z,A)}.bind(this);this.$NotificationList14=function(){this.setState({showingChevron:true})}.bind(this);this.$NotificationList15=function(){this.setState({showingChevron:false})}.bind(this);this.$NotificationList18=function(y){this.props.onClick&&this.props.onClick(y);c("Arbiter").inform(o,{endpointConfig:p(this.props),alertID:y})}.bind(this);this.$NotificationList19=function(y){if(this.props.paused&&this.props.readness==="UNREAD"){var z=babelHelpers["extends"]({},this.state.readWhilePausedOrNavigating);z[y]=true;this.setState({readWhilePausedOrNavigating:z})}}.bind(this);this.$NotificationList20=function(y){this.$NotificationList4=y}.bind(this);var w=p(r);c("NotificationStore").registerEndpoint(w);var x=c("NotificationStore").getAll(w);this.state={currentlyFetching:false,canFetchMore:c("NotificationStore").canFetchMore(w),notifs:x,hiddenState:c("mapObject")(x,function(y,z){return c("NotificationHiddenState").isHidden(z)}),readState:c("mapObject")(x,function(y,z){return c("NotificationSeenState").isRead(z)}),showingChevron:false,readWhilePausedOrNavigating:{},retryLimitReached:false}}q.prototype.componentWillMount=function(){"use strict";__p&&__p();c("FunnelLogger").appendAction(j,k.FETCH_NOTIFICATIONS);this.$NotificationList3.addSubscriptions(c("NotificationUpdates").subscribe("notifications-updated",function(r,s){if(s.source==m&&!c("isEmpty")(s.updates)){this.$NotificationList2=true;var t=this.props.paused;if(t){this.$NotificationList1=babelHelpers["extends"]({},this.$NotificationList1,s.updates);return}}this.$NotificationList5(c("NotificationStore").getAll(p(this.props)))}.bind(this)),c("NotificationUpdates").subscribe(["hidden-state-updated","read-state-updated"],function(r,s){__p&&__p();if(r=="hidden-state-updated"){if(s.source!==m||!this.props.paused){var t=c("mapObject")(s.updates,function(v,w){return c("NotificationHiddenState").isHidden(w)});this.setState({hiddenState:babelHelpers["extends"]({},this.state.hiddenState,t)})}}else{var u=c("mapObject")(s.updates,function(v,w){return c("NotificationSeenState").isRead(w)});this.setState({readState:babelHelpers["extends"]({},this.state.readState,u)})}}.bind(this)))};q.prototype.componentWillUnmount=function(){"use strict";this.$NotificationList3.release()};q.prototype.componentWillReceiveProps=function(r){"use strict";if(!this.$NotificationList6(r)&&r.paused)return;if(this.props.enableHubView&&this.props.readness==="UNREAD")return;this.setState({readWhilePausedOrNavigating:{}})};q.prototype.$NotificationList6=function(r){"use strict";return r.classification!==this.props.classification||r.readness!==this.props.readness};q.prototype.$NotificationList7=function(r){"use strict";__p&&__p();var s=Object.keys(this.state.notifs),t=Object.keys(r).filter(function(v){return!this.state.notifs[v]}.bind(this));s=s.concat(t);var u={};s.forEach(function(v){if(this.$NotificationList1[v]){if(this.state.notifs[v])u[v]=this.state.notifs[v]}else u[v]=r[v]||this.state.notifs[v]}.bind(this));return u};q.prototype.$NotificationList5=function(r){"use strict";var s=c("isEmpty")(this.$NotificationList1)?r:this.$NotificationList7(r),t={},u={};c("getObjectValues")(s).forEach(function(w){var x=w.alert_id;t[x]=c("NotificationSeenState").isRead(x);u[x]=c("NotificationHiddenState").isHidden(x)});var v=p(this.props);this.setState({notifs:s,canFetchMore:c("NotificationStore").canFetchMore(v)||c("NotificationStore").getCount(v)!==Object.keys(s).length,readState:babelHelpers["extends"]({},this.state.readState,t),hiddenState:babelHelpers["extends"]({},this.state.hiddenState,u)})};q.prototype.$NotificationList8=function r(s){__p&&__p();var t,u,v;return c("regeneratorRuntime").async(function w(x){__p&&__p();while(1)switch(x.prev=x.next){case 0:"use strict";this.setState({currentlyFetching:true});t=p(this.props);u=c("createCancelableFunction")(function(){this.setState({currentlyFetching:false,retryLimitReached:true})}.bind(this));this.$NotificationList3.addSubscriptions({remove:function y(){u.cancel()}});v=c("retry").limit(n).onError().withBackoff(2).withInterval(100).withJitter(.1);x.prev=6;x.next=9;return c("regeneratorRuntime").awrap(v.call(function(){__p&&__p();return new(c("Promise"))(function(y,z){var A=c("NotificationStore").getNotifications(s,t,function(C){this.$NotificationList5(C);if(Object.keys(C).length<s&&c("NotificationStore").canFetchMore(t))z();else y()}.bind(this)),B=A.remove;this.$NotificationList3.addSubscriptions({remove:function C(){B();v.abort();z()}})}.bind(this))}.bind(this)));case 9:this.setState({currentlyFetching:false});x.next=19;break;case 12:x.prev=12;x.t0=x["catch"](6);if(!(x.t0 instanceof c("retry").RetryError)){x.next=18;break}u();x.next=19;break;case 18:throw x.t0;case 19:case"end":return x.stop()}},null,this,[[6,12]])};q.prototype.$NotificationList10=function(){"use strict";if(!this.state.currentlyFetching){var r=Object.keys(this.state.notifs).length;this.$NotificationList8(r+this.props.numPerPage)}};q.prototype.$NotificationList13=function(r,s){"use strict";__p&&__p();if(!r||!s)return;for(var t=0,u=r.children.length;t<u;t++){var v=r.children[t];if(v){var w=v.getAttribute("data-alert-id");if(w&&!c("NotificationVPVs").hasLoggedImpression(w)){var x=c("NotificationVPVs").getValidatedRectangle(v);if(x&&c("NotificationVPVs").areRectsOverlapping(s,x))c("NotificationVPVs").logImpression(w)}}}};q.prototype.$NotificationList16=function(r){"use strict";var s=Math.max(this.props.numPerPage,Math.ceil(this.$NotificationList4));if(s>0)this.$NotificationList8(s)};q.prototype.$NotificationList17=function(r){"use strict";__p&&__p();var s=c("NotificationSeenState").getUnseenIDs();if(!c("isEmpty")(this.$NotificationList1))s=s.filter(function(t){return!this.$NotificationList1[t]}.bind(this));if(s.length&&(this.props.paused||this.props.enableHubView))c("TimeSlice").guard(function(){return c("NotificationUserActions").markNotificationsAsSeen(s)},"NotificationList _populateList markNotificationsAsSeen",{propagationType:c("TimeSlice").PropagationType.ORPHAN})();if(this.props.hasEverBeenOpened)if(!r||!r.hasEverBeenOpened)this.$NotificationList16(s)};q.isReaction=function(r){"use strict";return r===c("NotifType").LIKE||r===c("NotifType").OPEN_GRAPH_ACTION_LIKE||r===c("NotifType").LIKE_TAGGED||r===c("NotifType").PAGE_FAN||r===c("NotifType").IG_MEDIA_LIKE||r===c("NotifType").FEEDBACK_REACTION_GENERIC||r===c("NotifType").FEEDBACK_REACTION_GENERIC_TAGGED||r===c("NotifType").MESSENGER_REACTIONS};q.prototype.componentDidUpdate=function(r){__p&&__p();var s,t=this,u;"use strict";this.$NotificationList17(r);if(r.paused&&!this.props.paused){var s=function(){t.$NotificationList2=false;var v=setTimeout(t.$NotificationList11,0);t.$NotificationList3.addSubscriptions({remove:function w(){clearTimeout(v)}});return{v:void 0}}();if(typeof s==="object")return s.v}if(this.props.paused&&this.$NotificationList6(r)){var u=function(){var v=setTimeout(t.$NotificationList11,0);t.$NotificationList3.addSubscriptions({remove:function w(){clearTimeout(v)}});return{v:void 0}}();if(typeof u==="object")return u.v}};q.prototype.componentDidMount=function(){"use strict";this.$NotificationList17()};q.prototype.render=function(){__p&&__p();var r;"use strict";var s=this.props.listRenderer,t=this.state,u=t.notifs,v=t.readState,w=t.readWhilePausedOrNavigating,x={};if(this.props.readness==null)x=u;else Object.keys(u).forEach(function(A){var B=u[A],C=B.alert_id,D=v[C];if(this.props.readness==="UNREAD")D=!D||Object.prototype.hasOwnProperty.call(w,C);if(D)x[C]=B}.bind(this));if(this.props.hideReactions)(function(){var A={};Object.keys(x).forEach(function(B){var C=u[B];if(!q.isReaction(C.notif_type))A[C.alert_id]=C});x=A})();var y=this.props.classification;if(y)Object.keys(u).forEach(function(A){var B=u[A];if(!B.classifications||!B.classifications.includes(y))delete x[B.alert_id]});var z=!c("NotificationBucketStore").isEmptyBucketListData()?c("NotificationBucketStore").getBucketListData():null;return c("React").createElement(s,{paused:this.props.paused,target:this.props.target,tracking:this.props.tracking,shortenTimestamp:this.props.shortenTimestamp,maxHeight:this.props.maxHeight,useChevron:this.props.useChevron,chevronType:this.props.chevronType,buckets:z,notifs:x,afterScroll:this.$NotificationList12,onChevronShow:this.$NotificationList14,onChevronHide:this.$NotificationList15,currentlyFetching:this.state.currentlyFetching,canFetchMore:this.state.canFetchMore,hiddenState:this.state.hiddenState,readState:this.state.readState,showingChevron:this.state.showingChevron,shouldScroll:this.$NotificationList2,upsell:this.props.upsell||null,isRHC:this.props.isRHC,enableMarkUnread:this.props.enableMarkUnread,onClick:this.$NotificationList18,onRead:this.$NotificationList19,onNumNotificationsViewableChange:this.$NotificationList20,onResetRetryCount:this.$NotificationList9,retryLimitReached:this.state.retryLimitReached})};q.propTypes={hasEverBeenOpened:l.bool,enableHubView:l.bool,enableMarkUnread:l.bool,maxHeight:l.number,paused:l.bool,tracking:l.string,useChevron:l.bool,chevronType:l.string,numPerPage:l.number.isRequired,listRenderer:l.func.isRequired,upsell:l.object,endpoint:l.string,readness:l.string,classification:l.string};f.exports=q}),null);