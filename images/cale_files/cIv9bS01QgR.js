if (self.CavalryLogger) { CavalryLogger.start_js(["Wm4M2"]); }

__d("MercuryWorkContextInformation",["EventEmitter","KeyedCallbackManager","MercuryDispatcher","MercurySingletonProvider","WebGraphQL","MessengerWorkContextInformationWebGraphQLQuery","EmitterSubscription"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new(c("EventEmitter"))();function i(k){__p&&__p();this.$MercuryWorkContextInformation4=new Map();this.$MercuryWorkContextInformation6=function(l){if(l&&l.user&&l.user.scim_company_user){var m=l.user.scim_company_user,n=m.work_phone_numbers.nodes,o=n.filter(function(r){return r.is_primary_number===true&&r.user_phone_number_type}).shift(),p=m.work_location.nodes[0],q={};q[l.user.id]={phone:o?[o.user_phone_number]:null,email:m.email?[m.email]:null,location:p?[p.user_formatted_address]:null};this.$MercuryWorkContextInformation3.addResourcesAndExecute(q);this.$MercuryWorkContextInformation4.set(l.user.id,false);h.emit("change")}}.bind(this);this.$MercuryWorkContextInformation1=k;this.$MercuryWorkContextInformation2=c("MercuryDispatcher").getForFBID(this.$MercuryWorkContextInformation1);this.$MercuryWorkContextInformation3=new(c("KeyedCallbackManager"))();this.$MercuryWorkContextInformation4=new Map()}i.getForFBID=function(k){return j.getForFBID(k)};i.get=function(){return j.get()};i.prototype.getTopThreads=function(){return this.$MercuryWorkContextInformation3.getAllResources()};i.prototype.getOrFetch=function(k){if(!k)return null;var l=this.$MercuryWorkContextInformation3.getResource(k);if(l)return l;this.$MercuryWorkContextInformation5(k);return null};i.prototype.$MercuryWorkContextInformation5=function(k){if(this.$MercuryWorkContextInformation4.get(k))return;this.$MercuryWorkContextInformation4.set(k,true);c("WebGraphQL").exec(new(c("MessengerWorkContextInformationWebGraphQLQuery"))({id:k})).done(this.$MercuryWorkContextInformation6)};i.addListener=function(k,l){return h.addListener(k,l)};var j=new(c("MercurySingletonProvider"))(i);f.exports=i}),null);