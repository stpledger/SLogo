if (self.CavalryLogger) { CavalryLogger.start_js(["5Wegn"]); }

__d("MessengerSharedPhotosVideosData.bs",["bs_curry","bs_js_dict","bs_caml_array","bs_js_primitive","MessengerThreadSharedMediaHelper"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={};function i(s){return c("bs_js_primitive").undefined_to_opt(h[s])}function j(s,t){h[s]=t;return 0}function k(s){return c("bs_caml_array").caml_array_get(c("bs_js_dict").values(s),0).message_shared_media}function l(s,t,u,v){var w=k(s),x=u[0],y=x[1],z=[1,y],A=u[1],B;if(A){var C=A[0],D=w.edges;B=D.length!==0?[z,[[D.concat(C[0]),[w.page_info.start_cursor],C[2],+w.page_info.has_next_page]]]:[z,[[C[0],C[1],C[2],+w.page_info.has_next_page]]]}else B=[z,[[w.edges,[w.page_info.start_cursor],[w.page_info.end_cursor],+w.page_info.has_next_page]]];j(v,B);return c("bs_curry")._1(t,0)}function m(s,t,u,v){var w=k(s),x=u[0],y=x[0],z=[y,1],A=u[1],B;if(A){var C=A[0],D=w.edges;B=D.length!==0?[z,[[C[0].concat(D),C[1],[w.page_info.end_cursor],+w.page_info.has_next_page]]]:[z,[[C[0],C[1],C[2],+w.page_info.has_next_page]]]}else B=[z,[[w.edges,[w.page_info.start_cursor],[w.page_info.end_cursor],+w.page_info.has_next_page]]];j(v,B);return c("bs_curry")._1(t,0)}function n(s,t,u,v,w,x){var y=s[0],z=[y[0],0],A=s[1],B=[z,A];j(t,B);c("MessengerThreadSharedMediaHelper").loadMorePrevious(u,w?w[0]:undefined,v,function(C){var D=h[t];if(D!==undefined)return m(C,x,D,t);else return 0});return 0}function o(s,t,u,v,w,x){var y=s[0],z=[0,y[1]],A=s[1],B=[z,A];j(t,B);c("MessengerThreadSharedMediaHelper").loadMoreLatest(u,w?w[0]:undefined,v,function(C){var D=h[t];if(D!==undefined)return l(C,x,D,t);else return 0});return 0}function p(s,t,u,v){__p&&__p();var w=h[u];if(w!==undefined)if(w[0][0]!==0){var x=w[1],y=0;if(x){var z=x[0];if(z[0].length!==0)return o(w,u,t,s,z[1],v);else y=1}else y=1;if(y===1)return n(w,u,t,s,0,v)}else return 0;else return n([[1,1],0],u,t,s,0,v)}function q(s,t,u,v){__p&&__p();var w=h[u];if(w!==undefined)if(w[0][1]!==0){var x=w[1],y=0;if(x){var z=x[0];if(z[3]!==0)if(z[0].length!==0)return n(w,u,t,s,z[2],v);else y=1;else return 0}else y=1;if(y===1)return n(w,u,t,s,0,v)}else return 0;else return n([[1,1],0],u,t,s,0,v)}function r(s,t){__p&&__p();var u=h[s];if(u!==undefined){var v=u[1];if(v){var w=v[0],x=w[0];if(x.length!==0){var y=x.filter(function(C){return 1-+t.some(function(D){return+(D===C.node.legacy_attachment_id)})}),z=u[0],A=[[y,w[1],w[2],w[3]]],B=[z,A];return j(s,B)}else return 0}else return 0}else return 0}g.data=h;g.get=i;g.set=j;g.convertPayload=k;g.onFetchNewerDone=l;g.onFetchOlderDone=m;g.mutateDataThenLoadMoreFromRecentToOld=n;g.mutateDataThenLoadMoreFromOldToRecent=o;g.fetchNewer=p;g.fetchOlder=q;g.localRemove=r}),null);