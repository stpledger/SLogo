if (self.CavalryLogger) { CavalryLogger.start_js(["zGMV3"]); }

__d("MessengerDecorator",["cssVar","cx","BootloadedComponent.react","CurrentUser","JSResource","MercuryAttachment","MercuryAttachmentType","MercuryConfig","MercuryMessageActions","MercuryMessageCustomizations","MercuryTagHelper","MessageBorderType","MessageCustomizationType","MessagingFlowerBorder.react","MessagingGiftWrap.react","MessagingGiftWrapConstants","MessengerEnvironment","MessengerReactions.react","React","StoryAttachmentStyle","gkx","idx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=function j(v){var w=v.attachments&&v.attachments.length===1&&v.attachments[0]&&v.attachments[0].attach_type!==c("MercuryAttachmentType").STICKER;return!!w},k=function k(v){return j(v)&&c("MercuryAttachment").isLightweightActionAttachment(v.attachments[0])},l=function l(v){__p&&__p();if(n(v))return false;var w=v.attachments&&v.attachments.length===1&&v.attachments[0];if(!w)return false;if(c("MercuryAttachment").isPhotoGroupAttachment(w))return true;if(c("MercuryAttachment").isFileAttachment(w))if(c("MercuryConfig").MessengerForwardButtonForSharedFilesGK&&w.message_file_fbid)return true;return false},m=function m(v){var w;if(c("MessengerEnvironment").messengerui)return false;var x=(w=v.reactions)!=null?w[c("CurrentUser").getID()]:w;return!!x&&typeof x==="string"},n=function n(v){var w;return c("gkx")("AT5MAotH6BG7mXo4DyZnW3seA7_jf32c8tGX1llmkbXJ5ui_oKs0jpz-iYum9Gkv1o7pv5ZMvW9WlaNx_vA1ZSmAhi0Rjb62jJA5vu2Oz81AxQ")&&((w=v)!=null?(w=w.attachments)!=null?(w=w[0])!=null?(w=w.share)!=null?(w=w.style_list)!=null?w[0]:w:w:w:w:w)===c("StoryAttachmentStyle").MONTAGE_DIRECT},o=function o(v){__p&&__p();var w=[],x=[];v.attachments.forEach(function(y){if(y.metadata&&y.metadata.fbid){w.push(y.metadata.fbid.toString());x.push(y.attach_type.toString())}if(c("MercuryAttachment").isFileAttachment(y)&&y.message_file_fbid)if(c("MercuryConfig").MessengerForwardButtonForSharedFilesGK){w.push(y.message_file_fbid);x.push(y.attach_type)}});return{ids:w,types:x}},p=[{name:"GiftWrap",check:function v(w){var x=function x(z){return c("MercuryTagHelper").get(z,c("MessagingGiftWrapConstants").TAG_PREFIX)===c("MessagingGiftWrapConstants").VALENTINES_GIFT},y=function y(z){return!!c("MercuryTagHelper").get(z,c("MessagingGiftWrapConstants").UNWRAPPED_TAG)};return!!(w.tags&&x(w.tags)&&!y(w.tags))},render:function v(w,x){return c("React").createElement(c("MessagingGiftWrap.react"),{key:"giftwrap",onUnwrap:function y(){var z="2500ms",A=parseInt(z.substring(0,z.length-2),10);setTimeout(function(){return c("MercuryMessageActions").get().unwrap(w)},A)}})},getAdditionalClassNames:function v(){return null}},{name:"FlowerBorder",check:function v(w){return c("gkx")("AT7rTubr3N_DsfglfGkvVFG3tMrhGme9-eELltAXoSOKkQuD-9JepjOeFPMl1e8XndLLgVmcw1EaaNThD3K6r4QJpohV9bITGr6_ur1k_X_RGQ")&&c("MercuryMessageCustomizations").getCustomizationValue(w,c("MessageCustomizationType").BORDER)===c("MessageBorderType").FLOWERS},render:function v(w,x){if(c("MessengerEnvironment").messengerui)return c("React").createElement(c("MessagingFlowerBorder.react"),{offset:-10,key:"giftwrap:"+w.message_id});return c("React").createElement(c("MessagingFlowerBorder.react"),{key:"giftwrap:"+w.message_id})},getAdditionalClassNames:function v(){if(!c("MessengerEnvironment").messengerui)return"_337n";return null}},{name:"Reactions",check:function v(w,x){if(n(w))return false;var y=!!(w.reactions&&Object.keys(w.reactions).length>0),z=!!(!x&&(l(w)||j(w)&&c("MercuryConfig").MNFWD));return(y||z)&&!k(w)},render:function v(w,x,y,z){var A=l(w)||j(w)&&c("MercuryConfig").MNFWD;return c("React").createElement(c("MessengerReactions.react"),{isFromViewer:x,key:w.message_id+"-reactions",message:w,renderQuickAdd:A&&!x,hovered:z,participants:y&&y.participants})},getAdditionalClassNames:function v(){return"_5z-5"}}],q=[],r=[],s=[{name:"MontageReply",check:function v(w){if(!c("MercuryConfig").MontageThreadViewer)return false;var x=w.montage_reply_data&&w.montage_reply_data.message_id;return!!x},render:function v(w,x){var y=w.montage_reply_data&&w.montage_reply_data.message_id,z=w.montage_reply_data&&w.montage_reply_data.reply_action;return c("React").createElement(c("BootloadedComponent.react"),{key:"montagereply:"+w.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MontageReplyDecoratorContainer.react").__setRef("MessengerDecorator"),isFromViewer:x,messageID:y,replyAction:z,replyAuthorID:w.author,threadID:w.thread_id})},getAdditionalClassNames:function v(){return null}}],t=[{name:"ForwardImages",check:function v(w){return l(w)},render:function v(w,x){var y=o(w),z=y.ids,A=y.types;return c("React").createElement(c("BootloadedComponent.react"),{key:"forwardimages:"+w.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("MessengerEnvironment").messengerui?c("JSResource")("MessengerPhotoForwardButton.react").__setRef("MessengerDecorator"):c("JSResource")("ChatPhotoForwardButton.react").__setRef("MessengerDecorator"),attachmentIDs:z,attachmentTypes:A,isFromViewer:x})},getAdditionalClassNames:function v(){return"_ylc"}},{name:"MontageDirectKeep",check:function v(w){return n(w)},render:function v(w,x,y){return c("React").createElement(c("BootloadedComponent.react"),{key:"montagedirectkeep:"+w.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MontageDirectKeep.react").__setRef("MessengerDecorator"),message:w})},getAdditionalClassNames:function v(){return null}},{name:"ReactionPrompt",check:function v(w){if(n(w))return false;return m(w)||!l(w)&&!k(w)},render:function v(w,x,y){var z=c("MercuryConfig").MNFWD&&j(w);return c("React").createElement(c("BootloadedComponent.react"),{key:"reactionprompt:"+w.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MessengerReactionsPrompt.react").__setRef("MessengerDecorator"),message:w,messageIsSelected:y&&y.messageIsSelected&&!z,useChatEmojiReact:c("MercuryConfig").MCER,onShowMenu:y&&y.onShowMenu})},getAdditionalClassNames:function v(){return null}},{name:"MessageActions",check:function v(w){if(n(w))return false;return c("MessengerEnvironment").messengerui},render:function v(w,x,y){var z=n(w)?false:(l(w)||j(w)&&c("MercuryConfig").MNFWD)&&!k(w);return c("React").createElement(c("BootloadedComponent.react"),{key:"messageactions:"+w.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MessengerMessageActions.react").__setRef("MessengerDecorator"),message:w,isActive:y&&y.messageIsSelected,onShowMenu:y&&y.onShowMenu,includeReactions:z,isShowingOriginal:y&&y.isShowingOriginal,hasFormatting:y&&y.hasFormatting,onToggleOriginal:y&&y.handleToggleOriginal})},getAdditionalClassNames:function v(){return null}}],u={getBeforeDecorators:function v(){return s},getAfterDecorators:function v(){return p},getInnerDecorators:function v(){return t},getAfterExternalDecorators:function v(){return q},getInsideDecorators:function v(){return r}};f.exports=u}),null);