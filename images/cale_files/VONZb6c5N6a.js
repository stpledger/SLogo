if (self.CavalryLogger) { CavalryLogger.start_js(["nXdjl"]); }

__d("ModuleErrorLogger",["Bootloader","ErrorUtils","ModuleDependencies","BanzaiScuba"],(function a(b,c,d,e,f,g){__p&&__p();function h(k){if(!k||!k.length)return 0;return k.reduce(function(l,m){return l+m})/k.length}function i(k){if(!k)return[];var l=[];for(var m in k)l.push(k[m]);return l}var j={init:function k(){__p&&__p();c("ErrorUtils").addListener(function(l){__p&&__p();if(l.name!=="ModuleError")return;var m=c("ModuleDependencies").getNotLoadedModules(),n=Object.keys(m.loading),o=i(c("Bootloader").getLoadingUrls()),p=i(c("Bootloader").getLoadedUrlTimes()),q={};m.missing.forEach(function(f){q[f]=1});var r={};n.forEach(function(f){r[f]=1});var s=new(c("BanzaiScuba"))("module_errors",null,{addAsnFields:true,addPredictedGeographyFields:true,addBrowserFields:true,addMobileDeviceFields:true,addPageFields:true,addUserFields:true});s.addNormal("message",l.message).addInteger("missing_count",m.missing.length).addInteger("loading_count",n.length).addInteger("error_url_count",c("Bootloader").getErrorUrls().length).addTagset("missing_modules",q).addTagset("loading_modules",r).addInteger("mean_url_loading_time",Math.floor(h(o))).addInteger("mean_url_loaded_time",Math.floor(h(p))).post()},true)}};f.exports=j}),null);